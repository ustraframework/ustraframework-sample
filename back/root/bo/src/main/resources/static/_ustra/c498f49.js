(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{1113:function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=n(211),l=n(70),d=n(6),c=n(2),f=n(1).extend,h=n(361),v=n(214),_=n(355),m=n(19).Deferred,y=f({},h,{_dataExpressionDefaultOptions:function(){return{items:[],dataSource:null,itemTemplate:"item",value:null,valueExpr:"this",displayExpr:void 0}},_initDataExpressions:function(){this._compileValueGetter(),this._compileDisplayGetter(),this._initDynamicTemplates(),this._initDataSource(),this._itemsToDataSource()},_itemsToDataSource:function(){this.option("dataSource")||(this._dataSource=new v.DataSource({store:new _(this.option("items")),pageSize:0}))},_compileDisplayGetter:function(){this._displayGetter=l.compileGetter(this._displayGetterExpr())},_displayGetterExpr:function(){return this.option("displayExpr")},_compileValueGetter:function(){this._valueGetter=l.compileGetter(this._valueGetterExpr())},_valueGetterExpr:function(){return this.option("valueExpr")||"this"},_loadValue:function(e){var t=new m;return e=this._unwrappedValue(e),c.isDefined(e)?(this._loadSingle(this._valueGetterExpr(),e).done(function(n){this._isValueEquals(this._valueGetter(n),e)?t.resolve(n):t.reject()}.bind(this)).fail((function(){t.reject()})),t.promise()):t.reject().promise()},_getCurrentValue:function(){return this.option("value")},_unwrappedValue:function(e){var t;return(e=null!==(t=e)&&void 0!==t?t:this._getCurrentValue())&&this._dataSource&&"this"===this._valueGetterExpr()&&(e=this._getItemKey(e)),r.unwrap(e)},_getItemKey:function(e){var t=this._dataSource.key();if(Array.isArray(t)){for(var n={},i=0,r=t.length;i<r;i++)n[t[i]]=e[t[i]];return n}return t&&"object"===o(e)&&(e=e[t]),e},_isValueEquals:function(e,t){var n=this._dataSource&&this._dataSource.key(),o=c.isDefined,r=this._compareValues(e,t);return!r&&n&&o(e)&&o(t)&&(r=Array.isArray(n)?this._compareByCompositeKey(e,t,n):this._compareByKey(e,t,n)),r},_compareByCompositeKey:function(e,t,n){var o=c.isObject;if(!o(e)||!o(t))return!1;for(var i=0,r=n.length;i<r;i++)if(e[n[i]]!==t[n[i]])return!1;return!0},_compareByKey:function(e,t,n){var o=d.ensureDefined,l=r.unwrap,c=o(l(e[n]),e),f=o(l(t[n]),t);return this._compareValues(c,f)},_compareValues:function(e,t){return l.toComparable(e,!0)===l.toComparable(t,!0)},_initDynamicTemplates:d.noop,_setCollectionWidgetItemTemplate:function(){this._initDynamicTemplates(),this._setCollectionWidgetOption("itemTemplate",this.option("itemTemplate"))},_getCollectionKeyExpr:function(){var e=this.option("valueExpr");return c.isString(e)&&"this"!==e||c.isFunction(e)?e:null},_dataExpressionOptionChanged:function(e){switch(e.name){case"items":this._itemsToDataSource(),this._setCollectionWidgetOption("items");break;case"dataSource":this._initDataSource();break;case"itemTemplate":this._setCollectionWidgetItemTemplate();break;case"valueExpr":this._compileValueGetter();break;case"displayExpr":this._compileDisplayGetter(),this._initDynamicTemplates(),this._setCollectionWidgetOption("displayExpr")}}});e.exports=y},1121:function(e,t,n){"use strict";var o=O(n(0)),r=O(n(27)),l=O(n(37)),d=O(n(14)),c=O(n(98)),f=O(n(26)),h=n(1),v=O(n(30)),_=O(n(435)),m=O(n(19)),y=n(2),x=O(n(295)),k=O(n(138)),C=n(1120),F=O(n(1112)),E=n(21);function O(e){return e&&e.__esModule?e:{default:e}}var S="dx-filterbuilder",T="dx-filterbuilder-group",B="dx-filterbuilder-group-item",M="dx-filterbuilder-group-content",A="dx-filterbuilder-action",V="dx-filterbuilder-action-icon",w="dx-filterbuilder-text",D="dx-filterbuilder-text-separator",I="dx-filterbuilder-item-value",z="dx-state-active",U="filterBuilder",$="enter",L="escape",P=[{name:"onEditorPreparing",config:{excludeValidators:["disabled","readOnly"],category:"rendering"}},{name:"onEditorPrepared",config:{excludeValidators:["disabled","readOnly"],category:"rendering"}},{name:"onValueChanged",config:{excludeValidators:["disabled","readOnly"]}}],H={and:"and",or:"or",notAnd:"!and",notOr:"!or"},W=l.default.inherit(F.default),G=function(e,t,n){if(Array.isArray(t)){var r=t.length-1;e.empty(),t.forEach((function(t,i){(0,o.default)("<span>").addClass("dx-filterbuilder-text-part").text(t).appendTo(e),i!==r&&(0,o.default)("<span>").addClass(D).text(n&&n.valueSeparator?n.valueSeparator:"|").addClass("dx-filterbuilder-text-separator-empty").appendTo(e)}))}else t?e.text(t):e.text(v.default.format("dxFilterBuilder-enterValueText"))},R=c.default.inherit({_getDefaultOptions:function(){return(0,h.extend)(this.callBase(),{onEditorPreparing:null,onEditorPrepared:null,onValueChanged:null,fields:[],defaultGroupOperation:"and",groupOperations:["and","or","notAnd","notOr"],maxGroupLevel:void 0,value:null,allowHierarchicalFields:!1,groupOperationDescriptions:{and:v.default.format("dxFilterBuilder-and"),or:v.default.format("dxFilterBuilder-or"),notAnd:v.default.format("dxFilterBuilder-notAnd"),notOr:v.default.format("dxFilterBuilder-notOr")},customOperations:[],closePopupOnTargetScroll:!0,filterOperationDescriptions:{between:v.default.format("dxFilterBuilder-filterOperationBetween"),equal:v.default.format("dxFilterBuilder-filterOperationEquals"),notEqual:v.default.format("dxFilterBuilder-filterOperationNotEquals"),lessThan:v.default.format("dxFilterBuilder-filterOperationLess"),lessThanOrEqual:v.default.format("dxFilterBuilder-filterOperationLessOrEquals"),greaterThan:v.default.format("dxFilterBuilder-filterOperationGreater"),greaterThanOrEqual:v.default.format("dxFilterBuilder-filterOperationGreaterOrEquals"),startsWith:v.default.format("dxFilterBuilder-filterOperationStartsWith"),contains:v.default.format("dxFilterBuilder-filterOperationContains"),notContains:v.default.format("dxFilterBuilder-filterOperationNotContains"),endsWith:v.default.format("dxFilterBuilder-filterOperationEndsWith"),isBlank:v.default.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:v.default.format("dxFilterBuilder-filterOperationIsNotBlank")}})},_optionChanged:function(e){switch(e.name){case"closePopupOnTargetScroll":break;case"onEditorPreparing":case"onEditorPrepared":case"onValueChanged":this._initActions();break;case"customOperations":this._initCustomOperations(),this._invalidate();break;case"fields":case"defaultGroupOperation":case"maxGroupLevel":case"groupOperations":case"allowHierarchicalFields":case"groupOperationDescriptions":case"filterOperationDescriptions":this._invalidate();break;case"value":if(e.value!==e.previousValue){var t=this._disableInvalidateForValue;t||(this._initModel(),this._invalidate()),this._disableInvalidateForValue=!1,this.executeAction("onValueChanged",{value:e.value,previousValue:e.previousValue}),this._disableInvalidateForValue=t}break;default:this.callBase(e)}},getFilterExpression:function(){var e=this._getNormalizedFields(),t=(0,h.extend)(!0,[],this._model);return _.default.getFilterExpression(_.default.getNormalizedFilter(t),e,this._customOperations,U)},_getNormalizedFields:function(){return _.default.getNormalizedFields(this.option("fields"))},_updateFilter:function(){this._disableInvalidateForValue=!0;var e=(0,h.extend)(!0,[],this._model),t=_.default.getNormalizedFilter(e),n=_.default.getNormalizedFilter(this._getModel(this.option("value")));JSON.stringify(n)!==JSON.stringify(t)&&this.option("value",t),this._disableInvalidateForValue=!1,this._fireContentReadyAction()},_init:function(){this._initCustomOperations(),this._initModel(),this._initEditorFactory(),this._initActions(),this.callBase()},_initEditorFactory:function(){this._editorFactory=new W},_initCustomOperations:function(){this._customOperations=_.default.getMergedOperations(this.option("customOperations"),this.option("filterOperationDescriptions.between"),this)},_getModel:function(e){return _.default.convertToInnerStructure(e,this._customOperations)},_initModel:function(){this._model=this._getModel(this.option("value"))},_initActions:function(){var e=this;e._actions={},P.forEach((function(t){var n=(0,h.extend)({},t.config);e._actions[t.name]=e._createActionByOption(t.name,n)}))},executeAction:function(e,t){var n=this._actions[e];return n&&n(t)},_initMarkup:function(){this.$element().addClass(S),this.callBase(),this._createGroupElementByCriteria(this._model).appendTo(this.$element())},_createConditionElement:function(e,t){return(0,o.default)("<div>").addClass(T).append(this._createConditionItem(e,t))},_createGroupElementByCriteria:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=this._createGroupElement(e,t,n),r=o.find(".dx-filterbuilder-group-content"),l=_.default.getGroupCriteria(e),i=0;i<l.length;i++){var d=l[i];_.default.isGroup(d)?this._createGroupElementByCriteria(d,l,n+1).appendTo(r):_.default.isCondition(d)&&this._createConditionElement(d,l).appendTo(r)}return o},_createGroupElement:function(e,t,n){var r=this,l=(0,o.default)("<div>").addClass(B),d=(0,o.default)("<div>").addClass(M),c=(0,o.default)("<div>").addClass(T).append(l).append(d);return null!=t&&this._createRemoveButton((function(){_.default.removeItem(t,e),c.remove(),r._updateFilter()})).appendTo(l),this._createGroupOperationButton(e).appendTo(l),this._createAddButton((function(){var t=_.default.createEmptyGroup(r.option("defaultGroupOperation"));_.default.addItem(t,e),r._createGroupElement(t,e,n+1).appendTo(d),r._updateFilter()}),(function(){var t=r.option("fields")[0],n=_.default.createCondition(t,r._customOperations);_.default.addItem(n,e),r._createConditionElement(n,e).appendTo(d),r._updateFilter()}),n).appendTo(l),c},_createButton:function(caption){return(0,o.default)("<div>").text(caption)},_createGroupOperationButton:function(e){var t=this,n=this._getGroupOperations(e),o=_.default.getGroupMenuItem(e,n),caption=o.text,r=n&&n.length<2?this._createButton(caption).addClass("dx-state-disabled"):this._createButtonWithMenu({caption:caption,menu:{items:n,displayExpr:"text",keyExpr:"value",onItemClick:function(n){o!==n.itemData&&(_.default.setGroupValue(e,n.itemData.value),r.html(n.itemData.text),o=n.itemData,t._updateFilter())},onContentReady:function(e){e.component.selectItem(o)},cssClass:"dx-filterbuilder-group-operations"}});return r.addClass(w).addClass("dx-filterbuilder-group-operation").attr("tabindex",0)},_createButtonWithMenu:function(e){var t,n=this,r=function(){n.$element().find("."+z).removeClass(z),n.$element().find(".dx-overlay .dx-treeview").remove(),n.$element().find(".dx-overlay").remove()},l=this.option("rtlEnabled"),c=l?"right":"left",f=this._createButton(e.caption);return(0,h.extend)(e.menu,{focusStateEnabled:!0,selectionMode:"single",onItemClick:(t=e.menu.onItemClick,function(e){t(e),"dxclick"===e.event.type&&r()}),onHiding:function(e){f.removeClass(z)},position:{my:c+" top",at:c+" bottom",offset:"0 1",of:f,collision:"flip"},animation:null,onHidden:function(){r()},cssClass:"dx-filterbuilder-overlay "+e.menu.cssClass,rtlEnabled:l}),e.popup={onShown:function(t){var n=(0,o.default)(t.component.content()).find(".dx-treeview"),r=n.dxTreeView("instance");d.default.on(n,"keyup keydown",(function(n){var o=(0,E.normalizeKeyName)(n);("keydown"===n.type&&"tab"===o||"keyup"===n.type&&(o===L||o===$))&&(t.component.hide(),d.default.trigger(e.menu.position.of,"focus"))})),r.focus(),r.option("focusedElement",null)}},this._subscribeOnClickAndEnterKey(f,(function(){r(),n._createPopupWithTreeView(e,n.$element()),f.addClass(z)})),f},_hasValueButton:function(e){var t=_.default.getCustomOperation(this._customOperations,e[1]);return t?!1!==t.hasValue:null!==e[2]},_createOperationButtonWithMenu:function(e,t){var n=this,r=this,l=_.default.getAvailableOperations(t,this.option("filterOperationDescriptions"),this._customOperations),d=_.default.getOperationFromAvailable(_.default.getOperationValue(e),l),c=this._createButtonWithMenu({caption:d.text,menu:{items:l,displayExpr:"text",onItemRendered:function(e){e.itemData.isCustom&&(0,o.default)(e.itemElement).addClass("dx-filterbuilder-menu-custom-operation")},onContentReady:function(e){e.component.selectItem(d)},onItemClick:function(o){if(d!==o.itemData){d=o.itemData,_.default.updateConditionByOperation(e,d.value,r._customOperations);var l=c.siblings().filter(".dx-filterbuilder-item-value");r._hasValueButton(e)?(0!==l.length&&l.remove(),r._createValueButton(e,t).appendTo(c.parent())):l.remove(),c.html(d.text),n._updateFilter()}},cssClass:"dx-filterbuilder-operations"}}).addClass(w).addClass("dx-filterbuilder-item-operation").attr("tabindex",0);return c},_createOperationAndValueButtons:function(e,t,n){this._createOperationButtonWithMenu(e,t).appendTo(n),this._hasValueButton(e)&&this._createValueButton(e,t).appendTo(n)},_createFieldButtonWithMenu:function(e,t,n){var o=this,r=this,l=this.option("allowHierarchicalFields"),d=_.default.getItems(e,l),c=_.default.getField(n.name||n.dataField,d),f=function(e,t){return l?_.default.getCaptionWithParents(e,t):e.caption},h=this._createButtonWithMenu({caption:f(c,d),menu:{items:d,dataStructure:"plain",keyExpr:"id",parentId:"parentId",displayExpr:"caption",onItemClick:function(e){if(c!==e.itemData){c=e.itemData,t[0]=c.name||c.dataField,t[2]="object"===c.dataType?null:"",_.default.updateConditionByOperation(t,_.default.getDefaultOperation(c),r._customOperations),h.siblings().filter(".dx-filterbuilder-text").remove(),r._createOperationAndValueButtons(t,c,h.parent());var caption=f(c,e.component.option("items"));h.html(caption),o._updateFilter()}},onContentReady:function(e){e.component.selectItem(c)},cssClass:"dx-filterbuilder-fields"}}).addClass(w).addClass("dx-filterbuilder-item-field").attr("tabindex",0);return h},_createConditionItem:function(e,t){var n=this,r=(0,o.default)("<div>").addClass(B),l=this._getNormalizedFields(),d=_.default.getField(e[0],l);return this._createRemoveButton((function(){_.default.removeItem(t,e),1===r.parent().children().length?r.parent().remove():r.remove(),n._updateFilter()})).appendTo(r),this._createFieldButtonWithMenu(l,e,d).appendTo(r),this._createOperationAndValueButtons(e,d,r),r},_getGroupOperations:function(e){var t=this.option("groupOperations"),n=this.option("groupOperationDescriptions");return t&&t.length||(t=[_.default.getGroupValue(e).replace("!","not")]),t.map((function(e){return{text:n[e],value:H[e]}}))},_createRemoveButton:function(e){var t=(0,o.default)("<div>").addClass(V).addClass("dx-icon-remove").addClass(A).attr("tabindex",0);return this._subscribeOnClickAndEnterKey(t,e),t},_createAddButton:function(e,t,n){var o,r=this.option("maxGroupLevel");return(0,y.isDefined)(r)&&n>=r?(o=this._createButton(),this._subscribeOnClickAndEnterKey(o,t)):o=this._createButtonWithMenu({menu:{items:[{caption:v.default.format("dxFilterBuilder-addCondition"),click:t},{caption:v.default.format("dxFilterBuilder-addGroup"),click:e}],displayExpr:"caption",onItemClick:function(e){e.itemData.click()},cssClass:"dx-filterbuilder-add-condition"}}),o.addClass(V).addClass("dx-icon-plus").addClass(A).attr("tabindex",0)},_createValueText:function(e,t,n){var r=this,l=(0,o.default)("<div>").html("&nbsp;").addClass("dx-filterbuilder-item-value-text").attr("tabindex",0).appendTo(n),d=e[2],c=_.default.getCustomOperation(r._customOperations,e[1]);return!c&&t.lookup?_.default.getCurrentLookupValueText(t,d,(function(e){G(l,e)})):m.default.when(_.default.getCurrentValueText(t,d,c)).done((function(e){G(l,e,c)})),r._subscribeOnClickAndEnterKey(l,(function(o){"keyup"===o.type&&o.stopPropagation(),r._createValueEditorWithEvents(e,t,n)})),l},_updateConditionValue:function(e,t,n){e[2]!==t&&(e[2]=t),n(),this._updateFilter()},_addDocumentKeyUp:function(e,t){var n=!1,o=!1,l=r.default.getDocument(),c=function(e){n||o?o=!1:t(e)};d.default.on(l,"keyup",c);var input=e.find("input");d.default.on(input,"compositionstart",(function(){n=!0})),d.default.on(input,"compositionend",(function(){n=!1,o=!0})),d.default.on(input,"keydown",(function(e){229!==e.which&&(o=!1)})),this._documentKeyUpHandler=c},_addDocumentClick:function(e,t){var n=this,o=r.default.getDocument(),l=function(o){n._isFocusOnEditorParts(e,o.target)||(d.default.trigger(e.find("input"),"change"),t())};d.default.on(o,"dxpointerdown",l),this._documentClickHandler=l},_isFocusOnEditorParts:function(e,t){var n=t||r.default.getActiveElement();return(0,o.default)(n).closest(e.children()).length||(0,o.default)(n).closest(".dx-dropdowneditor-overlay").length},_removeEvents:function(){var e=r.default.getDocument();(0,y.isDefined)(this._documentKeyUpHandler)&&d.default.off(e,"keyup",this._documentKeyUpHandler),(0,y.isDefined)(this._documentClickHandler)&&d.default.off(e,"dxpointerdown",this._documentClickHandler)},_dispose:function(){this._removeEvents(),this.callBase()},_createValueEditorWithEvents:function(e,t,n){var o=this,r=e[2],l=function(){return n.empty(),o._removeEvents(),o._createValueText(e,t,n)},c=function(){o._updateConditionValue(e,r,(function(){l()}))},f={value:""===r?null:r,filterOperation:_.default.getOperationValue(e),setValue:function(data){r=null===data?"":data},closeEditor:c,text:n.text()};n.empty();var h=this._createValueEditor(n,t,f);d.default.trigger(h.find("input").not(":hidden").eq(0),"focus"),this._removeEvents(),this._addDocumentClick(h,c),this._addDocumentKeyUp(h,(function(t){var c=(0,E.normalizeKeyName)(t);if("tab"===c){if(o._isFocusOnEditorParts(h))return;o._updateConditionValue(e,r,(function(){l(),t.shiftKey&&d.default.trigger(n.prev(),"focus")}))}c===L&&d.default.trigger(l(),"focus"),c===$&&o._updateConditionValue(e,r,(function(){d.default.trigger(l(),"focus")}))})),this._fireContentReadyAction()},_createValueButton:function(e,t){var n=(0,o.default)("<div>").addClass(w).addClass(I);return this._createValueText(e,t,n),n},_createValueEditor:function(e,t,n){var r=(0,o.default)("<div>").attr("tabindex",0).appendTo(e),l=_.default.getCustomOperation(this._customOperations,n.filterOperation),d=l&&l.editorTemplate?l.editorTemplate:t.editorTemplate;d?this._getTemplate(d).render({model:(0,h.extend)({field:t},n),container:r}):this._editorFactory.createEditor.call(this,r,(0,h.extend)({},t,n,{parentType:U}));return r},_createPopupWithTreeView:function(e,t){var n=this,r=(0,o.default)("<div>").addClass(e.menu.cssClass).appendTo(t);this._createComponent(r,k.default,{onHiding:e.menu.onHiding,onHidden:e.menu.onHidden,rtlEnabled:e.menu.rtlEnabled,position:e.menu.position,animation:e.menu.animation,contentTemplate:function(t){var r=(0,o.default)("<div>").appendTo(t);n._createComponent(r,x.default,e.menu),this.repaint()},maxHeight:function(){return(0,C.getElementMaxHeightByWindow)(e.menu.position.of)},visible:!0,focusStateEnabled:!1,closeOnTargetScroll:this.option("closePopupOnTargetScroll"),closeOnOutsideClick:!0,onShown:e.popup.onShown,shading:!1,width:"auto",height:"auto",showTitle:!1})},_subscribeOnClickAndEnterKey:function(e,t){d.default.on(e,"dxclick",t),d.default.on(e,"keyup",(function(e){(0,E.normalizeKeyName)(e)===$&&t(e)}))}});(0,f.default)("dxFilterBuilder",R),e.exports=R,e.exports.renderValueText=G},128:function(e,t,n){"use strict";var o=C(n(0)),r=C(n(116)),l=C(n(74)),d=C(n(20)),c=n(21),f=n(75),h=n(1),v=C(n(103)),_=C(n(98)),m=C(n(149)),y=C(n(213)),x=C(n(14)),k=n(120);function C(e){return e&&e.__esModule?e:{default:e}}var F="dx-invalid-message-auto",E="dx-validation-target",O="invalid",S=_.default.inherit({ctor:function(){this.showValidationMessageTimeout=null,this.validationRequest=(0,l.default)(),this.callBase.apply(this,arguments)},_createElement:function(element){this.callBase(element);var e=this.$element();e&&r.default.data(e[0],E,this)},_initOptions:function(e){this.callBase.apply(this,arguments),this.option(y.default.initValidationOptions(e))},_init:function(){this.callBase(),this._options.cache("validationTooltipOptions",this.option("validationTooltipOptions")),this.$element().addClass("dx-show-invalid-badge")},_getDefaultOptions:function(){return(0,h.extend)(this.callBase(),{value:null,name:"",onValueChanged:null,readOnly:!1,isValid:!0,validationError:null,validationErrors:null,validationStatus:"valid",validationMessageMode:"auto",validationBoundary:void 0,validationMessageOffset:{h:0,v:0},validationTooltipOptions:{}})},_attachKeyboardEvents:function(){this.option("readOnly")||this.callBase()},_setOptionsByReference:function(){this.callBase(),(0,h.extend)(this._optionsByReference,{validationError:!0})},_createValueChangeAction:function(){this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]})},_suppressValueChangeAction:function(){this._valueChangeActionSuppressed=!0},_resumeValueChangeAction:function(){this._valueChangeActionSuppressed=!1},_initMarkup:function(){this._toggleReadOnlyState(),this._setSubmitElementName(this.option("name")),this.callBase(),this._renderValidationState()},_raiseValueChangeAction:function(e,t){this._valueChangeAction||this._createValueChangeAction(),this._valueChangeAction(this._valueChangeArgs(e,t))},_valueChangeArgs:function(e,t){return{value:e,previousValue:t,event:this._valueChangeEventInstance}},_saveValueChangeEvent:function(e){this._valueChangeEventInstance=e},_focusInHandler:function(e){var t=this,n="auto"===this.option("validationMessageMode");return this._canValueBeChangedByClick()&&n&&(this._$validationMessage&&this._$validationMessage.removeClass(F),clearTimeout(this.showValidationMessageTimeout),this.showValidationMessageTimeout=setTimeout((function(){return t._$validationMessage&&t._$validationMessage.addClass(F)}),150)),this.callBase(e)},_canValueBeChangedByClick:function(){return!1},_renderValidationState:function(){var e=this.option("isValid")&&this.option("validationStatus")!==O,t=this.option("validationMessageMode"),n=this.$element(),r=this.option("validationErrors");if(!r&&this.option("validationError")&&(r=[this.option("validationError")]),n.toggleClass("dx-invalid",!e),this.setAria(O,!e||void 0),d.default.hasWindow()){this._$validationMessage&&(this._$validationMessage.remove(),this.setAria("describedby",null),this._$validationMessage=null);var l=function(e){var t="";return e&&e.forEach((function(e){e.message&&(t+=(t?"<br />":"")+(0,k.encodeHtml)(e.message))})),t}(r);if(!e&&l){this._$validationMessage=(0,o.default)("<div>").addClass("dx-invalid-message").html(l).appendTo(n);var c=this._getValidationMessageTarget();this._validationMessage=this._createComponent(this._$validationMessage,m.default,(0,h.extend)({integrationOptions:{},templatesRenderAsynchronously:!1,target:c,shading:!1,width:"auto",height:"auto",container:n,position:this._getValidationMessagePosition("below"),closeOnOutsideClick:!1,closeOnTargetScroll:!1,animation:null,visible:!0,propagateOutsideClick:!0,_checkParentVisibility:!1},this._options.cache("validationTooltipOptions"))),this._$validationMessage.toggleClass(F,"auto"===t).toggleClass("dx-invalid-message-always","always"===t);var f="dx-"+new v.default;this._validationMessage.$content().addClass("dx-invalid-message-content").attr("id",f),this.setAria("describedby",f),this._setValidationMessageMaxWidth(),this._bindInnerWidgetOptions(this._validationMessage,"validationTooltipOptions")}}},_setValidationMessageMaxWidth:function(){if(this._validationMessage)if(0!==this._getValidationMessageTarget().outerWidth()){var e=Math.max(100,this._getValidationMessageTarget().outerWidth());this._validationMessage.option("maxWidth",e)}else this._validationMessage.option("maxWidth","100%")},_getValidationMessageTarget:function(){return this.$element()},_getValidationMessagePosition:function(e){var t=this.option("rtlEnabled"),n=(0,f.getDefaultAlignment)(t),o=this.option("validationMessageOffset"),r={h:o.h,v:o.v},l="below"===e?[" top"," bottom"]:[" bottom"," top"];return t&&(r.h=-r.h),"below"!==e&&(r.v=-r.v),{offset:r,boundary:this.option("validationBoundary"),my:n+l[0],at:n+l[1],collision:"none flip"}},_toggleReadOnlyState:function(){var e=this.option("readOnly");this._toggleBackspaceHandler(e),this.$element().toggleClass("dx-state-readonly",!!e),this.setAria("readonly",e||void 0)},_toggleBackspaceHandler:function(e){var t=this._keyboardEventBindingTarget(),n=(0,c.addNamespace)("keydown","editorReadOnly");x.default.off(t,n),e&&x.default.on(t,n,(function(e){"backspace"===(0,c.normalizeKeyName)(e)&&e.preventDefault()}))},_dispose:function(){var element=this.$element()[0];r.default.data(element,E,null),clearTimeout(this.showValidationMessageTimeout),this.callBase()},_setSubmitElementName:function(e){var t=this._getSubmitElement();t&&(e.length>0?t.attr("name",e):t.removeAttr("name"))},_getSubmitElement:function(){return null},_optionChanged:function(e){switch(e.name){case"onValueChanged":this._createValueChangeAction();break;case"isValid":case"validationError":this.option(y.default.synchronizeValidationOptions(e,this.option()));break;case"validationErrors":case"validationStatus":this.option(y.default.synchronizeValidationOptions(e,this.option())),this._renderValidationState();break;case"validationBoundary":case"validationMessageMode":this._renderValidationState();break;case"validationTooltipOptions":this._innerWidgetOptionChanged(this._validationMessage,e);break;case"readOnly":this._toggleReadOnlyState(),this._refreshFocusState();break;case"value":e.value!=e.previousValue&&this.validationRequest.fire({value:e.value,editor:this}),this._valueChangeActionSuppressed||(this._raiseValueChangeAction(e.value,e.previousValue),this._saveValueChangeEvent(void 0));break;case"width":this.callBase(e),this._setValidationMessageMaxWidth();break;case"name":this._setSubmitElementName(e.value);break;default:this.callBase(e)}},reset:function(){var e=this._getDefaultOptions();this.option("value",e.value)}});e.exports=S},1795:function(e,t,n){"use strict";var o=n(0),r=n(1).extend,l="dx-filterbuilder-range";function d(e,t){var n=o("<div>").addClass("dx-filterbuilder-range-start"),d=o("<div>").addClass("dx-filterbuilder-range-end"),c=e.value||[],f=function(e){return e&&e.length>0?e[0]:null},h=function(e){return e&&2===e.length?e[1]:null};t.append(n),t.append(o("<span>").addClass("dx-filterbuilder-range-separator").text("–")),t.append(d),t.addClass(l),this._editorFactory.createEditor.call(this,n,r({},e.field,e,{value:f(c),parentType:"filterBuilder",setValue:function(t){c=[t,h(c)],e.setValue(c)}})),this._editorFactory.createEditor.call(this,d,r({},e.field,e,{value:h(c),parentType:"filterBuilder",setValue:function(t){c=[f(c),t],e.setValue(c)}}))}t.getConfig=function(caption,e){return{name:"between",caption:caption,icon:"range",valueSeparator:"–",dataTypes:["number","date","datetime"],editorTemplate:d.bind(e),notForLookup:!0}}},1796:function(e,t,n){"use strict";var o={"=":"equal","<>":"notequal","<":"less","<=":"lessorequal",">":"greater",">=":"greaterorequal",notcontains:"doesnotcontain",contains:"contains",startswith:"startswith",endswith:"endswith",isblank:"isblank",isnotblank:"isnotblank"},r={"=":"equal","<>":"notEqual","<":"lessThan","<=":"lessThanOrEqual",">":"greaterThan",">=":"greaterThanOrEqual",startswith:"startsWith",contains:"contains",notcontains:"notContains",endswith:"endsWith",isblank:"isBlank",isnotblank:"isNotBlank",between:"between"};e.exports={getIconByFilterOperation:function(e){return o[e]},getNameByFilterOperation:function(e){return r[e]}}},1800:function(e,t,n){"use strict";e.exports=n(1121),e.exports.default=e.exports},1855:function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=w(n(0)),l=w(n(103)),d=n(20),c=w(n(14)),f=w(n(26)),h=w(n(74)),v=n(2),_=n(10),m=n(1),y=n(35),x=n(19),k=w(n(632)),C=w(n(128)),F=w(n(80)),E=w(n(1856)),O=w(n(50)),S=w(n(29)),T=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=V();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var desc=r?Object.getOwnPropertyDescriptor(e,l):null;desc&&(desc.get||desc.set)?Object.defineProperty(n,l,desc):n[l]=e[l]}n.default=e,t&&t.set(e,n);return n}(n(21)),B=w(n(58)),M=w(n(30)),A=w(n(82));function V(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return V=function(){return e},e}function w(e){return e&&e.__esModule?e:{default:e}}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function z(e,t,n){return t&&I(e.prototype,t),n&&I(e,n),e}function U(e,t,n){return(U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var base=function(object,e){for(;!Object.prototype.hasOwnProperty.call(object,e)&&null!==(object=W(object)););return object}(e,t);if(base){var desc=Object.getOwnPropertyDescriptor(base,t);return desc.get?desc.get.call(n):desc.value}})(e,t,n||e)}function $(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}function L(e,p){return(L=Object.setPrototypeOf||function(e,p){return e.__proto__=p,e})(e,p)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=W(e);if(t){var r=W(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return H(this,n)}}function H(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var G=(0,d.getWindow)(),R="dx-fileuploader-dragover",N="dx-fileuploader-file-container",j="dx-fileuploader-file-name",K="dx-fileuploader-file-size",J="dx-fileuploader-button",Q="dx-fileuploader-button-container",X="dx-fileuploader-upload-button",Y=function(){return!!G.FormData},Z=function(e){$(n,e);var t=P(n);function n(){return D(this,n),t.apply(this,arguments)}return z(n,[{key:"_supportedKeys",value:function(){var e=this,t=function(t){t.preventDefault();var n=e._selectButton.$element();c.default.trigger(n,B.default.name)};return(0,m.extend)(U(W(n.prototype),"_supportedKeys",this).call(this),{space:t,enter:t})}},{key:"_setOptionsByReference",value:function(){U(W(n.prototype),"_setOptionsByReference",this).call(this),(0,m.extend)(this._optionsByReference,{value:!0})}},{key:"_getDefaultOptions",value:function(){return(0,m.extend)(U(W(n.prototype),"_getDefaultOptions",this).call(this),{chunkSize:0,value:[],selectButtonText:M.default.format("dxFileUploader-selectFile"),uploadButtonText:M.default.format("dxFileUploader-upload"),labelText:M.default.format("dxFileUploader-dropFile"),name:"files[]",multiple:!1,accept:"",uploadUrl:"/",allowCanceling:!0,showFileList:!0,progress:0,readyToUploadMessage:M.default.format("dxFileUploader-readyToUpload"),uploadedMessage:M.default.format("dxFileUploader-uploaded"),uploadFailedMessage:M.default.format("dxFileUploader-uploadFailedMessage"),uploadMode:"instantly",uploadMethod:"POST",uploadHeaders:{},onUploadStarted:null,onUploaded:null,onProgress:null,onUploadError:null,onUploadAborted:null,allowedFileExtensions:[],maxFileSize:0,minFileSize:0,inputAttr:{},invalidFileExtensionMessage:M.default.format("dxFileUploader-invalidFileExtension"),invalidMaxFileSizeMessage:M.default.format("dxFileUploader-invalidMaxFileSize"),invalidMinFileSizeMessage:M.default.format("dxFileUploader-invalidMinFileSize"),extendSelection:!0,validationMessageMode:"always",uploadFile:null,uploadChunk:null,abortUpload:null,validationMessageOffset:{h:0,v:0},useNativeInputClick:!1,useDragOver:!0,nativeDropSupported:!0,_uploadButtonType:"normal"})}},{key:"_defaultOptionsRules",value:function(){return U(W(n.prototype),"_defaultOptionsRules",this).call(this).concat([{device:function(){return"desktop"===S.default.real().deviceType&&!S.default.isSimulator()},options:{focusStateEnabled:!0}},{device:[{platform:"android"}],options:{validationMessageOffset:{v:0}}},{device:function(){return"desktop"!==S.default.real().deviceType},options:{useDragOver:!1}},{device:function(){return!Y()},options:{uploadMode:"useForm"}},{device:function(){return O.default.msie||"desktop"!==S.default.real().deviceType},options:{nativeDropSupported:!1}},{device:function(){return A.default.isMaterial()},options:{_uploadButtonType:"default"}}])}},{key:"_initOptions",value:function(e){var t="labelText"in e;U(W(n.prototype),"_initOptions",this).call(this,e),t||this._shouldDragOverBeRendered()||this.option("labelText","")}},{key:"_init",value:function(){U(W(n.prototype),"_init",this).call(this),this._initFileInput(),this._initLabel(),this._setUploadStrategy(),this._createFiles(),this._createUploadStartedAction(),this._createUploadedAction(),this._createProgressAction(),this._createUploadErrorAction(),this._createUploadAbortedAction()}},{key:"_setUploadStrategy",value:function(){var e=null;if(this.option("chunkSize")>0){var t=this.option("uploadChunk");e=t&&(0,v.isFunction)(t)?new ae(this):new ne(this)}else{var n=this.option("uploadFile");e=n&&(0,v.isFunction)(n)?new le(this):new re(this)}this._uploadStrategy=e}},{key:"_initFileInput",value:function(){var e=this;this._isCustomClickEvent=!1,this._$fileInput||(this._$fileInput=(0,r.default)("<input>").attr("type","file"),c.default.on(this._$fileInput,"change",this._inputChangeHandler.bind(this)),c.default.on(this._$fileInput,"click",(function(t){return t.stopPropagation(),e.option("useNativeInputClick")||e._isCustomClickEvent}))),this._$fileInput.prop({multiple:this.option("multiple"),accept:this.option("accept"),tabIndex:-1})}},{key:"_inputChangeHandler",value:function(){if(!this._doPreventInputChange){var e=this._$fileInput.val().replace(/^.*\\/,""),t=this._$fileInput.prop("files");if(!t||t.length||"useForm"===this.option("uploadMode")){var n=t?this._getFiles(t):[{name:e}];this._changeValue(n),"instantly"===this.option("uploadMode")&&this._uploadFiles()}}}},{key:"_shouldFileListBeExtended",value:function(){return"useForm"!==this.option("uploadMode")&&this.option("extendSelection")&&this.option("multiple")}},{key:"_removeDuplicates",value:function(e,t){for(var n=[],i=0;i<t.length;i++)this._isFileInArray(e,t[i])||n.push(t[i]);return n}},{key:"_isFileInArray",value:function(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n.size===t.size&&n.name===t.name)return!0}return!1}},{key:"_changeValue",value:function(e){var t=this._shouldFileListBeExtended()?this.option("value").slice():[];"instantly"!==this.option("uploadMode")&&(e=this._removeDuplicates(t,e)),this.option("value",t.concat(e))}},{key:"_getFiles",value:function(e){var t=[];return(0,_.each)(e,(function(e,n){return t.push(n)})),t}},{key:"_initLabel",value:function(){this._$inputLabel||(this._$inputLabel=(0,r.default)("<div>")),this._updateInputLabelText()}},{key:"_updateInputLabelText",value:function(){var e=this._isInteractionDisabled()?"":this.option("labelText");this._$inputLabel.text(e)}},{key:"_focusTarget",value:function(){return this.$element().find(".dx-fileuploader-button")}},{key:"_getSubmitElement",value:function(){return this._$fileInput}},{key:"_initMarkup",value:function(){U(W(n.prototype),"_initMarkup",this).call(this),this.$element().addClass("dx-fileuploader"),this._renderWrapper(),this._renderInputWrapper(),this._renderSelectButton(),this._renderInputContainer(),this._renderUploadButton(),this._preventRecreatingFiles=!0}},{key:"_render",value:function(){this._preventRecreatingFiles=!1,this._renderDragEvents(),this._renderFiles(),U(W(n.prototype),"_render",this).call(this)}},{key:"_createFileProgressBar",value:function(e){e.progressBar=this._createProgressBar(e.value.size),e.progressBar.$element().appendTo(e.$file),this._initStatusMessage(e),this._initCancelButton(e)}},{key:"_setStatusMessage",value:function(e,t){var n=this;setTimeout((function(){n.option("showFileList")&&e.$statusMessage&&(e.$statusMessage.text(n.option(t)),e.$statusMessage.css("display",""),e.progressBar.$element().remove())}),400)}},{key:"_createFiles",value:function(){var e=this,t=this.option("value");!this._files||0!==t.length&&this._shouldFileListBeExtended()||(this._preventFilesUploading(this._files),this._files=null),this._files||(this._files=[]),(0,_.each)(t.slice(this._files.length),(function(t,n){var o=e._createFile(n);e._validateFile(o),e._files.push(o)}))}},{key:"_preventFilesUploading",value:function(e){var t=this;e.forEach((function(e){return t._uploadStrategy.abortUpload(e)}))}},{key:"_validateFile",value:function(e){e.isValidFileExtension=this._validateFileExtension(e),e.isValidMinSize=this._validateMinFileSize(e),e.isValidMaxSize=this._validateMaxFileSize(e)}},{key:"_validateFileExtension",value:function(e){var t=this.option("allowedFileExtensions"),n=e.value.name.substring(e.value.name.lastIndexOf(".")).toLowerCase();if(0===t.length)return!0;for(var i=0;i<t.length;i++)if(n===t[i].toLowerCase())return!0;return!1}},{key:"_validateMaxFileSize",value:function(e){var t=e.value.size,n=this.option("maxFileSize");return!(n>0)||t<=n}},{key:"_validateMinFileSize",value:function(e){var t=e.value.size,n=this.option("minFileSize");return!(n>0)||t>=n}},{key:"_createUploadStartedAction",value:function(){this._uploadStartedAction=this._createActionByOption("onUploadStarted",{excludeValidators:["readOnly"]})}},{key:"_createUploadedAction",value:function(){this._uploadedAction=this._createActionByOption("onUploaded",{excludeValidators:["readOnly"]})}},{key:"_createProgressAction",value:function(){this._progressAction=this._createActionByOption("onProgress",{excludeValidators:["readOnly"]})}},{key:"_createUploadAbortedAction",value:function(){this._uploadAbortedAction=this._createActionByOption("onUploadAborted",{excludeValidators:["readOnly"]})}},{key:"_createUploadErrorAction",value:function(){this._uploadErrorAction=this._createActionByOption("onUploadError",{excludeValidators:["readOnly"]})}},{key:"_createFile",value:function(e){return{value:e,loadedSize:0,onProgress:(0,h.default)(),onAbort:(0,h.default)(),onLoad:(0,h.default)(),onError:(0,h.default)(),onLoadStart:(0,h.default)(),isValidFileExtension:!0,isValidMaxSize:!0,isValidMinSize:!0,isValid:function(){return this.isValidFileExtension&&this.isValidMaxSize&&this.isValidMinSize}}}},{key:"_renderFiles",value:function(){var e=this,t=this.option("value");this._$filesContainer?this._shouldFileListBeExtended()&&0!==t.length||this._$filesContainer.empty():this._$filesContainer=(0,r.default)("<div>").addClass("dx-fileuploader-files-container").appendTo(this._$content);var n=this.option("showFileList");n&&(0,_.each)(this._files,(function(t,n){n.$file||e._renderFile(n)})),this.$element().toggleClass("dx-fileuploader-show-file-list",n),this._toggleFileUploaderEmptyClassName(),this._updateFileNameMaxWidth(),this._$validationMessage&&this._$validationMessage.dxOverlay("instance").repaint()}},{key:"_renderFile",value:function(e){var t=e.value,n=(0,r.default)("<div>").addClass(N).appendTo(this._$filesContainer);this._renderFileButtons(e,n),e.$file=(0,r.default)("<div>").addClass("dx-fileuploader-file").appendTo(n);var o=(0,r.default)("<div>").addClass("dx-fileuploader-file-info").appendTo(e.$file);e.$statusMessage=(0,r.default)("<div>").addClass("dx-fileuploader-file-status-message").appendTo(e.$file),(0,r.default)("<div>").addClass(j).text(t.name).appendTo(o),(0,v.isDefined)(t.size)&&(0,r.default)("<div>").addClass(K).text(this._getFileSize(t.size)).appendTo(o),e.isValid()?e.$statusMessage.text(this.option("readyToUploadMessage")):(e.isValidFileExtension||e.$statusMessage.append(this._createValidationElement("invalidFileExtensionMessage")),e.isValidMaxSize||e.$statusMessage.append(this._createValidationElement("invalidMaxFileSizeMessage")),e.isValidMinSize||e.$statusMessage.append(this._createValidationElement("invalidMinFileSizeMessage")),n.addClass("dx-fileuploader-invalid"))}},{key:"_createValidationElement",value:function(e){return(0,r.default)("<span>").text(this.option(e))}},{key:"_updateFileNameMaxWidth",value:function(){var e=this.option("allowCanceling")&&"useForm"!==this.option("uploadMode")?1:0,t="useButtons"===this.option("uploadMode")?1:0,n=this._$filesContainer.find(".dx-fileuploader-file-container").first().width()||this._$filesContainer.width(),o=this._$filesContainer.find(".dx-fileuploader-button-container").eq(0).width()*(e+t),r=this._$filesContainer.find(".dx-fileuploader-file-size").eq(0),l=r.text();r.text("1000 Mb");var d=r.width();r.text(l),this._$filesContainer.find(".dx-fileuploader-file-name").css("maxWidth",n-o-d)}},{key:"_renderFileButtons",value:function(e,t){var n=this._getCancelButton(e);n&&t.append(n);var o=this._getUploadButton(e);o&&t.append(o)}},{key:"_getCancelButton",value:function(e){var t=this;return"useForm"===this.option("uploadMode")?null:(e.cancelButton=this._createComponent((0,r.default)("<div>").addClass("dx-fileuploader-button dx-fileuploader-cancel-button"),F.default,{onClick:function(){return t._removeFile(e)},icon:"close",visible:this.option("allowCanceling"),disabled:this.option("readOnly"),integrationOptions:{}}),(0,r.default)("<div>").addClass(Q).append(e.cancelButton.$element()))}},{key:"_getUploadButton",value:function(e){var t=this;return e.isValid()&&"useButtons"===this.option("uploadMode")?(e.uploadButton=this._createComponent((0,r.default)("<div>").addClass("dx-fileuploader-button dx-fileuploader-upload-button"),F.default,{onClick:function(){return t._uploadFile(e)},icon:"upload"}),e.onLoadStart.add((function(){return e.uploadButton.$element().remove()})),(0,r.default)("<div>").addClass(Q).append(e.uploadButton.$element())):null}},{key:"_removeFile",value:function(e){e.$file.parent().remove(),this._files.splice((0,y.inArray)(e,this._files),1);var t=this.option("value").slice();t.splice((0,y.inArray)(e.value,t),1),this._preventRecreatingFiles=!0,this.option("value",t),this._preventRecreatingFiles=!1,this._toggleFileUploaderEmptyClassName(),this._doPreventInputChange=!0,this._$fileInput.val(""),this._doPreventInputChange=!1}},{key:"_toggleFileUploaderEmptyClassName",value:function(){this.$element().toggleClass("dx-fileuploader-empty",!this._files.length||this._hasInvalidFile(this._files))}},{key:"_hasInvalidFile",value:function(e){for(var i=0;i<e.length;i++)if(!e[i].isValid())return!0;return!1}},{key:"_getFileSize",value:function(e){for(var i=0,t=[M.default.format("dxFileUploader-bytes"),M.default.format("dxFileUploader-kb"),M.default.format("dxFileUploader-Mb"),M.default.format("dxFileUploader-Gb")],n=t.length-1;i<n&&e>=1024;)e/=1024,i++;return Math.round(e)+" "+t[i]}},{key:"_renderSelectButton",value:function(){var e=(0,r.default)("<div>").addClass(J).appendTo(this._$inputWrapper);this._selectButton=this._createComponent(e,F.default,{text:this.option("selectButtonText"),focusStateEnabled:!1,integrationOptions:{},disabled:this.option("readOnly")}),"desktop"===S.default.real().deviceType?this._selectButton.option("onClick",this._selectButtonClickHandler.bind(this)):(c.default.off(e,"click"),c.default.on(e,"click",this._selectButtonClickHandler.bind(this)))}},{key:"_selectButtonClickHandler",value:function(){if(!this.option("useNativeInputClick")){if(this.option("disabled")||this.option("readOnly"))return!1;this._isCustomClickEvent=!0,c.default.trigger(this._$fileInput,"click"),this._isCustomClickEvent=!1}}},{key:"_renderUploadButton",value:function(){if("useButtons"===this.option("uploadMode")){var e=(0,r.default)("<div>").addClass(J).addClass(X).appendTo(this._$content);this._uploadButton=this._createComponent(e,F.default,{text:this.option("uploadButtonText"),onClick:this._uploadButtonClickHandler.bind(this),type:this.option("_uploadButtonType"),integrationOptions:{}})}}},{key:"_uploadButtonClickHandler",value:function(){this._uploadFiles()}},{key:"_shouldDragOverBeRendered",value:function(){return!this.option("readOnly")&&("useForm"!==this.option("uploadMode")||this.option("nativeDropSupported"))}},{key:"_isInteractionDisabled",value:function(){return this.option("readOnly")||this.option("disabled")}},{key:"_renderInputContainer",value:function(){this._$inputContainer=(0,r.default)("<div>").addClass("dx-fileuploader-input-container").appendTo(this._$inputWrapper),this._$fileInput.addClass("dx-fileuploader-input"),this._renderInput();var e="dx-fileuploader-input-label-".concat(new l.default);this._$inputLabel.attr("id",e).addClass("dx-fileuploader-input-label").appendTo(this._$inputContainer),this.setAria("labelledby",e,this._$fileInput)}},{key:"_renderInput",value:function(){this.option("useNativeInputClick")?this._selectButton.option("template",this._selectButtonInputTemplate.bind(this)):(this._$fileInput.appendTo(this._$inputContainer),this._selectButton.option("template","content")),this._applyInputAttributes(this.option("inputAttr"))}},{key:"_selectButtonInputTemplate",value:function(data,content){var e=(0,r.default)(content),t=(0,r.default)("<span>").addClass("dx-button-text").text(data.text);return e.append(t).append(this._$fileInput),e}},{key:"_renderInputWrapper",value:function(){this._$inputWrapper=(0,r.default)("<div>").addClass("dx-fileuploader-input-wrapper").appendTo(this._$content)}},{key:"_renderDragEvents",value:function(){c.default.off(this._$inputWrapper,"."+this.NAME),this._shouldDragOverBeRendered()&&(this._dragEventsTargets=[],c.default.on(this._$inputWrapper,T.addNamespace("dragenter",this.NAME),this._dragEnterHandler.bind(this)),c.default.on(this._$inputWrapper,T.addNamespace("dragover",this.NAME),this._dragOverHandler.bind(this)),c.default.on(this._$inputWrapper,T.addNamespace("dragleave",this.NAME),this._dragLeaveHandler.bind(this)),c.default.on(this._$inputWrapper,T.addNamespace("drop",this.NAME),this._dropHandler.bind(this)))}},{key:"_applyInputAttributes",value:function(e){this._$fileInput.attr(e)}},{key:"_useInputForDrop",value:function(){return this.option("nativeDropSupported")&&"useForm"===this.option("uploadMode")}},{key:"_dragEnterHandler",value:function(e){if(this.option("disabled"))return!1;this._useInputForDrop()||e.preventDefault(),this._updateEventTargets(e),this.$element().addClass(R)}},{key:"_dragOverHandler",value:function(e){this._useInputForDrop()||e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="copy"}},{key:"_dragLeaveHandler",value:function(e){this._useInputForDrop()||e.preventDefault(),this._updateEventTargets(e),this._dragEventsTargets.length||this.$element().removeClass(R)}},{key:"_updateEventTargets",value:function(e){var t=this._dragEventsTargets.indexOf(e.target),n=-1!==t;"dragenter"===e.type?!n&&this._dragEventsTargets.push(e.target):n&&this._dragEventsTargets.splice(t,1)}},{key:"_dropHandler",value:function(e){if(this._dragEventsTargets=[],this.$element().removeClass(R),!this._useInputForDrop()){e.preventDefault();var t=e.originalEvent.dataTransfer.files,n=this._getFiles(t);!this.option("multiple")&&n.length>1||(this._changeValue(this._filterFiles(n)),"instantly"===this.option("uploadMode")&&this._uploadFiles())}}},{key:"_filterFiles",value:function(e){if(!e.length)return e;var t=this.option("accept");if(!t.length)return e;for(var n=[],o=this._getAllowedFileTypes(t),i=0,r=e.length;i<r;i++)this._isFileTypeAllowed(e[i],o)&&n.push(e[i]);return n}},{key:"_getAllowedFileTypes",value:function(e){return e.length?e.split(",").map((function(e){return e.trim()})):[]}},{key:"_isFileTypeAllowed",value:function(e,t){for(var i=0,n=t.length;i<n;i++){var o=t[i];if("."===o[0]){if(o=o.replace(".","\\."),e.name.match(new RegExp(o+"$","i")))return!0}else if(o=o.replace(new RegExp("\\*","g"),""),e.type.match(new RegExp(o,"i")))return!0}return!1}},{key:"_renderWrapper",value:function(){var e=(0,r.default)("<div>").addClass("dx-fileuploader-wrapper").appendTo(this.$element()),t=(0,r.default)("<div>").addClass("dx-fileuploader-container").appendTo(e);this._$content=(0,r.default)("<div>").addClass("dx-fileuploader-content").appendTo(t)}},{key:"_clean",value:function(){this._$fileInput.detach(),delete this._$filesContainer,this._files&&this._files.forEach((function(e){e.$file=null,e.$statusMessage=null})),U(W(n.prototype),"_clean",this).call(this)}},{key:"_uploadFiles",value:function(){var e=this;Y()&&(0,_.each)(this._files,(function(t,n){return e._uploadFile(n)}))}},{key:"_uploadFile",value:function(e){this._uploadStrategy.upload(e)}},{key:"_updateProgressBar",value:function(e,t){e.progressBar&&e.progressBar.option({value:t.loaded,showStatus:!0}),this._progressAction({file:e.value,segmentSize:t.currentSegmentSize,bytesLoaded:t.loaded,bytesTotal:t.total,event:t.event,request:e.request})}},{key:"_updateTotalProgress",value:function(e,t){var progress=e?this._getProgressValue(t/e):0;this.option("progress",progress),this._setLoadedSize(t)}},{key:"_getProgressValue",value:function(e){return Math.floor(100*e)}},{key:"_initStatusMessage",value:function(e){e.$statusMessage.css("display","none")}},{key:"_initCancelButton",value:function(e){var t=this;e.cancelButton.option("onClick",(function(){t._preventFilesUploading([e]),t._removeFile(e)}));var n=function(){setTimeout((function(){e.cancelButton.option({visible:!1})}),400)};e.onLoad.add(n),e.onError.add(n)}},{key:"_createProgressBar",value:function(e){var t=this;return this._createComponent((0,r.default)("<div>"),E.default,{value:void 0,min:0,max:e,statusFormat:function(e){return t._getProgressValue(e)+"%"},showStatus:!1,statusPosition:"right"})}},{key:"_getTotalFilesSize",value:function(){var e=this;return this._totalFilesSize||(this._totalFilesSize=0,(0,_.each)(this._files,(function(t,n){e._totalFilesSize+=n.value.size}))),this._totalFilesSize}},{key:"_getTotalLoadedFilesSize",value:function(){var e=this;return this._totalLoadedFilesSize||(this._totalLoadedFilesSize=0,(0,_.each)(this._files,(function(t,n){e._totalLoadedFilesSize+=n.loadedSize}))),this._totalLoadedFilesSize}},{key:"_setLoadedSize",value:function(e){this._totalLoadedFilesSize=e}},{key:"_recalculateProgress",value:function(){this._totalFilesSize=0,this._totalLoadedFilesSize=0,this._updateTotalProgress(this._getTotalFilesSize(),this._getTotalLoadedFilesSize())}},{key:"_getValidationMessageTarget",value:function(){return this._$inputWrapper}},{key:"_updateReadOnlyState",value:function(){var e=this.option("readOnly");this._selectButton.option("disabled",e),this._files.forEach((function(t){var n;return null===(n=t.cancelButton)||void 0===n?void 0:n.option("disabled",e)})),this._updateInputLabelText(),this._renderDragEvents()}},{key:"_optionChanged",value:function(e){var t=e.name,o=e.value;switch(t){case"height":case"width":this._updateFileNameMaxWidth(),U(W(n.prototype),"_optionChanged",this).call(this,e);break;case"value":!o.length&&this._$fileInput.val(""),this._preventRecreatingFiles||(this._createFiles(),this._renderFiles()),this._recalculateProgress(),U(W(n.prototype),"_optionChanged",this).call(this,e);break;case"name":this._initFileInput(),U(W(n.prototype),"_optionChanged",this).call(this,e);break;case"accept":this._initFileInput();break;case"multiple":this._initFileInput(),e.value||this.reset();break;case"readOnly":this._updateReadOnlyState(),U(W(n.prototype),"_optionChanged",this).call(this,e);break;case"selectButtonText":this._selectButton.option("text",o);break;case"uploadButtonText":this._uploadButton&&this._uploadButton.option("text",o);break;case"_uploadButtonType":this._uploadButton&&this._uploadButton.option("type",o);break;case"maxFileSize":case"minFileSize":case"allowedFileExtensions":case"invalidFileExtensionMessage":case"invalidMaxFileSizeMessage":case"invalidMinFileSizeMessage":case"readyToUploadMessage":case"uploadedMessage":case"uploadFailedMessage":this._invalidate();break;case"labelText":this._updateInputLabelText();break;case"showFileList":this._preventRecreatingFiles||this._renderFiles();break;case"uploadFile":case"uploadChunk":case"chunkSize":this._setUploadStrategy();break;case"abortUpload":case"uploadUrl":case"progress":case"uploadMethod":case"uploadHeaders":case"extendSelection":break;case"allowCanceling":case"uploadMode":this.reset(),this._invalidate();break;case"onUploadStarted":this._createUploadStartedAction();break;case"onUploaded":this._createUploadedAction();break;case"onProgress":this._createProgressAction();break;case"onUploadError":this._createUploadErrorAction();break;case"onUploadAborted":this._createUploadAbortedAction();break;case"useNativeInputClick":this._renderInput();break;case"useDragOver":this._renderDragEvents();break;case"nativeDropSupported":this._invalidate();break;case"inputAttr":this._applyInputAttributes(this.option(t));break;default:U(W(n.prototype),"_optionChanged",this).call(this,e)}}},{key:"reset",value:function(){this.option("value",[])}}]),n}(C.default),ee=function(){function e(t,n){D(this,e),this.file=t,this.chunkSize=n,this.index=0}return z(e,[{key:"read",value:function(){if(!this.file)return null;var e=this.createBlobResult(this.file,this.index,this.chunkSize);return e.isCompleted&&(this.file=null),this.index++,e}},{key:"createBlobResult",value:function(e,t,n){var o=t*n;return{blob:this.sliceFile(e,o,n),index:t,isCompleted:o+n>=e.size}}},{key:"sliceFile",value:function(e,t,n){return e.slice?e.slice(t,t+n):e.webkitSlice?e.webkitSlice(t,t+n):null}}]),e}(),te=function(){function e(t){D(this,e),this.fileUploader=t}return z(e,[{key:"upload",value:function(e){e.isValid()&&!e.uploadStarted&&(this._prepareFileBeforeUpload(e),this._uploadCore(e))}},{key:"abortUpload",value:function(e){var t=this;if(!(e._isError||e._isLoaded||e.isAborted)&&e.uploadStarted&&(e.request&&e.request.abort(),e.isAborted=!0,this._isCustomAbortUpload())){var n=this.fileUploader.option("abortUpload"),o=this._createAbortUploadArgument(e),r=null;try{var l=n(e.value,o);r=(0,x.fromPromise)(l)}catch(e){r=(new x.Deferred).reject(e).promise()}r.done((function(){return e.onAbort.fire()})).fail((function(n){return t._handleFileError(e,n)}))}}},{key:"_createAbortUploadArgument",value:function(e){}},{key:"_uploadCore",value:function(e){}},{key:"_isCustomAbortUpload",value:function(){var e=this.fileUploader.option("abortUpload");return e&&(0,v.isFunction)(e)}},{key:"_handleFileError",value:function(e,t){e._isError=!0,e.onError.fire(t)}},{key:"_prepareFileBeforeUpload",value:function(e){e.$file&&this.fileUploader._createFileProgressBar(e),e.onLoadStart.add(this._onUploadStarted.bind(this,e)),e.onLoad.add(this._onLoadedHandler.bind(this,e)),e.onError.add(this._onErrorHandler.bind(this,e)),e.onAbort.add(this._onAbortHandler.bind(this,e)),e.onProgress.add(this._onProgressHandler.bind(this,e))}},{key:"_isStatusError",value:function(e){return 400<=e&&e<500||500<=e&&e<600}},{key:"_onUploadStarted",value:function(e,t){e.uploadStarted=!0,this.fileUploader._uploadStartedAction({file:e.value,event:t,request:e.request})}},{key:"_onAbortHandler",value:function(e,t){this.fileUploader._uploadAbortedAction({file:e.value,event:t,request:e.request})}},{key:"_onErrorHandler",value:function(e,t){this.fileUploader._setStatusMessage(e,"uploadFailedMessage"),this.fileUploader._uploadErrorAction({file:e.value,event:void 0,request:e.request,error:t})}},{key:"_onLoadedHandler",value:function(e,t){e._isLoaded=!0,this.fileUploader._setStatusMessage(e,"uploadedMessage"),this.fileUploader._uploadedAction({file:e.value,event:t,request:e.request})}},{key:"_onProgressHandler",value:function(e,t){if(e){var n=this.fileUploader._getTotalFilesSize(),o=this.fileUploader._getTotalLoadedFilesSize(),r=Math.min(t.loaded,e.value.size),l=r-e.loadedSize;e.loadedSize=r,this.fileUploader._updateTotalProgress(n,o+l),this.fileUploader._updateProgressBar(e,this._getLoadedData(r,t.total,l,t))}}},{key:"_getLoadedData",value:function(e,t,n,o){return{loaded:e,total:t,currentSegmentSize:n}}}]),e}(),ie=function(e){$(n,e);var t=P(n);function n(e){var o;return D(this,n),(o=t.call(this,e)).chunkSize=o.fileUploader.option("chunkSize"),o}return z(n,[{key:"_uploadCore",value:function(e){var t=e.value,n={name:t.name,loadedBytes:0,type:t.type,blobReader:new ee(t,this.chunkSize),guid:new l.default,fileSize:t.size,count:Math.ceil(t.size/this.chunkSize),customData:{}};e.chunksData=n,this._sendChunk(e,n)}},{key:"_sendChunk",value:function(e,t){var n=this,o=t.blobReader.read();t.currentChunk=o,o&&this._sendChunkCore(e,t,o).done((function(){e.isAborted||(t.loadedBytes+=o.blob.size,e.onProgress.fire({loaded:t.loadedBytes,total:e.value.size}),o.isCompleted&&e.onLoad.fire(),setTimeout((function(){return n._sendChunk(e,t)})))})).fail((function(t){n._shouldHandleError(t)&&n._handleFileError(e,t)}))}},{key:"_sendChunkCore",value:function(e,t,n){}},{key:"_shouldHandleError",value:function(e){}},{key:"_tryRaiseStartLoad",value:function(e){e.isStartLoad||(e.isStartLoad=!0,e.onLoadStart.fire())}},{key:"_getEvent",value:function(e){return null}}]),n}(te),ne=function(e){$(n,e);var t=P(n);function n(){return D(this,n),t.apply(this,arguments)}return z(n,[{key:"_sendChunkCore",value:function(e,t,n){var o=this;return k.default.sendRequest({url:this.fileUploader.option("uploadUrl"),method:this.fileUploader.option("uploadMethod"),headers:this.fileUploader.option("uploadHeaders"),beforeSend:function(t){e.request=t},upload:{onloadstart:function(){return o._tryRaiseStartLoad(e)},onabort:function(){return e.onAbort.fire()}},data:this._createFormData({fileName:t.name,blobName:this.fileUploader.option("name"),blob:n.blob,index:n.index,count:t.count,type:t.type,guid:t.guid,size:t.fileSize})})}},{key:"_shouldHandleError",value:function(e){return this._isStatusError(e.status)}},{key:"_createFormData",value:function(e){var t=new G.FormData;return t.append(e.blobName,e.blob),t.append("chunkMetadata",JSON.stringify({FileName:e.fileName,Index:e.index,TotalCount:e.count,FileSize:e.size,FileType:e.type,FileGuid:e.guid})),t}}]),n}(ie),ae=function(e){$(n,e);var t=P(n);function n(){return D(this,n),t.apply(this,arguments)}return z(n,[{key:"_sendChunkCore",value:function(e,t){this._tryRaiseStartLoad(e);var n=this._createChunksInfo(t),o=this.fileUploader.option("uploadChunk");try{var r=o(e.value,n);return(0,x.fromPromise)(r)}catch(e){return(new x.Deferred).reject(e).promise()}}},{key:"_createAbortUploadArgument",value:function(e){return this._createChunksInfo(e.chunksData)}},{key:"_shouldHandleError",value:function(e){return!0}},{key:"_createChunksInfo",value:function(e){return{bytesUploaded:e.loadedBytes,chunkCount:e.count,customData:e.customData,chunkBlob:e.currentChunk.blob,chunkIndex:e.currentChunk.index}}}]),n}(ie),oe=function(e){$(n,e);var t=P(n);function n(){return D(this,n),t.apply(this,arguments)}return z(n,[{key:"_uploadCore",value:function(e){var t=this;e.loadedSize=0,this._uploadFile(e).done((function(){e.isAborted||e.onLoad.fire()})).fail((function(n){t._shouldHandleError(e,n)&&t._handleFileError(e,n)}))}},{key:"_uploadFile",value:function(e){}},{key:"_shouldHandleError",value:function(e,t){}},{key:"_handleProgress",value:function(e,t){e._isError||(e._isProgressStarted=!0,e.onProgress.fire(t))}},{key:"_getLoadedData",value:function(e,t,o,r){var l=U(W(n.prototype),"_getLoadedData",this).call(this,e,t,o,r);return l.event=r,l}}]),n}(te),re=function(e){$(n,e);var t=P(n);function n(){return D(this,n),t.apply(this,arguments)}return z(n,[{key:"_uploadFile",value:function(e){var t=this;return k.default.sendRequest({url:this.fileUploader.option("uploadUrl"),method:this.fileUploader.option("uploadMethod"),headers:this.fileUploader.option("uploadHeaders"),beforeSend:function(t){e.request=t},upload:{onprogress:function(n){return t._handleProgress(e,n)},onloadstart:function(){return e.onLoadStart.fire()},onabort:function(){return e.onAbort.fire()}},data:this._createFormData(this.fileUploader.option("name"),e.value)})}},{key:"_shouldHandleError",value:function(e,t){return this._isStatusError(t.status)||!e._isProgressStarted}},{key:"_createFormData",value:function(e,t){var n=new G.FormData;return n.append(e,t,t.name),n}}]),n}(oe),le=function(e){$(n,e);var t=P(n);function n(){return D(this,n),t.apply(this,arguments)}return z(n,[{key:"_uploadFile",value:function(e){var t=this;e.onLoadStart.fire();var n=this.fileUploader.option("uploadFile");try{var o=n(e.value,(function(n){var o={loaded:n,total:e.size};t._handleProgress(e,o)}));return(0,x.fromPromise)(o)}catch(e){return(new x.Deferred).reject(e).promise()}}},{key:"_shouldHandleError",value:function(e,t){return!0}}]),n}(oe);(0,f.default)("dxFileUploader",Z),e.exports=Z,e.exports.default=e.exports},435:function(e,t,n){"use strict";var o=n(19),r=n(152),l=n(2),d=n(70),c=C(n(56)),f=C(n(342)),h=C(n(727)),v=n(1),_=C(n(101)),m=C(n(1795)),y=C(n(30)),x=n(214),k=C(n(1796));function C(e){return e&&e.__esModule?e:{default:e}}var F="string",E="icon-none",O="and",S={number:["=","<>","<",">","<=",">=","isblank","isnotblank"],string:["contains","notcontains","startswith","endswith","=","<>","isblank","isnotblank"],date:["=","<>","<",">","<=",">=","isblank","isnotblank"],datetime:["=","<>","<",">","<=",">=","isblank","isnotblank"],boolean:["=","<>","isblank","isnotblank"],object:["isblank","isnotblank"]},T={date:"shortDate",datetime:"shortDateShortTime"},B=["=","<>","isblank","isnotblank"],M=["caption","customizeText","dataField","dataType","editorTemplate","falseText","editorOptions","filterOperations","format","lookup","trueText","calculateFilterExpression","name"];function A(e){return e&&e.length>1&&"!"===e[0]&&!W(e)}function V(e){return A(e)?e[1]:e}function w(e){if(W(e))return O;for(var t="",i=0;i<e.length;i++){var n=e[i];if(!Array.isArray(n)){if(t&&t!==n)throw new r.errors.Error("E4019");"!"!==n&&(t=n)}}return t}function D(e){var t=V(e),n=w(t);return n||(n=O),t!==e&&(n="!"+n),n}function I(e){var t,n=(t=e.filterOperations,Array.isArray(t)&&t.length?e.filterOperations:function(e){return e.lookup&&B||S[e.dataType||F]}(e));return(0,v.extend)([],n)}function z(e,t){var n=k.default.getNameByFilterOperation(e);return t&&t[n]?t[n]:n}function U(e,t){var n=e.filter((function(e){return e.name===t}));return n.length?n[0]:null}function $(e){return e.defaultFilterOperation||I(e)[0]}function L(e,t){var n=V(e),o=n.indexOf(t);return n.splice(o,1),1!==n.length&&n.splice(o,1),e}function P(e,t){for(var i=0;i<t.length;i++){if(t[i].name===e)return t[i];if(t[i].dataField.toLowerCase()===e.toLowerCase())return t[i]}var n=ee(t,!0).filter((function(t){return t.dataField.toLowerCase()===e.toLowerCase()}));if(n.length>0)return n[0];throw new c.default.Error("E1047",e)}function H(e){return!!Array.isArray(e)&&(e.length<2||Array.isArray(e[0])||Array.isArray(e[1]))}function W(e){return!!Array.isArray(e)&&(e.length>1&&!Array.isArray(e[0])&&!Array.isArray(e[1]))}function G(e,t){for(var n=w(e).toLowerCase()||O,o=[],i=0;i<e.length;i++)H(e[i])?(o.push(N(e[i],t)),o.push(n)):W(e[i])&&(o.push(R(e[i],t)),o.push(n));return 0===o.length&&o.push(n),o}function R(e,t){return function(e,t){var n=U(t,e[1]);return n&&n.name===e[1]}(e,t)||e.length<3&&(e[2]=e[1],e[1]="="),e}function N(e,t){return e?W(e=(0,v.extend)(!0,[],e))?[R(e,t),O]:A(e)?["!",W(e[1])?[R(e[1],t),O]:A(e[1])?[N(e[1],t),O]:G(e[1],t)]:G(e,t):[O]}function j(e,t,n,o){var r=P(e[0],t),l=R(e,n),d=n.length&&U(n,l[1]);return d&&d.calculateFilterExpression?d.calculateFilterExpression.apply(d,[l[2],r,t]):r.createFilterExpression?r.createFilterExpression.apply(r,[l[2],l[1],o]):r.calculateFilterExpression?r.calculateFilterExpression.apply(r,[l[2],l[1],o]):r.defaultCalculateFilterExpression.apply(r,[l[2],l[1],o])}function K(e,t,n,o){var r;return r=!0===t?e.trueText||y.default.format("dxDataGrid-trueText"):!1===t?e.falseText||y.default.format("dxDataGrid-falseText"):function(e,t){var n=e.format||T[e.dataType];return h.default.format(t,n)}(e,t),e.customizeText&&(r=e.customizeText.call(e,{value:t,valueText:r,target:o})),n&&n.customizeText&&(r=n.customizeText.call(n,{value:t,valueText:r,field:e,target:o})),r}function J(e,t,n,o){return t.map((function(t){return K(e,t,n,o)}))}function Q(e){return""===e||null===e}function X(e,t){return e.some((function(e){return e.dataField===t}))}function Y(e,t,n){var o=n.dataField;te(o)&&(n.parentId=ie(o),X(t,n.parentId)||X(e,n.parentId)||Y(e,t,{id:n.parentId,dataType:"object",dataField:n.parentId,caption:Z(n.parentId,!0),filterOperations:["isblank","isnotblank"]})),t.push(n)}function Z(e,t){var caption="";if(t)e=e.substring(e.lastIndexOf(".")+1);else if(te(e))return e.split(".").forEach((function(e,t,n){caption+=_.default.captionize(e),t!==n.length-1&&(caption+=".")})),caption;return _.default.captionize(e)}function ee(e,t){for(var n=[],i=0;i<e.length;i++){var o=(0,v.extend)(!0,{caption:Z(e[i].dataField,t)},e[i]);o.id=o.name||o.dataField,t?Y(e,n,o):n.push(o)}return n}function te(e){return-1!==e.lastIndexOf(".")}function ie(e){return e.substring(0,e.lastIndexOf("."))}function ne(e,t,n){var o=U(n,t);return o?(!1===o.hasValue?(e[1]=t,e.length=2):(e[1]=t,e[2]=""),e):("isblank"===t?(e[1]="=",e[2]=null):"isnotblank"===t?(e[1]="<>",e[2]=null):(((o=U(n,e[1]))||2===e.length||null===e[2])&&(e[2]=""),e[1]=t),e)}function ae(e){return""!==e[2]}function oe(filter,e){return filter[0]===e}function re(filter,e,t){var n=[];return filter.forEach((function(o){W(o)?oe(o,e[0])?t?(n.push(e),t=!1):n.splice(n.length-1,1):n.push(o):(n.length||H(o))&&n.push(o)})),0===n.length?null:(t&&(n.push(O),n.push(e)),1===n.length?n[0]:n)}t.isValidCondition=ae,t.isEmptyGroup=function(e){var t=V(e);return!W(t)&&!t.some((function(e){return W(e)}))},t.getOperationFromAvailable=function(e,t){for(var i=0;i<t.length;i++)if(t[i].value===e)return t[i];throw new c.default.Error("E1048",e)},t.updateConditionByOperation=ne,t.getCaptionWithParents=function e(t,n){if(te(t.dataField))for(var o=ie(t.dataField),i=0;i<n.length;i++)if(n[i].dataField===o)return e(n[i],n)+"."+t.caption;return t.caption},t.getItems=ee,t.setGroupValue=function(e,t){var i;return function(e,t){!function(e){return-1!==e.indexOf("!")}(t)?A(e)&&function(e){var t=V(e);e.length=0,[].push.apply(e,t)}(e):A(e)||function(e){var t=e.slice(0);e.length=0,e.push("!",t)}(e)}(e,t),function(e,t){for(i=0;i<e.length;i++)Array.isArray(e[i])||(e[i]=t)}(V(e),t=function(e){return-1===e.indexOf("!")?e:e.substring(1)}(t)),e},t.getGroupMenuItem=function(e,t){var n=D(e);return t.filter((function(e){return e.value===n}))[0]},t.getGroupValue=D,t.getAvailableOperations=function(e,t,n){var o=I(e),r=!!e.lookup;return n.forEach((function(t){if(!e.filterOperations&&-1===o.indexOf(t.name)){var n=t&&t.dataTypes;!(!!r&&!!t.notForLookup)&&n&&n.indexOf(e.dataType||F)>=0&&o.push(t.name)}})),o.map((function(e){var o=U(n,e);return o?{icon:o.icon||E,text:o.caption||_.default.captionize(o.name),value:o.name,isCustom:!0}:{icon:k.default.getIconByFilterOperation(e)||E,text:z(e,t),value:e}}))},t.removeItem=L,t.createCondition=function(e,t){var n=[e.dataField,"",""];return ne(n,$(e),t),n},t.createEmptyGroup=function(e){return-1!==e.indexOf("not")?["!",[e.substring(3).toLowerCase()]]:[e]},t.addItem=function(e,t){var n=V(t),o=D(n);return 1===n.length?n.unshift(e):n.push(e,o),t},t.getField=P,t.isGroup=H,t.isCondition=W,t.getNormalizedFields=function(e){return e.reduce((function(e,t){if((0,l.isDefined)(t.dataField)){var n={};for(var o in t)t[o]&&M.indexOf(o)>-1&&(n[o]=t[o]);n.defaultCalculateFilterExpression=f.default.defaultCalculateFilterExpression,(0,l.isDefined)(n.dataType)||(n.dataType=F),(0,l.isDefined)(n.trueText)||(n.trueText=y.default.format("dxDataGrid-trueText")),(0,l.isDefined)(n.falseText)||(n.falseText=y.default.format("dxDataGrid-falseText")),e.push(n)}return e}),[])},t.getNormalizedFilter=function e(t){var i,n=V(t);if(0===n.length)return null;var o=[];for(i=0;i<n.length;i++)if(H(n[i])){var r=e(n[i]);r?n[i]=r:o.push(n[i])}else W(n[i])&&(ae(n[i])||o.push(n[i]));for(i=0;i<o.length;i++)L(n,o[i]);return 1===n.length?null:(n.splice(n.length-1,1),1===n.length&&(t=function(e,t){return A(e)?e[1]=t:e=t,e}(t,n[0])),0===t.length?null:t)},t.getGroupCriteria=V,t.convertToInnerStructure=N,t.getDefaultOperation=$,t.getCurrentValueText=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"filterBuilder";if(Q(t))return"";if(Array.isArray(t)){var l=new o.Deferred;return o.when.apply(this,J(e,t,n,r)).done((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var text=t.some((function(e){return!Q(e)}))?t.map((function(e){return Q(e)?"?":e})):"";l.resolve(text)})),l}return K(e,t,n,r)},t.getCurrentLookupValueText=function(e,t,n){if(""!==t){var o=e.lookup;if(o.items)n(o.calculateCellValue(t)||"");else{var r=(0,l.isFunction)(o.dataSource)?o.dataSource({}):o.dataSource;new x.DataSource(r).loadSingle(o.valueExpr,t).done((function(r){var l="";r&&(l=o.displayExpr?(0,d.compileGetter)(o.displayExpr)(r):r),e.customizeText&&(l=e.customizeText({value:t,valueText:l})),n(l)})).fail((function(){n("")}))}}else n("")},t.getFilterOperations=I,t.getCaptionByOperation=z,t.getOperationValue=function(e){return null===e[2]?"="===e[1]?"isblank":"isnotblank":e[1]},t.getFilterExpression=function e(t,n,o,r){if(!(0,l.isDefined)(t))return null;if(A(t))return["!",e(t[1],n,o,r)];var d=V(t);if(W(d))return j(d,n,o,r)||null;for(var c,f=[],h=D(d),i=0;i<d.length;i++)H(d[i])?(c=e(d[i],n,o,r))&&(i&&f.push(h),f.push(c)):W(d[i])&&(c=j(d[i],n,o,r))&&(f.length&&f.push(h),f.push(c));return 1===f.length&&(f=f[0]),f.length?f:null},t.getCustomOperation=U,t.getMergedOperations=function(e,t,n){var o=(0,v.extend)(!0,[],e),r=-1;return o.some((function(e,t){if("between"===e.name)return r=t,!0})),-1!==r?o[r]=(0,v.extend)(m.default.getConfig(t,n),o[r]):o.unshift(m.default.getConfig(t,n)),o},t.syncFilters=function(filter,e){return null===filter||0===filter.length?e:W(filter)?oe(filter,e[0])?e:[filter,O,e]:D(filter)!==O?[e,"and",filter]:re(filter,e,!0)},t.getMatchedConditions=function(filter,e){return null===filter||0===filter.length?[]:W(filter)?oe(filter,e)?[filter]:[]:D(filter)!==O?[]:filter.filter((function(t){return W(t)&&oe(t,e)}))},t.filterHasField=function e(filter,t){return null!==filter&&0!==filter.length&&(W(filter)?filter[0]===t:filter.some((function(n){return(W(n)||H(n))&&e(n,t)})))},t.removeFieldConditionsFromFilter=function(filter,e){return filter&&0!==filter.length?W(filter)?oe(filter,e)?null:filter:re(filter,[e],!1):null}}}]);