(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{1635:function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=T(n(0)),l=T(n(14)),d=T(n(6)),c=n(34),h=T(n(27)),m=n(2),_=n(19),f=n(1),I=n(35),y=T(n(10)),v=T(n(284)),x=T(n(103)),C=T(n(98)),S=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=M();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var desc=r?Object.getOwnPropertyDescriptor(e,l):null;desc&&(desc.get||desc.set)?Object.defineProperty(n,l,desc):n[l]=e[l]}n.default=e,t&&t.set(e,n);return n}(n(21)),E=T(n(68)),B=T(n(361)),w=T(n(290)),D=T(n(148)),O=T(n(30)),k=T(n(291)),A=n(70),K=T(n(58)),F=T(n(1641)),P=n(184);function M(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return M=function(){return e},e}function T(e){return e&&e.__esModule?e:{default:e}}var V="dx-item",H="-content",R="dx-item-content-placeholder",N="dx-template-wrapper",W=/^([^.]+\[\d+\]\.)+([\w.]+)$/,z="up",L="down",$="left",G="right",j="last",J="first",U=C.default.inherit({_activeStateUnit:"."+V,_supportedKeys:function(){var e=function(e){var t=(0,r.default)(this.option("focusedElement"));t.length&&this._itemClickHandler((0,f.extend)({},e,{target:t.get(0),currentTarget:t.get(0)}))},t=function(e,t){S.isCommandKeyPressed(t)||(t.preventDefault(),t.stopPropagation(),this._moveFocus(e,t))};return(0,f.extend)(this.callBase(),{space:function(t){t.preventDefault(),e.call(this,t)},enter:e,leftArrow:t.bind(this,$),rightArrow:t.bind(this,G),upArrow:t.bind(this,z),downArrow:t.bind(this,L),pageUp:t.bind(this,z),pageDown:t.bind(this,L),home:t.bind(this,J),end:t.bind(this,j)})},_getDefaultOptions:function(){return(0,f.extend)(this.callBase(),{selectOnFocus:!1,loopItemFocus:!0,items:[],itemTemplate:"item",onItemRendered:null,onItemClick:null,onItemHold:null,itemHoldTimeout:750,onItemContextMenu:null,onFocusedItemChanged:null,noDataText:O.default.format("dxCollectionWidget-noDataText"),dataSource:null,_itemAttributes:{},itemTemplateProperty:"template",focusOnSelectedItem:!0,focusedElement:null,displayExpr:void 0,disabledExpr:function(data){return data?data.disabled:void 0},visibleExpr:function(data){return data?data.visible:void 0}})},_init:function(){this._compileDisplayGetter(),this.callBase(),this._cleanRenderedItems(),this._refreshDataSource()},_compileDisplayGetter:function(){var e=this.option("displayExpr");this._displayGetter=e?(0,A.compileGetter)(this.option("displayExpr")):void 0},_initTemplates:function(){this._initItemsFromMarkup(),this._initDefaultItemTemplate(),this.callBase()},_getAnonymousTemplateName:function(){return"item"},_initDefaultItemTemplate:function(){var e=this._getFieldsMap();this._templateManager.addDefaultTemplates({item:new P.BindableTemplate(function(t,data){(0,m.isPlainObject)(data)?this._prepareDefaultItemTemplate(data,t):(e&&(0,m.isFunction)(e.text)&&(data=e.text(data)),t.text(String(d.default.ensureDefined(data,""))))}.bind(this),this._getBindableFields(),this.option("integrationOptions.watchMethod"),e)})},_getBindableFields:function(){return["text","html"]},_getFieldsMap:function(){if(this._displayGetter)return{text:this._displayGetter}},_prepareDefaultItemTemplate:function(data,e){(0,m.isDefined)(data.text)&&e.text(data.text),(0,m.isDefined)(data.html)&&e.html(data.html)},_initItemsFromMarkup:function(){var e=this,t=this.$element().contents().filter("[data-options*='dxItem']");if(t.length&&!this.option("items").length){var n=[].slice.call(t).map((function(t){var n=(0,r.default)(t),o=(0,c.getElementOptions)(t).dxItem;return n.html().trim()&&!o.template?o.template=e._prepareItemTemplate(n):n.remove(),o}));this.option("items",n)}},_prepareItemTemplate:function(e){var t="tmpl-"+new x.default,n=e.detach().clone().removeAttr("data-options").addClass(N);return this._saveTemplate(t,n),t},_dataSourceOptions:function(){return{paginate:!1}},_cleanRenderedItems:function(){this._renderedItemsCount=0},_focusTarget:function(){return this.$element()},_focusInHandler:function(e){if(this.callBase.apply(this,arguments),-1!==(0,I.inArray)(e.target,this._focusTarget())){var t=(0,r.default)(this.option("focusedElement"));if(t.length)this._setFocusedItem(t);else{var n=this._getActiveItem();n.length&&this.option("focusedElement",(0,c.getPublicElement)(n))}}},_focusOutHandler:function(){this.callBase.apply(this,arguments);var e=(0,r.default)(this.option("focusedElement"));this._updateFocusedItemState(e,!1)},_getActiveItem:function(e){var t=(0,r.default)(this.option("focusedElement"));if(t.length)return t;var n=this.option("focusOnSelectedItem")?this.option("selectedIndex"):0,o=this._getActiveElement(),l=o.length-1;return n<0&&(n=e?l:0),o.eq(n)},_moveFocus:function(e){var t,n=this._getAvailableItems();switch(e){case"pageup":case z:t=this._prevItem(n);break;case"pagedown":case L:t=this._nextItem(n);break;case G:t=this.option("rtlEnabled")?this._prevItem(n):this._nextItem(n);break;case $:t=this.option("rtlEnabled")?this._nextItem(n):this._prevItem(n);break;case J:t=n.first();break;case j:t=n.last();break;default:return!1}0!==t.length&&this.option("focusedElement",(0,c.getPublicElement)(t))},_getVisibleItems:function(e){return(e=e||this._itemElements()).filter(":visible")},_getAvailableItems:function(e){return this._getVisibleItems(e).not(".dx-state-disabled")},_prevItem:function(e){var t=this._getActiveItem(),n=e.index(t),o=e.last(),l=(0,r.default)(e[n-1]),d=this.option("loopItemFocus");return 0===l.length&&d&&(l=o),l},_nextItem:function(e){var t=this._getActiveItem(!0),n=e.index(t),o=e.first(),l=(0,r.default)(e[n+1]),d=this.option("loopItemFocus");return 0===l.length&&d&&(l=o),l},_selectFocusedItem:function(e){this.selectItem(e)},_updateFocusedItemState:function(e,t,n){var o=(0,r.default)(e);o.length&&(this._refreshActiveDescendant(),this._refreshItemId(o,n),this._toggleFocusClass(t,o)),this._updateParentActiveDescendant()},_refreshActiveDescendant:function(e){this.setAria("activedescendant",(0,m.isDefined)(this.option("focusedElement"))?this.getFocusedItemId():null,e)},_refreshItemId:function(e,t){!t&&this.option("focusedElement")?this.setAria("id",this.getFocusedItemId(),e):this.setAria("id",null,e)},_setFocusedItem:function(e){e&&e.length&&(this._updateFocusedItemState(e,!0),this.onFocusedItemChanged(this.getFocusedItemId()),this.option("selectOnFocus")&&this._selectFocusedItem(e))},_findItemElementByItem:function(e){var t=(0,r.default)(),n=this;return this.itemElements().each((function(){var o=(0,r.default)(this);if(o.data(n._itemDataKey())===e)return t=o,!1})),t},_getIndexByItem:function(e){return this.option("items").indexOf(e)},_itemOptionChanged:function(e,t,n,o){var r=this._findItemElementByItem(e);r.length&&(this.constructor.ItemClass.getInstance(r).setDataField(t,n)||this._refreshItem(r,e),"disabled"===t&&n&&this._resetItemFocus(r))},_resetItemFocus:function(e){e.is(this.option("focusedElement"))&&this.option("focusedElement",null)},_refreshItem:function(e){var t=this._getItemData(e),n=e.data(this._itemIndexKey());this._renderItem(this._renderedItemsCount+n,t,null,e)},_updateParentActiveDescendant:d.default.noop,_optionChanged:function(e){if("items"===e.name){var t=e.fullName.match(W);if(t&&t.length){var n=t[t.length-1],o=e.fullName.replace("."+n,""),l=this.option(o);return void this._itemOptionChanged(l,n,e.value,e.previousValue)}}switch(e.name){case"items":case"_itemAttributes":case"itemTemplateProperty":case"showItemDataTitle":this._cleanRenderedItems(),this._invalidate();break;case"dataSource":this._refreshDataSource(),this._renderEmptyMessage();break;case"noDataText":this._renderEmptyMessage();break;case"itemTemplate":this._invalidate();break;case"onItemRendered":this._createItemRenderAction();break;case"onItemClick":break;case"onItemHold":case"itemHoldTimeout":this._attachHoldEvent();break;case"onItemContextMenu":this._attachContextMenuEvent();break;case"onFocusedItemChanged":this.onFocusedItemChanged=this._createActionByOption("onFocusedItemChanged");break;case"selectOnFocus":case"loopItemFocus":case"focusOnSelectedItem":break;case"focusedElement":this._updateFocusedItemState(e.previousValue,!1,!0),this._setFocusedItem((0,r.default)(e.value));break;case"displayExpr":this._compileDisplayGetter(),this._initDefaultItemTemplate(),this._invalidate();break;case"visibleExpr":case"disabledExpr":this._invalidate();break;default:this.callBase(e)}},_invalidate:function(){return this.option("focusedElement",null),this.callBase.apply(this,arguments)},_loadNextPage:function(){var e=this._dataSource;return this._expectNextPageLoading(),e.pageIndex(1+e.pageIndex()),e.load()},_expectNextPageLoading:function(){this._startIndexForAppendedItems=0},_expectLastItemLoading:function(){this._startIndexForAppendedItems=-1},_forgetNextPageLoading:function(){this._startIndexForAppendedItems=null},_dataSourceChangedHandler:function(e){var t=this.option("items");this._initialized&&t&&this._shouldAppendItems()?(this._renderedItemsCount=t.length,this._isLastPage()&&-1===this._startIndexForAppendedItems||(this.option().items=t.concat(e.slice(this._startIndexForAppendedItems))),this._forgetNextPageLoading(),this._refreshContent()):this.option("items",e.slice())},_refreshContent:function(){this._prepareContent(),this._renderContent()},_dataSourceLoadErrorHandler:function(){this._forgetNextPageLoading(),this.option("items",this.option("items"))},_shouldAppendItems:function(){return null!=this._startIndexForAppendedItems&&this._allowDynamicItemsAppend()},_allowDynamicItemsAppend:function(){return!1},_clean:function(){this._cleanFocusState(),this._cleanItemContainer()},_cleanItemContainer:function(){(0,r.default)(this._itemContainer()).empty()},_dispose:function(){this.callBase(),clearTimeout(this._itemFocusTimeout)},_refresh:function(){this._cleanRenderedItems(),this.callBase.apply(this,arguments)},_itemContainer:function(){return this.$element()},_itemClass:function(){return V},_itemContentClass:function(){return this._itemClass()+H},_selectedItemClass:function(){return"dx-item-selected"},_itemResponseWaitClass:function(){return"dx-item-response-wait"},_itemSelector:function(){return"."+this._itemClass()},_itemDataKey:function(){return"dxItemData"},_itemIndexKey:function(){return"dxItemIndex"},_itemElements:function(){return this._itemContainer().find(this._itemSelector())},_initMarkup:function(){this.callBase(),this.onFocusedItemChanged=this._createActionByOption("onFocusedItemChanged"),this.$element().addClass("dx-collection"),this._prepareContent()},_prepareContent:d.default.deferRenderer((function(){this._renderContentImpl()})),_renderContent:function(){this._fireContentReadyAction()},_render:function(){this.callBase(),this._attachClickEvent(),this._attachHoldEvent(),this._attachContextMenuEvent()},_attachClickEvent:function(){var e=this._itemSelector(),t=S.addNamespace(K.default.name,this.NAME),n=S.addNamespace(E.default.down,this.NAME),o=this,d=new v.default((function(e){var t=e.event;o._itemPointerDownHandler(t)}));l.default.off(this._itemContainer(),t,e),l.default.off(this._itemContainer(),n,e),l.default.on(this._itemContainer(),t,e,function(e){this._itemClickHandler(e)}.bind(this)),l.default.on(this._itemContainer(),n,e,(function(e){d.execute({element:(0,r.default)(e.target),event:e})}))},_itemClickHandler:function(e,t,n){this._itemDXEventHandler(e,"onItemClick",t,n)},_itemPointerDownHandler:function(e){this.option("focusStateEnabled")&&(this._itemFocusHandler=function(){if(clearTimeout(this._itemFocusTimeout),this._itemFocusHandler=null,!e.isDefaultPrevented()){var t=(0,r.default)(e.target),n=t.closest(this._itemElements()),o=this._closestFocusable(t);n.length&&o&&-1!==(0,I.inArray)(o.get(0),this._focusTarget())&&this.option("focusedElement",(0,c.getPublicElement)(n))}}.bind(this),this._itemFocusTimeout=setTimeout(this._forcePointerDownFocus.bind(this)))},_closestFocusable:function(e){if(e.is(D.default.focusable))return e;for(e=e.parent();e.length&&!h.default.isDocument(e.get(0));){if(e.is(D.default.focusable))return e;e=e.parent()}},_forcePointerDownFocus:function(){this._itemFocusHandler&&this._itemFocusHandler()},_updateFocusState:function(){this.callBase.apply(this,arguments),this._forcePointerDownFocus()},_attachHoldEvent:function(){var e=this._itemContainer(),t=this._itemSelector(),n=S.addNamespace(k.default.name,this.NAME);l.default.off(e,n,t),l.default.on(e,n,t,{timeout:this._getHoldTimeout()},this._itemHoldHandler.bind(this))},_getHoldTimeout:function(){return this.option("itemHoldTimeout")},_shouldFireHoldEvent:function(){return this.hasActionSubscription("onItemHold")},_itemHoldHandler:function(e){this._shouldFireHoldEvent()?this._itemDXEventHandler(e,"onItemHold"):e.cancel=!0},_attachContextMenuEvent:function(){var e=this._itemContainer(),t=this._itemSelector(),n=S.addNamespace(F.default.name,this.NAME);l.default.off(e,n,t),l.default.on(e,n,t,this._itemContextMenuHandler.bind(this))},_shouldFireContextMenuEvent:function(){return this.hasActionSubscription("onItemContextMenu")},_itemContextMenuHandler:function(e){this._shouldFireContextMenuEvent()?this._itemDXEventHandler(e,"onItemContextMenu"):e.cancel=!0},_renderContentImpl:function(){var e=this.option("items")||[];this._renderedItemsCount?this._renderItems(e.slice(this._renderedItemsCount)):this._renderItems(e)},_renderItems:function(e){e.length&&y.default.each(e,function(e,t){this._renderItem(this._renderedItemsCount+e,t)}.bind(this)),this._renderEmptyMessage()},_renderItem:function(e,t,n,o){n=n||this._itemContainer();var r=this._renderItemFrame(e,t,n,o);this._setElementData(r,t,e),r.attr(this.option("_itemAttributes")),this._attachItemClickEvent(t,r);var l=this._getItemContent(r),d=this._renderItemContent({index:e,itemData:t,container:(0,c.getPublicElement)(l),contentClass:this._itemContentClass(),defaultTemplateName:this.option("itemTemplate")}),h=this;return(0,_.when)(d).done((function(n){h._postprocessRenderItem({itemElement:r,itemContent:n,itemData:t,itemIndex:e}),h._executeItemRenderAction(e,t,(0,c.getPublicElement)(r))})),r},_getItemContent:function(e){var t=e.find(".dx-item-content-placeholder");return t.removeClass(R),t},_attachItemClickEvent:function(e,t){e&&e.onClick&&l.default.on(t,K.default.name,function(n){this._itemEventHandlerByHandler(t,e.onClick,{event:n})}.bind(this))},_renderItemContent:function(e){var t=this._getItemTemplateName(e),n=this._getTemplate(t);this._addItemContentClasses(e);var o=(0,r.default)(this._createItemByTemplate(n,e));return o.hasClass(N)?this._renderItemContentByNode(e,o):e.container},_renderItemContentByNode:function(e,t){return(0,r.default)(e.container).replaceWith(t),e.container=(0,c.getPublicElement)(t),this._addItemContentClasses(e),t},_addItemContentClasses:function(e){var t=[V+H,e.contentClass];(0,r.default)(e.container).addClass(t.join(" "))},_appendItemToContainer:function(e,t,n){t.appendTo(e)},_renderItemFrame:function(e,t,n,o){var l=(0,r.default)("<div>");if(new this.constructor.ItemClass(l,this._itemOptions(),t||{}),o&&o.length?o.replaceWith(l):this._appendItemToContainer.call(this,n,l,e),this.option("showItemDataTitle")){var d=this._displayGetter?this._displayGetter(t):t;l.attr("title",d)}return l},_itemOptions:function(){var e=this;return{watchMethod:function(){return e.option("integrationOptions.watchMethod")},owner:e,fieldGetter:function(t){var n=e.option(t+"Expr");return(0,A.compileGetter)(n)}}},_postprocessRenderItem:d.default.noop,_executeItemRenderAction:function(e,t,n){this._getItemRenderAction()({itemElement:n,itemIndex:e,itemData:t})},_setElementData:function(element,data,e){element.addClass([V,this._itemClass()].join(" ")).data(this._itemDataKey(),data).data(this._itemIndexKey(),e)},_createItemRenderAction:function(){return this._itemRenderAction=this._createActionByOption("onItemRendered",{element:this.element(),excludeValidators:["disabled","readOnly"],category:"rendering"})},_getItemRenderAction:function(){return this._itemRenderAction||this._createItemRenderAction()},_getItemTemplateName:function(e){var data=e.itemData,t=e.templateProperty||this.option("itemTemplateProperty");return data&&data[t]||e.defaultTemplateName},_createItemByTemplate:function(e,t){return e.render({model:t.itemData,container:t.container,index:t.index})},_emptyMessageContainer:function(){return this._itemContainer()},_renderEmptyMessage:function(e){e=e||this.option("items");var t=this.option("noDataText"),n=!t||e&&e.length||this._isDataSourceLoading();n&&this._$noData&&(this._$noData.remove(),this._$noData=null,this.setAria("label",void 0)),n||(this._$noData=this._$noData||(0,r.default)("<div>").addClass("dx-empty-message"),this._$noData.appendTo(this._emptyMessageContainer()).html(t),this.setAria("label",t)),this.$element().toggleClass("dx-empty-collection",!n)},_itemDXEventHandler:function(e,t,n,o){this._itemEventHandler(e.target,t,(0,f.extend)(n,{event:e}),o)},_itemEventHandler:function(e,t,n,o){var r=this._createActionByOption(t,(0,f.extend)({validatingTargetName:"itemElement"},o));return this._itemEventHandlerImpl(e,r,n)},_itemEventHandlerByHandler:function(e,t,n,o){var r=this._createAction(t,(0,f.extend)({validatingTargetName:"itemElement"},o));return this._itemEventHandlerImpl(e,r,n)},_itemEventHandlerImpl:function(e,t,n){var o=this._closestItemElement((0,r.default)(e)),l=(0,f.extend)({},n);return t((0,f.extend)(n,this._extendActionArgs(o),l))},_extendActionArgs:function(e){return{itemElement:(0,c.getPublicElement)(e),itemIndex:this._itemElements().index(e),itemData:this._getItemData(e)}},_closestItemElement:function(e){return(0,r.default)(e).closest(this._itemSelector())},_getItemData:function(e){return(0,r.default)(e).data(this._itemDataKey())},_getSummaryItemsWidth:function(e,t){var n=0;return e&&y.default.each(e,(function(e,o){n+=(0,r.default)(o).outerWidth(t||!1)})),n},getFocusedItemId:function(){return this._focusedItemId||(this._focusedItemId="dx-"+new x.default),this._focusedItemId},itemElements:function(){return this._itemElements()},itemsContainer:function(){return this._itemContainer()}}).include(B.default);U.ItemClass=w.default,e.exports=U},1642:function(e,t,n){"use strict";var o=n(0),r=n(37),l=n(6).equalByValue,d=r.abstract,c=r.inherit({ctor:function(e){this._collectionWidget=e},getIndexByItemData:d,getItemDataByIndex:d,getKeysByItems:d,getItemsByKeys:d,itemsGetter:d,getKeyByIndex:function(e){var t=this._denormalizeItemIndex(e);return this.getKeysByItems([this.getItemDataByIndex(t)])[0]},_equalKeys:function(e,t){return this._collectionWidget._isKeySpecified()?l(e,t):e===t},beginCache:function(){this._cache={}},endCache:function(){this._cache=null},getIndexByKey:d,getNormalizedIndex:function(e){return this._isNormalizedItemIndex(e)?e:this._isItemIndex(e)?this._normalizeItemIndex(e):this._isDOMNode(e)?this._getNormalizedItemIndex(e):this._normalizeItemIndex(this.getIndexByItemData(e))},getIndex:function(e){return this._isNormalizedItemIndex(e)?this._denormalizeItemIndex(e):this._isItemIndex(e)?e:this._isDOMNode(e)?this._denormalizeItemIndex(this._getNormalizedItemIndex(e)):this.getIndexByItemData(e)},getItemElement:function(e){if(this._isNormalizedItemIndex(e))return this._getItemByNormalizedIndex(e);if(this._isItemIndex(e))return this._getItemByNormalizedIndex(this._normalizeItemIndex(e));if(this._isDOMNode(e))return o(e);var t=this._normalizeItemIndex(this.getIndexByItemData(e));return this._getItemByNormalizedIndex(t)},deleteItemAtIndex:d,itemPlacementFunc:function(e,t){return this._itemsFromSameParent(e,t)&&e<t?"after":"before"},moveItemAtIndexToIndex:d,_isNormalizedItemIndex:function(e){return"number"==typeof e&&Math.round(e)===e},_isDOMNode:function(e){var t;try{t=o(e)}catch(e){return!1}return t&&t.length&&t.get(0).nodeType},_isItemIndex:d,_getNormalizedItemIndex:d,_normalizeItemIndex:d,_denormalizeItemIndex:d,_getItemByNormalizedIndex:d,_itemsFromSameParent:d});e.exports=c},1645:function(e,t,n){"use strict";var o,r=n(182),l=(o=r)&&o.__esModule?o:{default:o},d=n(19),c=n(6);var h=l.default.inherit({_initMarkup:function(){this._deferredItems=[],this.callBase()},_renderItemContent:function(e){var t=new d.Deferred,n=new d.Deferred;this._deferredItems[e.index]=n;var o=this.callBase.call(this,e);return n.done((function(){t.resolve(o)})),t.promise()},_createItemByTemplate:function(e,t){var n=this;return e.render({model:t.itemData,container:t.container,index:t.index,onRendered:function(){n._deferredItems[t.index].resolve()}})},_postProcessRenderItems:c.noop,_renderItemsAsync:function(){var e=this,t=new d.Deferred;return d.when.apply(this,this._deferredItems).done((function(){e._postProcessRenderItems(),t.resolve()})),t.promise()},_clean:function(){this.callBase(),this._deferredItems=[]}});e.exports=h},1698:function(e,t,n){"use strict";e.exports=n(1699),e.exports.default=e.exports},1699:function(e,t,n){"use strict";var o=n(0),r=n(14),l=n(549),d=n(1700),c=n(1).extend,h=n(26),m=n(644),_="dx-colorbox",f="dx-colorbox-input",I="dx-colorbox-color-is-not-defined",y=d.prototype,v={makeTransparentBackground:y._makeTransparentBackground.bind(y),makeRgba:y._makeRgba.bind(y)},x=m.inherit({_supportedKeys:function(){var e=function(e){if(e.stopPropagation(),this.option("opened"))return e.preventDefault(),!0};return c(this.callBase(),{tab:function(e){this.option("opened")&&(e.preventDefault(),this._colorView._rgbInputs[0].focus())},enter:this._enterKeyHandler,leftArrow:e,rightArrow:e,upArrow:function(e){return this.option("opened")?!e.altKey||(this.close(),!1):(e.preventDefault(),!1)},downArrow:function(e){return this.option("opened")||e.altKey?!(!this.option("opened")&&e.altKey)||(this._validatedOpening(),!1):(e.preventDefault(),!1)}})},_getDefaultOptions:function(){return c(this.callBase(),{editAlphaChannel:!1,applyValueMode:"useButtons",keyStep:1,fieldTemplate:null,buttonsLocation:"bottom after"})},_popupHidingHandler:function(){this.callBase(),"useButtons"===this.option("applyValueMode")&&this._updateColorViewValue(this.option("value"))},_popupConfig:function(){return c(this.callBase(),{width:""})},_contentReadyHandler:function(){this._createColorView(),this._addPopupBottomClasses()},_addPopupBottomClasses:function(){var e=this._popup.bottomToolbar();e&&(e.addClass("dx-colorview-container-cell").addClass("dx-colorview-button-cell").find(".dx-toolbar-items-container").addClass("dx-colorview-buttons-container"),e.find(".dx-popup-done").addClass("dx-colorview-apply-button"),e.find(".dx-popup-cancel").addClass("dx-colorview-cancel-button"))},_createColorView:function(){this._popup.overlayContent().addClass("dx-colorbox-overlay");var e=o("<div>").appendTo(this._popup.$content());this._colorView=this._createComponent(e,d,this._colorViewConfig()),this._colorView.registerKeyHandler("escape",this._escapeHandler.bind(this)),r.on(e,"focus",function(){this.focus()}.bind(this))},_escapeHandler:function(){this.close(),this.focus()},_applyNewColor:function(e){this.option("value",e),e&&v.makeTransparentBackground(this._$colorResultPreview,e),this._colorViewEnterKeyPressed&&(this.close(),this._colorViewEnterKeyPressed=!1)},_colorViewConfig:function(){var e=this;return{value:e.option("value"),matchValue:e.option("value"),editAlphaChannel:e.option("editAlphaChannel"),applyValueMode:e.option("applyValueMode"),focusStateEnabled:e.option("focusStateEnabled"),stylingMode:this.option("stylingMode"),onEnterKeyPressed:function(t){var n=t.event;e._colorViewEnterKeyPressed=!0,e._colorView.option("value")!==e.option("value")&&(e._saveValueChangeEvent(n),e._applyNewColor(e._colorView.option("value")),e.close())},onValueChanged:function(t){var n=t.event,o=t.value,r=t.previousValue,l="instantly"===e.option("applyValueMode"),d=v.makeRgba(o)===r,c=l||e._colorViewEnterKeyPressed,h=e._shouldSaveEmptyValue;d||!c||h||(n&&e._saveValueChangeEvent(n),e._applyNewColor(o))}}},_enterKeyHandler:function(e){var t=this._input().val(),n=this.option("value"),o=this.option("editAlphaChannel")?v.makeRgba(n):n;if(!t)return!1;if(!new l(t).colorIsInvalid){if(t!==o&&(this._applyColorFromInput(t),this._saveValueChangeEvent(e),this.option("value",this.option("editAlphaChannel")?v.makeRgba(t):t)),this._colorView){var r=this._colorView.option("value");n!==r&&(this._saveValueChangeEvent(e),this.option("value",r))}return this.close(),!1}this._input().val(o)},_applyButtonHandler:function(e){this._saveValueChangeEvent(e.event),this._applyNewColor(this._colorView.option("value")),this.callBase()},_cancelButtonHandler:function(){this._resetInputValue(),this.callBase()},_getKeyboardListeners:function(){return this.callBase().concat([this._colorView])},_init:function(){this.callBase()},_initMarkup:function(){this.$element().addClass(_),this.callBase()},_renderInput:function(){this.callBase(),this._input().addClass(f),this._renderColorPreview()},_renderColorPreview:function(){this.$element().wrapInner(o("<div>").addClass("dx-colorbox-input-container")),this._$colorBoxInputContainer=this.$element().children().eq(0),this._$colorResultPreview=o("<div>").addClass("dx-colorbox-color-result-preview").appendTo(this._$textEditorInputContainer),this.option("value")?v.makeTransparentBackground(this._$colorResultPreview,this.option("value")):this._$colorBoxInputContainer.addClass(I)},_renderValue:function(){var e=this.option("value"),text=null!==e&&this.option("editAlphaChannel")?v.makeRgba(e):e;return this.option("text",text),this.callBase()},_resetInputValue:function(){var e=this._input(),t=this.option("value");e.val(t),this._updateColorViewValue(t)},_updateColorViewValue:function(e){this._colorView&&this._colorView.option({value:e,matchValue:e})},_valueChangeEventHandler:function(e){var t=this._input().val();t&&(t=this._applyColorFromInput(t),this._updateColorViewValue(t)),this.callBase(e,t)},_applyColorFromInput:function(e){return new l(e).colorIsInvalid&&(this._resetInputValue(),e=this.option("value")),e},_clean:function(){this.callBase(),delete this._shouldSaveEmptyValue},_optionChanged:function(e){var t=e.value,n=e.name;switch(n){case"value":this._$colorBoxInputContainer.toggleClass(I,!t),t?v.makeTransparentBackground(this._$colorResultPreview,t):this._$colorResultPreview.removeAttr("style"),null===t&&(this._shouldSaveEmptyValue=!0),this._updateColorViewValue(t),this._shouldSaveEmptyValue=!1,this.callBase(e);break;case"applyButtonText":case"cancelButtonText":this.callBase(e),this._popup&&this._addPopupBottomClasses();break;case"editAlphaChannel":case"keyStep":this._colorView&&this._colorView.option(n,t);break;default:this.callBase(e)}}});h("dxColorBox",x),e.exports=x},182:function(e,t,n){"use strict";var o=S(n(0)),r=S(n(14)),l=S(n(1635)),d=S(n(56)),c=n(1),h=n(10),m=n(6),_=n(2),f=S(n(633)),I=n(70),y=n(214),v=n(183),x=S(n(1077)),C=n(19);function S(e){return e&&e.__esModule?e:{default:e}}function E(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var w="dxItemDeleting",D=function(e){return-1!==e},O=l.default.inherit({_setOptionsByReference:function(){this.callBase(),(0,c.extend)(this._optionsByReference,{selectedItem:!0})},_getDefaultOptions:function(){return(0,c.extend)(this.callBase(),{selectionMode:"none",selectionRequired:!1,selectionByClick:!0,selectedItems:[],selectedItemKeys:[],maxFilterLengthInRequest:1500,keyExpr:null,selectedIndex:-1,selectedItem:null,onSelectionChanged:null,onItemReordered:null,onItemDeleting:null,onItemDeleted:null})},ctor:function(element,e){this._userOptions=e||{},this.callBase(element,e)},_init:function(){this._initEditStrategy(),this.callBase(),this._initKeyGetter(),this._initSelectionModule(),"multi"===this.option("selectionMode")&&this._showDeprecatedSelectionMode()},_initKeyGetter:function(){this._keyGetter=(0,I.compileGetter)(this.option("keyExpr"))},_getKeysByItems:function(e){return this._editStrategy.getKeysByItems(e)},_getItemsByKeys:function(e,t){return this._editStrategy.getItemsByKeys(e,t)},_getKeyByIndex:function(e){return this._editStrategy.getKeyByIndex(e)},_getIndexByKey:function(e){return this._editStrategy.getIndexByKey(e)},_getIndexByItemData:function(e){return this._editStrategy.getIndexByItemData(e)},_isKeySpecified:function(){return!(!this._dataSource||!this._dataSource.key())},_getCombinedFilter:function(){return this._dataSource&&this._dataSource.filter()},key:function(){return this.option("keyExpr")?this.option("keyExpr"):this._dataSource&&this._dataSource.key()},keyOf:function(e){var t=e,n=this._dataSource&&this._dataSource.store();return this.option("keyExpr")?t=this._keyGetter(e):n&&(t=n.keyOf(e)),t},_nullValueSelectionSupported:function(){return!1},_initSelectionModule:function(){var e=this,t=e._editStrategy.itemsGetter;this._selection=new x.default({allowNullValue:this._nullValueSelectionSupported(),mode:this.option("selectionMode"),maxFilterLengthInRequest:this.option("maxFilterLengthInRequest"),equalByReference:!this._isKeySpecified(),onSelectionChanged:function(t){(t.addedItemKeys.length||t.removedItemKeys.length)&&(e.option("selectedItems",e._getItemsByKeys(t.selectedItemKeys,t.selectedItems)),e._updateSelectedItems(t))},filter:e._getCombinedFilter.bind(e),totalCount:function(){var t=e.option("items"),n=e._dataSource;return n&&n.totalCount()>=0?n.totalCount():t.length},key:e.key.bind(e),keyOf:e.keyOf.bind(e),load:function(t){if(e._dataSource){var n=e._dataSource.loadOptions();t.customQueryParams=n.customQueryParams,t.userData=e._dataSource._userData}var o=e._dataSource&&e._dataSource.store();return o?o.load(t).done((function(t){if(!e._disposed){var n=(0,v.normalizeLoadResult)(t).data;e._dataSource._applyMapFunction(n)}})):(new C.Deferred).resolve(this.plainItems())},dataFields:function(){return e._dataSource&&e._dataSource.select()},plainItems:t.bind(e._editStrategy)})},_initEditStrategy:function(){var e=f.default;this._editStrategy=new e(this)},_getSelectedItemIndices:function(e){var t=this,n=[];return e=e||this._selection.getSelectedItemKeys(),t._editStrategy.beginCache(),(0,h.each)(e,(function(e,o){var r=t._getIndexByKey(o);D(r)&&n.push(r)})),t._editStrategy.endCache(),n},_initMarkup:function(){var e=this;this._rendering=!0,this._dataSource&&this._dataSource.isLoading()||this._syncSelectionOptions().done((function(){return e._normalizeSelectedItems()})),this.callBase()},_render:function(){this.callBase(),this._rendering=!1},_fireContentReadyAction:function(){this._rendering=!1,this._rendered=!0,this.callBase.apply(this,arguments)},_syncSelectionOptions:function(e){var t,n,o,r;switch(e=e||this._chooseSelectOption()){case"selectedIndex":t=this._editStrategy.getItemDataByIndex(this.option("selectedIndex")),(0,_.isDefined)(t)?(this._setOptionWithoutOptionChange("selectedItems",[t]),this._setOptionWithoutOptionChange("selectedItem",t),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems([t]))):(this._setOptionWithoutOptionChange("selectedItems",[]),this._setOptionWithoutOptionChange("selectedItemKeys",[]),this._setOptionWithoutOptionChange("selectedItem",null));break;case"selectedItems":if(n=(r=this.option("selectedItems")||[]).length?this._editStrategy.getIndexByItemData(r[0]):-1,this.option("selectionRequired")&&!D(n))return this._syncSelectionOptions("selectedIndex");this._setOptionWithoutOptionChange("selectedItem",r[0]),this._setOptionWithoutOptionChange("selectedIndex",n),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems(r));break;case"selectedItem":if(t=this.option("selectedItem"),n=this._editStrategy.getIndexByItemData(t),this.option("selectionRequired")&&!D(n))return this._syncSelectionOptions("selectedIndex");(0,_.isDefined)(t)?(this._setOptionWithoutOptionChange("selectedItems",[t]),this._setOptionWithoutOptionChange("selectedIndex",n),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems([t]))):(this._setOptionWithoutOptionChange("selectedItems",[]),this._setOptionWithoutOptionChange("selectedItemKeys",[]),this._setOptionWithoutOptionChange("selectedIndex",-1));break;case"selectedItemKeys":if(o=this.option("selectedItemKeys"),this.option("selectionRequired")){var l=this._getIndexByKey(o[0]);if(!D(l))return this._syncSelectionOptions("selectedIndex")}return this._selection.setSelection(o)}return(new C.Deferred).resolve().promise()},_chooseSelectOption:function(){var e="selectedIndex",t=function(e){var t=this.option(e);return(0,_.isDefined)(t)&&t.length||e in this._userOptions}.bind(this);return t("selectedItems")?e="selectedItems":t("selectedItem")?e="selectedItem":t("selectedItemKeys")&&(e="selectedItemKeys"),e},_compareKeys:function(e,t){if(e.length!==t.length)return!1;for(var i=0;i<t.length;i++)if(e[i]!==t[i])return!1;return!0},_normalizeSelectedItems:function(){if("none"===this.option("selectionMode"))this._setOptionWithoutOptionChange("selectedItems",[]),this._syncSelectionOptions("selectedItems");else if("single"===this.option("selectionMode")){var e=this.option("selectedItems");if(e.length>1||!e.length&&this.option("selectionRequired")&&this.option("items")&&this.option("items").length){var t=this._selection.getSelectedItems(),n=void 0===e[0]?t[0]:e[0];return void 0===n&&(n=this._editStrategy.itemsGetter()[0]),this.option("grouped")&&n&&n.items&&(n.items=[n.items[0]]),this._selection.setSelection(this._getKeysByItems([n])),this._setOptionWithoutOptionChange("selectedItems",[n]),this._syncSelectionOptions("selectedItems")}this._selection.setSelection(this._getKeysByItems(e))}else{var o=this._getKeysByItems(this.option("selectedItems")),r=this._selection.getSelectedItemKeys();this._compareKeys(r,o)||this._selection.setSelection(o)}return(new C.Deferred).resolve().promise()},_itemClickHandler:function(e){this._createAction(function(e){this._itemSelectHandler(e.event)}.bind(this),{validatingTargetName:"itemElement"})({itemElement:(0,o.default)(e.currentTarget),event:e}),this.callBase.apply(this,arguments)},_itemSelectHandler:function(e){if(this.option("selectionByClick")){var t=e.currentTarget;this.isItemSelected(t)?this.unselectItem(e.currentTarget):this.selectItem(e.currentTarget)}},_selectedItemElement:function(e){return this._itemElements().eq(e)},_postprocessRenderItem:function(e){if("none"!==this.option("selectionMode")){var t=(0,o.default)(e.itemElement),n=this._editStrategy.getNormalizedIndex(t),r=this._isItemSelected(n);this._processSelectableItem(t,r)}},_processSelectableItem:function(e,t){e.toggleClass(this._selectedItemClass(),t),this._setAriaSelected(e,String(t))},_updateSelectedItems:function(e){var t=this,n=e.addedItemKeys,o=e.removedItemKeys;if(t._rendered&&(n.length||o.length)){var r=t._selectionChangePromise;if(!t._rendering){var l,d=[],c=[];t._editStrategy.beginCache();for(var i=0;i<n.length;i++)l=t._getIndexByKey(n[i]),d.push(l),t._addSelection(l);for(var h=0;h<o.length;h++)l=t._getIndexByKey(o[h]),c.push(l),t._removeSelection(l);t._editStrategy.endCache(),t._updateSelection(d,c)}(0,C.when)(r).done((function(){t._fireSelectionChangeEvent(e.addedItems,e.removedItems)}))}},_fireSelectionChangeEvent:function(e,t){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:e,removedItems:t})},_updateSelection:m.noop,_setAriaSelected:function(e,t){this.setAria("selected",t,e)},_removeSelection:function(e){var t=this._editStrategy.getItemElement(e);D(e)&&(this._processSelectableItem(t,!1),r.default.triggerHandler(t,"stateChanged",!1))},_showDeprecatedSelectionMode:function(){d.default.log("W0001",this.NAME,"selectionMode: 'multi'","16.1","Use selectionMode: 'multiple' instead"),this.option("selectionMode","multiple")},_addSelection:function(e){var t=this._editStrategy.getItemElement(e);D(e)&&(this._processSelectableItem(t,!0),r.default.triggerHandler(t,"stateChanged",!0))},_isItemSelected:function(e){var t=this._getKeyByIndex(e);return this._selection.isItemSelected(t,{checkPending:!0})},_optionChanged:function(e){var t=this;switch(e.name){case"selectionMode":"multi"===e.value?this._showDeprecatedSelectionMode():this._invalidate();break;case"dataSource":(!e.value||Array.isArray(e.value)&&!e.value.length)&&this.option("selectedItemKeys",[]),this.callBase(e);break;case"selectedIndex":case"selectedItem":case"selectedItems":case"selectedItemKeys":this._syncSelectionOptions(e.name).done((function(){return t._normalizeSelectedItems()}));break;case"keyExpr":this._initKeyGetter();break;case"selectionRequired":this._normalizeSelectedItems();break;case"selectionByClick":case"onSelectionChanged":case"onItemDeleting":case"onItemDeleted":case"onItemReordered":case"maxFilterLengthInRequest":break;default:this.callBase(e)}},_clearSelectedItems:function(){this._setOptionWithoutOptionChange("selectedItems",[]),this._syncSelectionOptions("selectedItems")},_waitDeletingPrepare:function(e){if(e.data(w))return(new C.Deferred).resolve().promise();e.data(w,!0);var t=new C.Deferred,n={cancel:!1},o=this._itemEventHandler(e,"onItemDeleting",n,{excludeValidators:["disabled","readOnly"]});return(0,C.when)(o).always(function(r){var l=!o,d=!l&&"resolved"===o.state(),c=!!arguments.length,h=l||d&&!c||d&&r;(0,C.when)((0,C.fromPromise)(n.cancel)).always((function(){e.data(w,!1)})).done((function(e){h&&!e?t.resolve():t.reject()})).fail(t.reject)}.bind(this)),t.promise()},_deleteItemFromDS:function(e){if(!this._dataSource)return(new C.Deferred).resolve().promise();var t=new C.Deferred,n=this.option("disabled"),o=this._dataSource.store();if(this.option("disabled",!0),!o.remove)throw d.default.Error("E1011");return o.remove(o.keyOf(this._getItemData(e))).done((function(e){void 0!==e?t.resolve():t.reject()})).fail((function(){t.reject()})),t.always(function(){this.option("disabled",n)}.bind(this)),t},_tryRefreshLastPage:function(){var e=new C.Deferred;return this._isLastPage()||this.option("grouped")?e.resolve():this._refreshLastPage().done((function(){e.resolve()})),e.promise()},_refreshLastPage:function(){return this._expectLastItemLoading(),this._dataSource.load()},_updateSelectionAfterDelete:function(e){var t=this._getKeyByIndex(e);this._selection.deselect([t])},_updateIndicesAfterIndex:function(e){for(var t=this._itemElements(),i=e+1;i<t.length;i++)(0,o.default)(t[i]).data(this._itemIndexKey(),i-1)},_simulateOptionChange:function(e){var t=this.option(e);t instanceof y.DataSource||this._optionChangedAction({name:e,fullName:e,value:t})},isItemSelected:function(e){return this._isItemSelected(this._editStrategy.getNormalizedIndex(e))},selectItem:function(e){if("none"!==this.option("selectionMode")){var t=this._editStrategy.getNormalizedIndex(e);if(D(t)){var n=this._getKeyByIndex(t);if(!this._selection.isItemSelected(n))if("single"===this.option("selectionMode"))this._selection.setSelection([n]);else{var o=this.option("selectedItemKeys")||[];this._selection.setSelection([].concat(E(o),[n]))}}}},unselectItem:function(e){var t=this._editStrategy.getNormalizedIndex(e);if(D(t)){var n=this._selection.getSelectedItemKeys();if(!(this.option("selectionRequired")&&n.length<=1)){var o=this._getKeyByIndex(t);this._selection.isItemSelected(o,{checkPending:!0})&&this._selection.deselect([o])}}},_deleteItemElementByIndex:function(e){this._updateSelectionAfterDelete(e),this._updateIndicesAfterIndex(e),this._editStrategy.deleteItemAtIndex(e)},_afterItemElementDeleted:function(e,t){var n=this._dataSource?"dataSource":"items";this._simulateOptionChange(n),this._itemEventHandler(e,"onItemDeleted",t,{beforeExecute:function(){e.remove()},excludeValidators:["disabled","readOnly"]}),this._renderEmptyMessage()},deleteItem:function(e){var t=this,n=new C.Deferred,o=this._editStrategy.getItemElement(e),r=this._editStrategy.getNormalizedIndex(e),l=this._itemResponseWaitClass();return D(r)?this._waitDeletingPrepare(o).done((function(){o.addClass(l);var e=t._extendActionArgs(o);t._deleteItemFromDS(o).done((function(){t._deleteItemElementByIndex(r),t._afterItemElementDeleted(o,e),t._tryRefreshLastPage().done((function(){n.resolveWith(t)}))})).fail((function(){o.removeClass(l),n.rejectWith(t)}))})).fail((function(){n.rejectWith(t)})):n.rejectWith(t),n.promise()},reorderItem:function(e,t){var n=new C.Deferred,o=this,r=this._editStrategy,l=r.getItemElement(e),d=r.getItemElement(t),c=r.getNormalizedIndex(e),h=r.getNormalizedIndex(t),m=this._dataSource?"dataSource":"items";return D(c)&&D(h)&&c!==h?n.resolveWith(this):n.rejectWith(this),n.promise().done((function(){d[r.itemPlacementFunc(c,h)](l),r.moveItemAtIndexToIndex(c,h),this._updateIndicesAfterIndex(c),o.option("selectedItems",o._getItemsByKeys(o._selection.getSelectedItemKeys(),o._selection.getSelectedItems())),"items"===m&&o._simulateOptionChange(m),o._itemEventHandler(l,"onItemReordered",{fromIndex:r.getIndex(c),toIndex:r.getIndex(h)},{excludeValidators:["disabled","readOnly"]})}))}});e.exports=O},290:function(e,t,n){"use strict";var o=n(0),r=n(37),l=n(10).each,d=n(334),c=r.inherit({ctor:function(e,t,n){this._$element=e,this._options=t,this._rawData=n,d.attachInstanceToElement(e,this,this._dispose),this._render()},_render:function(){var e=o("<div>").addClass("dx-item-content-placeholder");this._$element.append(e),this._watchers=[],this._renderWatchers()},_renderWatchers:function(){this._startWatcher("disabled",this._renderDisabled.bind(this)),this._startWatcher("visible",this._renderVisible.bind(this))},_startWatcher:function(e,t){var n,o,r,l,d,c=this._rawData,h=this._options.fieldGetter(e),m=(n=this._options.watchMethod(),o=function(){return h(c)},r=function(e,n){this._dirty=!0,t(e,n)}.bind(this),{dispose:n(o,d=function(e){l!==e&&(r(e,l),l=e)}),force:function(){d(o())}});this._watchers.push(m)},setDataField:function(){if(this._dirty=!1,l(this._watchers,(function(e,t){t.force()})),this._dirty)return!0},_renderDisabled:function(e,t){this._$element.toggleClass("dx-state-disabled",!!e),this._updateOwnerFocus(e)},_updateOwnerFocus:function(e){var t=this._options.owner;t&&e&&t._resetItemFocus(this._$element)},_renderVisible:function(e,t){this._$element.toggleClass("dx-state-invisible",void 0!==e&&!e)},_dispose:function(){l(this._watchers,(function(e,t){t.dispose()}))}});c.getInstance=function(e){return d.getInstanceByElement(e,this)},e.exports=c},633:function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=n(35).inArray,l=n(1642).inherit({_getPlainItems:function(){return this._collectionWidget.option("items")||[]},getIndexByItemData:function(e){var t=this._collectionWidget.keyOf.bind(this._collectionWidget);return t?this.getIndexByKey(t(e)):r(e,this._getPlainItems())},getItemDataByIndex:function(e){return this._getPlainItems()[e]},deleteItemAtIndex:function(e){this._getPlainItems().splice(e,1)},itemsGetter:function(){return this._getPlainItems()},getKeysByItems:function(e){var t=this._collectionWidget.keyOf.bind(this._collectionWidget),n=e;if(t){n=[];for(var i=0;i<e.length;i++)n.push(t(e[i]))}return n},getIndexByKey:function(e){var t=this._cache,n=t&&t.keys||this.getKeysByItems(this._getPlainItems());if(t&&!t.keys&&(t.keys=n),"object"!==o(e))return n.indexOf(e);for(var i=0,r=n.length;i<r;i++)if(this._equalKeys(e,n[i]))return i;return-1},getItemsByKeys:function(e,t){return(t||e).slice()},moveItemAtIndexToIndex:function(e,t){var n=this._getPlainItems(),o=n[e];n.splice(e,1),n.splice(t,0,o)},_isItemIndex:function(e){return"number"==typeof e&&Math.round(e)===e},_getNormalizedItemIndex:function(e){return this._collectionWidget._itemElements().index(e)},_normalizeItemIndex:function(e){return e},_denormalizeItemIndex:function(e){return e},_getItemByNormalizedIndex:function(e){return e>-1?this._collectionWidget._itemElements().eq(e):null},_itemsFromSameParent:function(){return!0}});e.exports=l},638:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=I(n(0)),r=I(n(182)),l=n(1),d=I(n(340)),c=n(109),h=n(19),m=n(634),_=n(27),f=n(6);function I(e){return e&&e.__esModule?e:{default:e}}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v="__dx_key__";t.default=r.default.inherit({_getDefaultOptions:function(){return(0,l.extend)(this.callBase(),{repaintChangesOnly:!1})},ctor:function(){var e=this;this.callBase.apply(this,arguments),this._customizeStoreLoadOptions=function(t){var n=e._dataSource;n&&!n.isLoaded()&&(e._correctionIndex=0),e._correctionIndex&&t.storeLoadOptions&&(t.storeLoadOptions.skip+=e._correctionIndex)},this._dataSource&&this._dataSource.on("customizeStoreLoadOptions",this._customizeStoreLoadOptions)},reload:function(){this._correctionIndex=0},_init:function(){this.callBase(),this._refreshItemsCache(),this._correctionIndex=0},_findItemElementByKey:function(e){var t=this,n=(0,o.default)(),r=this.key();return this.itemElements().each((function(l,d){var h=(0,o.default)(d),m=t._getItemData(h);if(r?(0,c.keysEqual)(r,t.keyOf(m),e):t._isItemEquals(m,e))return n=h,!1})),n},_dataSourceChangedHandler:function(e,t){null!=t&&t.changes?this._modifyByChanges(t.changes):(this.callBase(e,t),this._refreshItemsCache())},_isItemEquals:function(e,t){e&&e.__dx_key__&&(e=e.data);try{return JSON.stringify(e)===JSON.stringify(t)}catch(n){return e===t}},_isItemStrictEquals:function(e,t){return this._isItemEquals(e,t)},_partialRefresh:function(){var e=this;if(this.option("repaintChangesOnly")){var t=(0,m.findChanges)(this._itemsCache,this._editStrategy.itemsGetter(),(function(data){return data&&void 0!==data.__dx_key__?data.__dx_key__:e.keyOf(data)}),this._isItemStrictEquals.bind(this));if(t&&this._itemsCache.length)return this._modifyByChanges(t,!0),this._renderEmptyMessage(),!0;this._refreshItemsCache()}return!1},_refreshItemsCache:function(){if(this.option("repaintChangesOnly")){var e=this._editStrategy.itemsGetter();try{this._itemsCache=(0,l.extend)(!0,[],e),this.key()||(this._itemsCache=this._itemsCache.map((function(t,n){var o;return y(o={},v,e[n]),y(o,"data",t),o})))}catch(t){this._itemsCache=(0,l.extend)([],e)}}},_dispose:function(){this._dataSource&&this._dataSource.off("customizeStoreLoadOptions",this._customizeStoreLoadOptions),this.callBase()},_updateByChange:function(e,t,n,o){var r=this;if(o)this._renderItem(n.index,n.data,null,this._findItemElementByKey(n.key));else{var l=t[d.default.indexByKey(e,t,n.key)];l&&d.default.update(e,t,n.key,n.data).done((function(){r._renderItem(t.indexOf(l),l,null,r._findItemElementByKey(n.key))}))}},_insertByChange:function(e,t,n,o){var r=this;(0,h.when)(o||d.default.insert(e,t,n.data,n.index)).done((function(){var e;r._beforeItemElementInserted(n),r._renderItem(null!==(e=n.index)&&void 0!==e?e:t.length,n.data),r._afterItemElementInserted(),r._correctionIndex++}))},_updateSelectionAfterRemoveByChange:function(e){var t=this.option("selectedIndex");t>e?this.option("selectedIndex",t-1):t===e&&1===this.option("selectedItems").length?this.option("selectedItems",[]):this._normalizeSelectedItems()},_beforeItemElementInserted:function(e){var t=this.option("selectedIndex");e.index<=t&&this.option("selectedIndex",t+1)},_afterItemElementInserted:f.noop,_removeByChange:function(e,t,n,o){var r=this,l=o?n.index:d.default.indexByKey(e,t,n.key);if(o?n.oldItem:t[l]){var c=this._findItemElementByKey(n.key),h=this._extendActionArgs(c);this._waitDeletingPrepare(c).done((function(){o?(r._updateIndicesAfterIndex(l-1),r._afterItemElementDeleted(c,h),r._updateSelectionAfterRemoveByChange(l)):(r._deleteItemElementByIndex(l),r._afterItemElementDeleted(c,h))})),this._correctionIndex--}},_modifyByChanges:function(e,t){var n=this,o=this._editStrategy.itemsGetter(),r={key:this.key.bind(this),keyOf:this.keyOf.bind(this)},l=this._dataSource,d=l&&l.paginate(),c=l&&l.group();(d||c)&&(e=e.filter((function(e){return"insert"!==e.type||void 0!==e.index}))),e.forEach((function(e){return n["_".concat(e.type,"ByChange")](r,o,e,t)})),this._renderedItemsCount=o.length,this._refreshItemsCache(),this._fireContentReadyAction()},_appendItemToContainer:function(e,t,n){var o=e.children(this._itemSelector()).get(n);(0,_.insertElement)(e.get(0),t.get(0),o)},_optionChanged:function(e){switch(e.name){case"items":this._partialRefresh(e.value)||this.callBase(e);break;case"dataSource":this.option("repaintChangesOnly")&&e.value||this.option("items",[]),this.callBase(e);break;case"repaintChangesOnly":break;default:this.callBase(e)}}})}}]);