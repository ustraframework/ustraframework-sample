(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{1327:function(e,t,n){"use strict";Object.defineProperty(t,"Console",{configurable:!0,enumerable:!0,get:function(){return n(1328)}}),Object.defineProperty(t,"File",{configurable:!0,enumerable:!0,get:function(){return n(1333)}}),Object.defineProperty(t,"Http",{configurable:!0,enumerable:!0,get:function(){return n(1376)}}),Object.defineProperty(t,"Stream",{configurable:!0,enumerable:!0,get:function(){return n(1385)}})},1328:function(e,t,n){"use strict";(function(t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,p){return(l=Object.setPrototypeOf||function(e,p){return e.__proto__=p,e})(e,p)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(7),n(8),n(3),n(11),n(9),n(10),n(157),n(120),n(33),n(200),n(43);var m=n(199),y=n(78),v=y.LEVEL,w=y.MESSAGE,_=n(172);e.exports=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(y,e);var n,r,h,d=f(y);function y(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,y),(e=d.call(this,t)).name=t.name||"console",e.stderrLevels=e._stringArrayToSet(t.stderrLevels),e.consoleWarnLevels=e._stringArrayToSet(t.consoleWarnLevels),e.eol=t.eol||m.EOL,e.setMaxListeners(30),e}return n=y,(r=[{key:"log",value:function(e,n){var r=this;return t((function(){return r.emit("logged",e)})),this.stderrLevels[e[v]]?(console._stderr?console._stderr.write("".concat(e[w]).concat(this.eol)):console.error(e[w]),void(n&&n())):this.consoleWarnLevels[e[v]]?(console._stderr?console._stderr.write("".concat(e[w]).concat(this.eol)):console.warn(e[w]),void(n&&n())):(console._stdout?console._stdout.write("".concat(e[w]).concat(this.eol)):console.log(e[w]),void(n&&n()))}},{key:"_stringArrayToSet",value:function(e,t){if(!e)return{};if(t=t||"Cannot make set from type other than Array of string elements",!Array.isArray(e))throw new Error(t);return e.reduce((function(e,n){if("string"!=typeof n)throw new Error(t);return e[n]=!0,e}),{})}}])&&c(n.prototype,r),h&&c(n,h),y}(_)}).call(this,n(171).setImmediate)},1333:function(e,t,n){"use strict";(function(t,r){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,p){return(f=Object.setPrototypeOf||function(e,p){return e.__proto__=p,e})(e,p)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(7),n(8),n(3),n(11),n(9),n(10),n(157),n(120),n(33),n(24),n(46),n(43),n(200),n(52),n(71),n(32),n(92),n(100);var v=n(381),path=n(197),w=n(1334),_=n(794),O=n(78).MESSAGE,j=n(323),E=j.Stream,x=j.PassThrough,k=n(172),S=n(383)("winston:file"),P=n(199),R=n(1375);e.exports=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(k,e);var n,d,y,j=h(k);function k(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};function n(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];r.slice(1).forEach((function(n){if(t[n])throw new Error("Cannot set ".concat(n," and ").concat(e," together"))}))}if(c(this,k),(e=j.call(this,t)).name=t.name||"file",e._stream=new x,e._stream.setMaxListeners(30),e._onError=e._onError.bind(m(e)),t.filename||t.dirname)n("filename or dirname","stream"),e._basename=e.filename=t.filename?path.basename(t.filename):"winston.log",e.dirname=t.dirname||path.dirname(t.filename),e.options=t.options||{flags:"a"};else{if(!t.stream)throw new Error("Cannot log to file without filename or stream.");console.warn("options.stream will be removed in winston@4. Use winston.transports.Stream"),n("stream","filename","maxsize"),e._dest=e._stream.pipe(e._setupStream(t.stream)),e.dirname=path.dirname(e._dest.path)}return e.maxsize=t.maxsize||null,e.rotationFormat=t.rotationFormat||!1,e.zippedArchive=t.zippedArchive||!1,e.maxFiles=t.maxFiles||null,e.eol=t.eol||P.EOL,e.tailable=t.tailable||!1,e._size=0,e._pendingSize=0,e._created=0,e._drain=!1,e._opening=!1,e._ending=!1,e.dirname&&e._createLogDirIfNotExist(e.dirname),e.open(),e}return n=k,(d=[{key:"finishIfEnding",value:function(){var e=this;this._ending&&(this._opening?this.once("open",(function(){e._stream.once("finish",(function(){return e.emit("finish")})),t((function(){return e._stream.end()}))})):(this._stream.once("finish",(function(){return e.emit("finish")})),t((function(){return e._stream.end()}))))}},{key:"log",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(this.silent)return n(),!0;if(this._drain)this._stream.once("drain",(function(){t._drain=!1,t.log(e,n)}));else{if(!this._rotate){var output="".concat(e[O]).concat(this.eol),o=r.byteLength(output);this._pendingSize+=o,this._opening&&!this.rotatedWhileOpening&&this._needsNewFile(this._size+this._pendingSize)&&(this.rotatedWhileOpening=!0);var c=this._stream.write(output,l.bind(this));return c?n():(this._drain=!0,this._stream.once("drain",(function(){t._drain=!1,n()}))),S("written",c,this._drain),this.finishIfEnding(),c}this._stream.once("rotate",(function(){t._rotate=!1,t.log(e,n)}))}function l(){var t=this;this._size+=o,this._pendingSize-=o,S("logged %s %s",this._size,output),this.emit("logged",e),this._opening||this._needsNewFile()&&(this._rotate=!0,this._endStream((function(){return t._rotateFile()})))}}},{key:"query",value:function(e,t){"function"==typeof e&&(t=e,e={}),e=function(e){return(e=e||{}).rows=e.rows||e.limit||10,e.start=e.start||0,e.until=e.until||new Date,"object"!==o(e.until)&&(e.until=new Date(e.until)),e.from=e.from||e.until-864e5,"object"!==o(e.from)&&(e.from=new Date(e.from)),e.order=e.order||"desc",e}(e);var n=path.join(this.dirname,this.filename),r="",c=[],l=0,f=v.createReadStream(n,{encoding:"utf8"});function h(t,n){try{var r=JSON.parse(t);(function(t){if(t&&"object"===o(t)){var time=new Date(t.timestamp);if(!(e.from&&time<e.from||e.until&&time>e.until||e.level&&e.level!==t.level))return!0}})(r)&&function(t){e.rows&&c.length>=e.rows&&"desc"!==e.order?f.readable&&f.destroy():(e.fields&&(t=e.fields.reduce((function(e,n){return e[n]=t[n],e}),{})),"desc"===e.order&&c.length>=e.rows&&c.shift(),c.push(t))}(r)}catch(e){n||f.emit("error",e)}}f.on("error",(function(e){if(f.readable&&f.destroy(),t)return"ENOENT"!==e.code?t(e):t(null,c)})),f.on("data",(function(data){for(var t=(data=(r+data).split(/\n+/)).length-1,i=0;i<t;i++)(!e.start||l>=e.start)&&h(data[i]),l++;r=data[t]})),f.on("close",(function(){r&&h(r,!0),"desc"===e.order&&(c=c.reverse()),t&&t(null,c)}))}},{key:"stream",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=path.join(this.dirname,this.filename),n=new E,r={file:t,start:e.start};return n.destroy=R(r,(function(e,line){if(e)return n.emit("error",e);try{n.emit("data",line),line=JSON.parse(line),n.emit("log",line)}catch(e){n.emit("error",e)}})),n}},{key:"open",value:function(){var e=this;this.filename&&(this._opening||(this._opening=!0,this.stat((function(t,n){if(t)return e.emit("error",t);S("stat done: %s { size: %s }",e.filename,n),e._size=n,e._dest=e._createStream(e._stream),e._opening=!1,e.once("open",(function(){e._stream.eventNames().includes("rotate")?e._stream.emit("rotate"):e._rotate=!1}))}))))}},{key:"stat",value:function(e){var t=this,n=this._getFile(),r=path.join(this.dirname,n);v.stat(r,(function(o,c){return o&&"ENOENT"===o.code?(S("ENOENTÂ ok",r),t.filename=n,e(null,0)):o?(S("err ".concat(o.code," ").concat(r)),e(o)):!c||t._needsNewFile(c.size)?t._incFile((function(){return t.stat(e)})):(t.filename=n,void e(null,c.size))}))}},{key:"close",value:function(e){var t=this;this._stream&&this._stream.end((function(){e&&e(),t.emit("flush"),t.emit("closed")}))}},{key:"_needsNewFile",value:function(e){return e=e||this._size,this.maxsize&&e>=this.maxsize}},{key:"_onError",value:function(e){this.emit("error",e)}},{key:"_setupStream",value:function(e){return e.on("error",this._onError),e}},{key:"_cleanupStream",value:function(e){return e.removeListener("error",this._onError),e}},{key:"_rotateFile",value:function(){var e=this;this._incFile((function(){return e.open()}))}},{key:"_endStream",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this._dest?(this._stream.unpipe(this._dest),this._dest.end((function(){e._cleanupStream(e._dest),t()}))):t()}},{key:"_createStream",value:function(source){var e=this,t=path.join(this.dirname,this.filename);S("create stream start",t,this.options);var n=v.createWriteStream(t,this.options).on("error",(function(e){return S(e)})).on("close",(function(){return S("close",n.path,n.bytesWritten)})).on("open",(function(){S("file open ok",t),e.emit("open",t),source.pipe(n),e.rotatedWhileOpening&&(e._stream=new x,e._stream.setMaxListeners(30),e._rotateFile(),e.rotatedWhileOpening=!1,e._cleanupStream(n),source.end())}));if(S("create stream ok",t),this.zippedArchive){var r=_.createGzip();return r.pipe(n),r}return n}},{key:"_incFile",value:function(e){S("_incFile",this.filename);var t=path.extname(this._basename),n=path.basename(this._basename,t);this.tailable?this._checkMaxFilesTailable(t,n,e):(this._created+=1,this._checkMaxFilesIncrementing(t,n,e))}},{key:"_getFile",value:function(){var e=path.extname(this._basename),t=path.basename(this._basename,e),n=this.rotationFormat?this.rotationFormat():this._created,r=!this.tailable&&this._created?"".concat(t).concat(n).concat(e):"".concat(t).concat(e);return this.zippedArchive&&!this.tailable?"".concat(r,".gz"):r}},{key:"_checkMaxFilesIncrementing",value:function(e,n,r){if(!this.maxFiles||this._created<this.maxFiles)return t(r);var o=this._created-this.maxFiles,c=0!==o?o:"",l=this.zippedArchive?".gz":"",f="".concat(n).concat(c).concat(e).concat(l),h=path.join(this.dirname,f);v.unlink(h,r)}},{key:"_checkMaxFilesTailable",value:function(e,t,n){var r=this,o=[];if(this.maxFiles){for(var c=this.zippedArchive?".gz":"",l=this.maxFiles-1;l>1;l--)o.push(function(i,n){var r=this,o="".concat(t).concat(i-1).concat(e).concat(c),l=path.join(this.dirname,o);v.exists(l,(function(f){if(!f)return n(null);o="".concat(t).concat(i).concat(e).concat(c),v.rename(l,path.join(r.dirname,o),n)}))}.bind(this,l));w(o,(function(){v.rename(path.join(r.dirname,"".concat(t).concat(e)),path.join(r.dirname,"".concat(t,"1").concat(e).concat(c)),n)}))}}},{key:"_createLogDirIfNotExist",value:function(e){v.existsSync(e)||v.mkdirSync(e,{recursive:!0})}}])&&l(n.prototype,d),y&&l(n,y),k}(k)}).call(this,n(171).setImmediate,n(47).Buffer)},1375:function(e,t,n){"use strict";(function(t){n(46),n(71),n(32);var r=n(381),o=n(144).StringDecoder,c=n(323).Stream;function l(){}e.exports=function(e,n){var f=t.alloc(65536),h=new o("utf8"),d=new c,m="",y=0,v=0;return-1===e.start&&delete e.start,d.readable=!0,d.destroy=function(){d.destroyed=!0,d.emit("end"),d.emit("close")},r.open(e.file,"a+","0644",(function(t,o){if(t)return n?n(t):d.emit("error",t),void d.destroy();!function t(){if(!d.destroyed)return r.read(o,f,0,f.length,y,(function(r,o){if(r)return n?n(r):d.emit("error",r),void d.destroy();if(!o)return m&&((null==e.start||v>e.start)&&(n?n(null,m):d.emit("line",m)),v++,m=""),setTimeout(t,1e3);var data=h.write(f.slice(0,o));n||d.emit("data",data);for(var c=(data=(m+data).split(/\n+/)).length-1,i=0;i<c;i++)(null==e.start||v>e.start)&&(n?n(null,data[i]):d.emit("line",data[i])),v++;return m=data[c],y+=o,t()}));r.close(o,l)}()})),n?d.destroy:d}}).call(this,n(47).Buffer)},1376:function(e,t,n){"use strict";(function(t,r){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){f(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,p){return(m=Object.setPrototypeOf||function(e,p){return e.__proto__=p,e})(e,p)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(7),n(8),n(3),n(11),n(9),n(10),n(64),n(45),n(14),n(24),n(113),n(157),n(120),n(33),n(200),n(71),n(32),n(56),n(43);var _=n(805),O=n(809),j=n(323).Stream,E=n(172);e.exports=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(v,e);var n,o,c,f=y(v);function v(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h(this,v),(e=f.call(this,t)).options=t,e.name=t.name||"http",e.ssl=!!t.ssl,e.host=t.host||"localhost",e.port=t.port,e.auth=t.auth,e.path=t.path||"",e.agent=t.agent,e.headers=t.headers||{},e.headers["content-type"]="application/json",e.port||(e.port=e.ssl?443:80),e}return n=v,(o=[{key:"log",value:function(e,n){var r=this;this._request(e,(function(t,n){n&&200!==n.statusCode&&(t=new Error("Invalid HTTP Status Code: ".concat(n.statusCode))),t?r.emit("warn",t):r.emit("logged",e)})),n&&t(n)}},{key:"query",value:function(e,t){"function"==typeof e&&(t=e,e={}),(e={method:"query",params:this.normalizeQuery(e)}).params.path&&(e.path=e.params.path,delete e.params.path),e.params.auth&&(e.auth=e.params.auth,delete e.params.auth),this._request(e,(function(e,n,body){if(n&&200!==n.statusCode&&(e=new Error("Invalid HTTP Status Code: ".concat(n.statusCode))),e)return t(e);if("string"==typeof body)try{body=JSON.parse(body)}catch(e){return t(e)}t(null,body)}))}},{key:"stream",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new j;(e={method:"stream",params:e}).params.path&&(e.path=e.params.path,delete e.params.path),e.params.auth&&(e.auth=e.params.auth,delete e.params.auth);var n="",r=this._request(e);return t.destroy=function(){return r.destroy()},r.on("data",(function(data){for(var e=(data=(n+data).split(/\n+/)).length-1,i=0;i<e;i++)try{t.emit("log",JSON.parse(data[i]))}catch(e){t.emit("error",e)}n=data[e]})),r.on("error",(function(e){return t.emit("error",e)})),t}},{key:"_request",value:function(e,t){var n=(e=e||{}).auth||this.auth,path=e.path||this.path||"";delete e.auth,delete e.path;var o=Object.assign({},this.headers);n&&n.bearer&&(o.Authorization="Bearer ".concat(n.bearer));var c=(this.ssl?O:_).request(l(l({},this.options),{},{method:"POST",host:this.host,port:this.port,path:"/".concat(path.replace(/^\//,"")),headers:o,auth:n&&n.username&&n.password?"".concat(n.username,":").concat(n.password):"",agent:this.agent}));c.on("error",t),c.on("response",(function(e){return e.on("end",(function(){return t(null,e)})).resume()})),c.end(r.from(JSON.stringify(e),"utf8"))}}])&&d(n.prototype,o),c&&d(n,c),v}(E)}).call(this,n(171).setImmediate,n(47).Buffer)},1385:function(e,t,n){"use strict";(function(t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,p){return(l=Object.setPrototypeOf||function(e,p){return e.__proto__=p,e})(e,p)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(7),n(8),n(3),n(11),n(9),n(10),n(157),n(120),n(200),n(43);var m=n(810),y=n(78).MESSAGE,v=n(199),w=n(172);e.exports=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(w,e);var n,r,h,d=f(w);function w(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(o(this,w),e=d.call(this,t),!t.stream||!m(t.stream))throw new Error("options.stream is required.");return e._stream=t.stream,e._stream.setMaxListeners(1/0),e.isObjectMode=t.stream._writableState.objectMode,e.eol=t.eol||v.EOL,e}return n=w,(r=[{key:"log",value:function(e,n){var r=this;if(t((function(){return r.emit("logged",e)})),this.isObjectMode)return this._stream.write(e),void(n&&n());this._stream.write("".concat(e[y]).concat(this.eol)),n&&n()}}])&&c(n.prototype,r),h&&c(n,h),w}(w)}).call(this,n(171).setImmediate)},1386:function(e,t,n){"use strict";(function(t){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,p){return(l=Object.setPrototypeOf||function(e,p){return e.__proto__=p,e})(e,p)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(7),n(8),n(3),n(11),n(9),n(10),n(157),n(120),n(24),n(52),n(525),n(141),n(32),n(43),n(46),n(200),n(45),n(33),n(92),n(100);var m=n(323),y=m.Stream,v=m.Transform,w=n(572),_=n(78),O=_.LEVEL,j=_.SPLAT,E=n(810),x=n(812),k=n(816),S=n(1390),P=n(1391),R=n(783).warn,T=n(571),L=/%[scdjifoO%]/g,A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(_,e);var h,d,m,v=f(_);function _(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),(t=v.call(this,{objectMode:!0})).configure(e),t}return h=_,(d=[{key:"child",value:function(e){var t=this;return Object.create(t,{write:{value:function(n){var r=Object.assign({},e,n);n instanceof Error&&(r.stack=n.stack,r.message=n.message),t.write(r)}}})}},{key:"configure",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.silent,o=t.format,c=t.defaultMeta,l=t.levels,f=t.level,h=void 0===f?"info":f,d=t.exitOnError,m=void 0===d||d,y=t.transports,v=t.colors,w=t.emitErrs,_=t.formatters,O=t.padLevels,j=t.rewriters,E=t.stripColors,S=t.exceptionHandlers,P=t.rejectionHandlers;if(this.transports.length&&this.clear(),this.silent=r,this.format=o||this.format||n(1392)(),this.defaultMeta=c||null,this.levels=l||this.levels||T.npm.levels,this.level=h,this.exceptions=new x(this),this.rejections=new k(this),this.profilers={},this.exitOnError=m,y&&(y=Array.isArray(y)?y:[y]).forEach((function(t){return e.add(t)})),v||w||_||O||j||E)throw new Error(["{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.","Use a custom winston.format(function) instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join("\n"));S&&this.exceptions.handle(S),P&&this.rejections.handle(P)}},{key:"isLevelEnabled",value:function(e){var t=this,n=F(this.levels,e);if(null===n)return!1;var r=F(this.levels,this.level);return null!==r&&(this.transports&&0!==this.transports.length?-1!==this.transports.findIndex((function(e){var o=F(t.levels,e.level);return null===o&&(o=r),o>=n})):r>=n)}},{key:"log",value:function(e,t){for(var n,c,l=arguments.length,f=new Array(l>2?l-2:0),h=2;h<l;h++)f[h-2]=arguments[h];if(1===arguments.length)return e[O]=e.level,this._addDefaultMeta(e),this.write(e),this;if(2===arguments.length)return t&&"object"===o(t)?(t[O]=t.level=e,this._addDefaultMeta(t),this.write(t),this):(this.write((r(c={},O,e),r(c,"level",e),r(c,"message",t),c)),this);var meta=f[0];if("object"===o(meta)&&null!==meta){var d=t&&t.match&&t.match(L);if(!d){var m,y=Object.assign({},this.defaultMeta,meta,(r(m={},O,e),r(m,j,f),r(m,"level",e),r(m,"message",t),m));return meta.message&&(y.message="".concat(y.message," ").concat(meta.message)),meta.stack&&(y.stack=meta.stack),this.write(y),this}}return this.write(Object.assign({},this.defaultMeta,(r(n={},O,e),r(n,j,f),r(n,"level",e),r(n,"message",t),n))),this}},{key:"_transform",value:function(e,t,n){if(this.silent)return n();e[O]||(e[O]=e.level),this.levels[e[O]]||0===this.levels[e[O]]||console.error("[winston] Unknown logger level: %s",e[O]),this._readableState.pipes||console.error("[winston] Attempt to write logs with no transports %j",e);try{this.push(this.format.transform(e,this.format.options))}catch(e){throw e}finally{n()}}},{key:"_final",value:function(e){var n=this.transports.slice();w(n,(function(e,n){if(!e||e.finished)return t(n);e.once("finish",n),e.end()}),e)}},{key:"add",value:function(e){var t=!E(e)||e.log.length>2?new S({transport:e}):e;if(!t._writableState||!t._writableState.objectMode)throw new Error("Transports must WritableStreams in objectMode. Set { objectMode: true }.");return this._onEvent("error",t),this._onEvent("warn",t),this.pipe(t),e.handleExceptions&&this.exceptions.handle(),e.handleRejections&&this.rejections.handle(),this}},{key:"remove",value:function(e){if(!e)return this;var t=e;return(!E(e)||e.log.length>2)&&(t=this.transports.filter((function(t){return t.transport===e}))[0]),t&&this.unpipe(t),this}},{key:"clear",value:function(){return this.unpipe(),this}},{key:"close",value:function(){return this.clear(),this.emit("close"),this}},{key:"setLevels",value:function(){R.deprecated("setLevels")}},{key:"query",value:function(e,t){"function"==typeof e&&(t=e,e={}),e=e||{};var n={},r=Object.assign({},e.query||{});w(this.transports.filter((function(e){return!!e.query})),(function(t,o){!function(t,n){e.query&&"function"==typeof t.formatQuery&&(e.query=t.formatQuery(r)),t.query(e,(function(r,o){if(r)return n(r);"function"==typeof t.formatResults&&(o=t.formatResults(o,e.format)),n(null,o)}))}(t,(function(e,r){o&&((r=e||r)&&(n[t.name]=r),o()),o=null}))}),(function(){return t(null,n)}))}},{key:"stream",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new y,n=[];return t._streams=n,t.destroy=function(){for(var i=n.length;i--;)n[i].destroy()},this.transports.filter((function(e){return!!e.stream})).forEach((function(r){var o=r.stream(e);o&&(n.push(o),o.on("log",(function(e){e.transport=e.transport||[],e.transport.push(r.name),t.emit("log",e)})),o.on("error",(function(e){e.transport=e.transport||[],e.transport.push(r.name),t.emit("error",e)})))})),t}},{key:"startTimer",value:function(){return new P(this)}},{key:"profile",value:function(e){var time=Date.now();if(this.profilers[e]){var t=this.profilers[e];delete this.profilers[e];for(var n=arguments.length,r=new Array(n>1?n-1:0),c=1;c<n;c++)r[c-1]=arguments[c];"function"==typeof r[r.length-2]&&(console.warn("Callback function no longer supported as of winston@3.0.0"),r.pop());var l="object"===o(r[r.length-1])?r.pop():{};return l.level=l.level||"info",l.durationMs=time-t,l.message=l.message||e,this.write(l)}return this.profilers[e]=time,this}},{key:"handleExceptions",value:function(){var e;console.warn("Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()"),(e=this.exceptions).handle.apply(e,arguments)}},{key:"unhandleExceptions",value:function(){var e;console.warn("Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()"),(e=this.exceptions).unhandle.apply(e,arguments)}},{key:"cli",value:function(){throw new Error(["Logger.cli() was removed in winston@3.0.0","Use a custom winston.formats.cli() instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join("\n"))}},{key:"_onEvent",value:function(e,t){t["__winston"+e]||(t["__winston"+e]=function(n){"error"!==e||this.transports.includes(t)||this.add(t),this.emit(e,n,t)}.bind(this),t.on(e,t["__winston"+e]))}},{key:"_addDefaultMeta",value:function(e){this.defaultMeta&&Object.assign(e,this.defaultMeta)}}])&&c(h.prototype,d),m&&c(h,m),_}(v);function F(e,t){var n=e[t];return n||0===n?n:null}Object.defineProperty(A.prototype,"transports",{configurable:!1,enumerable:!0,get:function(){var e=this._readableState.pipes;return Array.isArray(e)?e:[e].filter(Boolean)}}),e.exports=A}).call(this,n(171).setImmediate)},1391:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n(7),n(8),n(3),n(11),n(9),n(10),e.exports=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new Error("Logger is required for profiling.");this.logger=t,this.start=Date.now()}var t,n,c;return t=e,(n=[{key:"done",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"function"==typeof t[t.length-1]&&(console.warn("Callback function no longer supported as of winston@3.0.0"),t.pop());var o="object"===r(t[t.length-1])?t.pop():{};return o.level=o.level||"info",o.durationMs=Date.now()-this.start,this.logger.write(o)}}])&&o(t.prototype,n),c&&o(t,c),e}()},1400:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n(196),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(3),n(9),n(10),n(46),n(24);var c=n(811);e.exports=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.loggers=new Map,this.options=t}var t,n,l;return t=e,(n=[{key:"add",value:function(e,t){var n=this;if(!this.loggers.has(e)){var r=(t=Object.assign({},t||this.options)).transports||this.options.transports;t.transports=r?r.slice():[];var o=c(t);o.on("close",(function(){return n._delete(e)})),this.loggers.set(e,o)}return this.loggers.get(e)}},{key:"get",value:function(e,t){return this.add(e,t)}},{key:"has",value:function(e){return!!this.loggers.has(e)}},{key:"close",value:function(e){var t=this;if(e)return this._removeLogger(e);this.loggers.forEach((function(e,n){return t._removeLogger(n)}))}},{key:"_removeLogger",value:function(e){this.loggers.has(e)&&(this.loggers.get(e).close(),this._delete(e))}},{key:"_delete",value:function(e){this.loggers.delete(e)}}])&&o(t.prototype,n),l&&o(t,l),e}()},571:function(e,t,n){"use strict";var r=n(779),o=n(78).configs;t.cli=r.levels(o.cli),t.npm=r.levels(o.npm),t.syslog=r.levels(o.syslog),t.addColors=r.levels},778:function(e,t,n){"use strict";n(24),n(43),n(64);var r=n(779),o=n(783).warn,c=t;c.version=n(1326).version,c.transports=n(1327),c.config=n(571),c.addColors=r.levels,c.format=r.format,c.createLogger=n(811),c.ExceptionHandler=n(812),c.RejectionHandler=n(816),c.Container=n(1400),c.Transport=n(172),c.loggers=new c.Container;var l=c.createLogger();Object.keys(c.config.npm.levels).concat(["log","query","stream","add","remove","clear","profile","startTimer","handleExceptions","unhandleExceptions","handleRejections","unhandleRejections","configure","child"]).forEach((function(e){return c[e]=function(){return l[e].apply(l,arguments)}})),Object.defineProperty(c,"level",{get:function(){return l.level},set:function(e){l.level=e}}),Object.defineProperty(c,"exceptions",{get:function(){return l.exceptions}}),["exitOnError"].forEach((function(e){Object.defineProperty(c,e,{get:function(){return l[e]},set:function(t){l[e]=t}})})),Object.defineProperty(c,"default",{get:function(){return{exceptionHandlers:l.exceptionHandlers,rejectionHandlers:l.rejectionHandlers,transports:l.transports}}}),o.deprecated(c,"setLevels"),o.forFunctions(c,"useFormat",["cli"]),o.forProperties(c,"useFormat",["padLevels","stripColors"]),o.forFunctions(c,"deprecated",["addRewriter","addFilter","clone","extend"]),o.forProperties(c,"deprecated",["emitErrs","levelLength"]),o.moved(c,"createLogger","Logger")},783:function(e,t,n){"use strict";n(52),n(24);var r=n(114).format;t.warn={deprecated:function(e){return function(){throw new Error(r("{ %s } was removed in winston@3.0.0.",e))}},useFormat:function(e){return function(){throw new Error([r("{ %s } was removed in winston@3.0.0.",e),"Use a custom winston.format = winston.format(function) instead."].join("\n"))}},forFunctions:function(e,n,r){r.forEach((function(r){e[r]=t.warn[n](r)}))},moved:function(e,t,n){function o(){return function(){throw new Error([r("winston.%s was moved in winston@3.0.0.",n),r("Use a winston.%s instead.",t)].join("\n"))}}Object.defineProperty(e,n,{get:o,set:o})},forProperties:function(e,n,r){r.forEach((function(r){var o=t.warn[n](r);Object.defineProperty(e,r,{get:o,set:o})}))}}},811:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,p){return(l=Object.setPrototypeOf||function(e,p){return e.__proto__=p,e})(e,p)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(7),n(8),n(3),n(11),n(9),n(10),n(157),n(120),n(46),n(24),n(64),n(43);var m=n(78).LEVEL,y=n(571),v=n(1386),w=n(383)("winston:create-logger");function _(e){return"is"+e.charAt(0).toUpperCase()+e.slice(1)+"Enabled"}e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.levels=e.levels||y.npm.levels;var t=function(e){c(n,e);var t=f(n);function n(e){return o(this,n),t.call(this,e)}return n}(v),n=new t(e);return Object.keys(e.levels).forEach((function(e){w('Define prototype method for "%s"',e),"log"!==e?(t.prototype[e]=function(){for(var t=this||n,r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];if(1===o.length){var l=o[0],f=l&&l.message&&l||{message:l};return f.level=f[m]=e,t._addDefaultMeta(f),t.write(f),this||n}return 0===o.length?(t.log(e,""),t):t.log.apply(t,[e].concat(o))},t.prototype[_(e)]=function(){return(this||n).isLevelEnabled(e)}):console.warn('Level "log" not defined: conflicts with the method "log". Use a different level name.')})),n}},812:function(e,t,n){"use strict";(function(t){function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n(196),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(3),n(9),n(10),n(24),n(86),n(52),n(53),n(48),n(45);var o=n(199),c=n(572),l=n(383)("winston:exception"),f=n(813),h=n(814),d=n(815);e.exports=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new Error("Logger is required to handle exceptions");this.logger=t,this.handlers=new Map}var n,m,y;return n=e,(m=[{key:"handle",value:function(){for(var e=this,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];r.forEach((function(t){if(Array.isArray(t))return t.forEach((function(t){return e._addHandler(t)}));e._addHandler(t)})),this.catcher||(this.catcher=this._uncaughtException.bind(this),t.on("uncaughtException",this.catcher))}},{key:"unhandle",value:function(){var e=this;this.catcher&&(t.removeListener("uncaughtException",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach((function(t){return e.logger.unpipe(t)})))}},{key:"getAllInfo",value:function(e){var t=e.message;return t||"string"!=typeof e||(t=e),{error:e,level:"error",message:["uncaughtException: ".concat(t||"(no error message)"),e.stack||"  No stack trace"].join("\n"),stack:e.stack,exception:!0,date:(new Date).toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}},{key:"getProcessInfo",value:function(){return{pid:t.pid,uid:t.getuid?t.getuid():null,gid:t.getgid?t.getgid():null,cwd:t.cwd(),execPath:t.execPath,version:t.version,argv:t.argv,memoryUsage:t.memoryUsage()}}},{key:"getOsInfo",value:function(){return{loadavg:o.loadavg(),uptime:o.uptime()}}},{key:"getTrace",value:function(e){return(e?h.parse(e):h.get()).map((function(e){return{column:e.getColumnNumber(),file:e.getFileName(),function:e.getFunctionName(),line:e.getLineNumber(),method:e.getMethodName(),native:e.isNative()}}))}},{key:"_addHandler",value:function(e){if(!this.handlers.has(e)){e.handleExceptions=!0;var t=new d(e);this.handlers.set(e,t),this.logger.pipe(t)}}},{key:"_uncaughtException",value:function(e){var n,r=this.getAllInfo(e),o=this._getExceptionHandlers(),h="function"==typeof this.logger.exitOnError?this.logger.exitOnError(e):this.logger.exitOnError;function d(){l("doExit",h),l("process._exiting",t._exiting),h&&!t._exiting&&(n&&clearTimeout(n),t.exit(1))}if(!o.length&&h&&(console.warn("winston: exitOnError cannot be true with no exception handlers."),console.warn("winston: not exiting process."),h=!1),!o||0===o.length)return t.nextTick(d);c(o,(function(e,t){var n=f(t),r=e.transport||e;function o(e){return function(){l(e),n()}}r._ending=!0,r.once("finish",o("finished")),r.once("error",o("error"))}),(function(){return h&&d()})),this.logger.log(r),h&&(n=setTimeout(d,3e3))}},{key:"_getExceptionHandlers",value:function(){return this.logger.transports.filter((function(e){return(e.transport||e).handleExceptions}))}}])&&r(n.prototype,m),y&&r(n,y),e}()}).call(this,n(44))},815:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,p){return(c=Object.setPrototypeOf||function(e,p){return e.__proto__=p,e})(e,p)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(7),n(8),n(3),n(11),n(9),n(10),n(157),n(120);var d=n(323).Writable;e.exports=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(h,e);var t,n,r,f=l(h);function h(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),t=f.call(this,{objectMode:!0}),!e)throw new Error("ExceptionStream requires a TransportStream instance.");return t.handleExceptions=!0,t.transport=e,t}return t=h,(n=[{key:"_write",value:function(e,t,n){return e.exception?this.transport.log(e,n):(n(),!0)}}])&&o(t.prototype,n),r&&o(t,r),h}(d)},816:function(e,t,n){"use strict";(function(t){function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n(196),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(3),n(9),n(10),n(24),n(86),n(52),n(53),n(48),n(45);var o=n(199),c=n(572),l=n(383)("winston:rejection"),f=n(813),h=n(814),d=n(815);e.exports=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new Error("Logger is required to handle rejections");this.logger=t,this.handlers=new Map}var n,m,y;return n=e,(m=[{key:"handle",value:function(){for(var e=this,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];r.forEach((function(t){if(Array.isArray(t))return t.forEach((function(t){return e._addHandler(t)}));e._addHandler(t)})),this.catcher||(this.catcher=this._unhandledRejection.bind(this),t.on("unhandledRejection",this.catcher))}},{key:"unhandle",value:function(){var e=this;this.catcher&&(t.removeListener("unhandledRejection",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach((function(t){return e.logger.unpipe(t)})))}},{key:"getAllInfo",value:function(e){var t=e.message;return t||"string"!=typeof e||(t=e),{error:e,level:"error",message:["unhandledRejection: ".concat(t||"(no error message)"),e.stack||"  No stack trace"].join("\n"),stack:e.stack,exception:!0,date:(new Date).toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}},{key:"getProcessInfo",value:function(){return{pid:t.pid,uid:t.getuid?t.getuid():null,gid:t.getgid?t.getgid():null,cwd:t.cwd(),execPath:t.execPath,version:t.version,argv:t.argv,memoryUsage:t.memoryUsage()}}},{key:"getOsInfo",value:function(){return{loadavg:o.loadavg(),uptime:o.uptime()}}},{key:"getTrace",value:function(e){return(e?h.parse(e):h.get()).map((function(e){return{column:e.getColumnNumber(),file:e.getFileName(),function:e.getFunctionName(),line:e.getLineNumber(),method:e.getMethodName(),native:e.isNative()}}))}},{key:"_addHandler",value:function(e){if(!this.handlers.has(e)){e.handleRejections=!0;var t=new d(e);this.handlers.set(e,t),this.logger.pipe(t)}}},{key:"_unhandledRejection",value:function(e){var n,r=this.getAllInfo(e),o=this._getRejectionHandlers(),h="function"==typeof this.logger.exitOnError?this.logger.exitOnError(e):this.logger.exitOnError;function d(){l("doExit",h),l("process._exiting",t._exiting),h&&!t._exiting&&(n&&clearTimeout(n),t.exit(1))}if(!o.length&&h&&(console.warn("winston: exitOnError cannot be true with no rejection handlers."),console.warn("winston: not exiting process."),h=!1),!o||0===o.length)return t.nextTick(d);c(o,(function(e,t){var n=f(t),r=e.transport||e;function o(e){return function(){l(e),n()}}r._ending=!0,r.once("finish",o("finished")),r.once("error",o("error"))}),(function(){return h&&d()})),this.logger.log(r),h&&(n=setTimeout(d,3e3))}},{key:"_getRejectionHandlers",value:function(){return this.logger.transports.filter((function(e){return(e.transport||e).handleRejections}))}}])&&r(n.prototype,m),y&&r(n,y),e}()}).call(this,n(44))}}]);