(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{1731:function(e,t,n){"use strict";var o=y(n(0)),r=y(n(76)),l=y(n(6)),d=y(n(20)),c=n(10),h=y(n(2)),f=n(75),_=y(n(71)),m=y(n(30)),C=n(19),w=y(n(27)),v=y(n(50)),x=y(n(188));function y(e){return e&&e.__esModule?e:{default:e}}var F="borders",I="table-fixed",E="dx-hidden",V="dx-gridbase-container",R="adaptiveHidden",T=["columnsSeparatorView","blockSeparatorView","trackerView","headerPanel","columnHeadersView","rowsView","footerView","columnChooserView","filterPanelView","pagerView","draggingHeaderView","contextMenuView","errorView","headerFilterView","filterBuilderView"],S=function(e){return h.default.isString(e)&&"%"===e.slice(-1)},P=function(e,t){var n=[];if(e&&t&&e.length&&e.length===t.length)for(var i=0;i<e.length;i++)n.push(e[i]>t[i]?e[i]:t[i]);else e&&e.length?n=e:t&&(n=t);return n},D=function(e,t){var n=e._rowsView.contentWidth();return n-e._getTotalWidth(t,n)},H=function(e,t){x.default.hiddenFocus(e),_.default.setSelectionRange(e,t)},k=r.default.ViewController.inherit({_initPostRenderHandlers:function(){var e=this,t=e._dataController;e._refreshSizesHandler||(e._refreshSizesHandler=function(n){var o;t.changed.remove(e._refreshSizesHandler);var r=n&&n.changeType,d=n&&n.isDelayed,c=t.items();n&&"refresh"!==r&&"prepend"!==r&&"append"!==r?"update"===r&&n.changeTypes&&(!(c.length>1||"insert"!==n.changeTypes[0])||0===c.length&&"remove"===n.changeTypes[0]||n.needUpdateDimensions?o=e.resize():l.default.deferUpdate((function(){e._rowsView.resize()}))):d||(o=e.resize()),r&&"updateSelection"!==r&&"updateFocusedRow"!==r&&!d&&(0,C.when)(o).done((function(){e._setAriaRowColCount(),e.fireContentReadyAction()}))},e._dataController.changed.add((function(){e._dataController.changed.add(e._refreshSizesHandler)})))},fireContentReadyAction:function(){this.component._fireContentReadyAction()},_setAriaRowColCount:function(){var component=this.component;component.setAria({rowCount:this._dataController.totalItemsCount(),colCount:component.columnCount()},component.$element().children(".dx-gridbase-container"))},_getBestFitWidths:function(){var e,t=this._rowsView,n=this._columnHeadersView;if(!this.option("legacyRendering")){var o,r=t.getColumnWidths();if(null===(o=r)||void 0===o||!o.length){var l,d=n.getTableElement();n.setTableElement(null===(l=t.getTableElement())||void 0===l?void 0:l.children(".dx-header")),r=n.getColumnWidths(),n.setTableElement(d)}return r}var c=t.getColumnWidths(),h=null==n?void 0:n.getColumnWidths(),f=null===(e=this._footerView)||void 0===e?void 0:e.getColumnWidths(),_=P(c,h);return _=P(_,f)},_setVisibleWidths:function(e,t){var n=this._columnsController;n.beginUpdate(),(0,c.each)(e,(function(e,o){var r=n.getColumnId(o);n.columnOption(r,"visibleWidth",t[e])})),n.endUpdate()},_toggleBestFitModeForView:function(view,e,t){var n=this;if(view&&view.isVisible()){var r=this._rowsView.getTableElements(),l=view.getTableElements();(0,c.each)(r,(function(r,d){var c,h=(0,o.default)(d),f=l.eq(r);f&&f.length&&((c=t?f.children("tbody").appendTo(h):h.children("."+e).appendTo(f)).toggleClass(e,t),c.toggleClass(n.addWidgetPrefix("best-fit"),t))}))}},_toggleBestFitMode:function(e){var t=this.component.$element(),n=this;if(n.option("legacyRendering"))t.find("."+this.addWidgetPrefix("table")).toggleClass(this.addWidgetPrefix(I),!e),t.find("input:not([type='hidden'])").toggleClass(E,e),t.find(".dx-group-cell").toggleClass(E,e),t.find(".dx-header-row ."+this.addWidgetPrefix("text-content")).css("maxWidth","");else{var o=n._rowsView.getTableElement(),r=n._rowsView.getTableElements().eq(1);if(!o)return;o.css("tableLayout",e?"auto":"fixed"),o.children("colgroup").css("display",e?"none":""),r.toggleClass(this.addWidgetPrefix(I),!e),n._toggleBestFitModeForView(n._columnHeadersView,"dx-header",e),n._toggleBestFitModeForView(n._footerView,"dx-footer",e),n._needStretch()&&(o.get(0).style.width=e?"auto":""),v.default.msie&&11===parseInt(v.default.version)&&o.find("."+this.addWidgetPrefix(I)).each((function(){this.style.width=e?"10px":""}))}},_synchronizeColumns:function(){var e,t,n,o=this,r=o._columnsController,d=r.getVisibleColumns(),m=o.option("columnAutoWidth"),C=o.option("legacyRendering"),x=o._needBestFit(),y=!1,F=!1,I=[];!x&&(0,c.each)(d,(function(e,t){if("auto"===t.width||C&&t.fixed)return x=!0,!1})),(0,c.each)(d,(function(e,t){if(t.minWidth)return y=!0,!1})),o._setVisibleWidths(d,[]),x&&(t=w.default.getActiveElement(),n=_.default.getSelectionRange(t),o._toggleBestFitMode(!0),e=!0),l.default.deferUpdate((function(){var _;(x?(I=o._getBestFitWidths(),(0,c.each)(d,(function(e,t){var n=r.getColumnId(t);r.columnOption(n,"bestFitWidth",I[e],!0)}))):y&&(I=o._getBestFitWidths()),(0,c.each)(d,(function(e){var t=this.width;"auto"!==t&&(h.default.isDefined(t)?I[e]=h.default.isNumeric(t)||function(e){return h.default.isString(e)&&"px"===e.slice(-2)}(t)?parseFloat(t):t:m||(I[e]=void 0))})),e)&&(o._toggleBestFitMode(!1),e=!1,t&&t!==w.default.getActiveElement()&&((0,f.getBoundingRect)(t).bottom<0||(v.default.msie?setTimeout((function(){H(t,n)})):H(t,n))));F=o._correctColumnWidths(I,d),m&&((0,c.each)(d,(function(e,t){"groupExpand"===t.type&&(_=I[e])})),(0,c.each)(d,(function(e,t){"groupExpand"===t.type&&_&&(I[e]=_)})),o._needStretch()&&o._processStretch(I,d)),l.default.deferRender((function(){(x||F)&&o._setVisibleWidths(d,I)}))}))},_needBestFit:function(){return this.option("columnAutoWidth")},_needStretch:function(){return this.option("legacyRendering")||this._columnsController.getVisibleColumns().some((function(e){return"auto"===e.width&&!e.command}))},_getAverageColumnsWidth:function(e){return D(this,e)/e.filter((function(e){return void 0===e})).length},_correctColumnWidths:function(e,t){var i,n=this,o=!1,r=!1,l=!1,d=n.component.$element(),c=n._hasWidth,f=function(){var d=i,c=t[d],f=e[d]===R,_=e[d],m=c.minWidth;if(m)if(void 0===_){var C=n._getAverageColumnsWidth(e);_=C}else{if(S(_))(function(e,t,n,o){return D(e,o.map((function(e,o){return o===t?n:e})))})(n,d,m,e)<0&&(_=-1)}var w=n._getRealColumnWidth(d,e.map((function(e,t){return d===t?_:e})));m&&!f&&w<m&&(e[d]=m,l=!0,i=-1),h.default.isDefined(c.width)||(r=!0),S(c.width)&&(o=!0)};for(i=0;i<t.length;i++)f();if(d&&n._maxWidth&&(delete n._maxWidth,d.css("maxWidth","")),!r&&e.length){var m=n._rowsView.contentWidth(),C=n._rowsView.getScrollbarWidth(),w=n._getTotalWidth(e,m);if(w<m){var v=_.default.getLastResizableColumnIndex(t,e);v>=0&&(e[v]="auto",l=!0,!1!==c||o||(n._maxWidth=w+C+(n.option("showBorders")?2:0),d.css("maxWidth",n._maxWidth)))}}return l},_processStretch:function(e,t){var n=this._rowsView.contentWidth(),o=this._getTotalWidth(e,n),r={length:0};if(e.length){(0,c.each)(t,(function(t){(this.width||e[t]===R)&&(r[t]=!0,r.length++)}));var l=n-o,d=Math.floor(l/(e.length-r.length)),h=l-d*(e.length-r.length);if(l>=0)for(var i=0;i<e.length;i++)r[i]||(e[i]+=d,h>0&&(h<1?(e[i]+=h,h=0):(e[i]++,h--)))}},_getRealColumnWidth:function(e,t,n){var o=1,r=t[e];if(!S(r))return parseFloat(r);var l=t.reduce((function(e,t,n){return S(t)?e+parseFloat(t):e}),0),d=t.reduce((function(e,t){return!t||t===R||S(t)?e:e+parseFloat(t)}),0),c=(n=n||this._rowsView.contentWidth())-d,h=l*n/100;return d>0&&h+d>=n&&(o=h>c?c/h:1),parseFloat(r)*n*o/100},_getTotalWidth:function(e,t){for(var n=0,i=0;i<e.length;i++){var o=e[i];o&&o!==R&&(n+=this._getRealColumnWidth(i,e,t))}return Math.ceil(n)},updateSize:function(e){var t,n,o,r=this,l=r.addWidgetPrefix("important-margin");void 0===r._hasHeight&&e&&e.is(":visible")&&e.width()&&((t=e.children("."+r.getWidgetContainerClass())).length&&t.detach(),r._hasHeight=!!((o=e).get(0).clientHeight-parseFloat(o.css("paddingTop"))-parseFloat(o.css("paddingBottom"))),n=e.width(),e.addClass(l),r._hasWidth=e.width()===n,e.removeClass(l),t.length&&t.appendTo(e))},publicMethods:function(){return["resize","updateDimensions"]},resize:function(){return!this.component._requireResize&&this.updateDimensions()},updateDimensions:function(e){var t=this;if(t._initPostRenderHandlers(),t._checkSize(e)){var n=t._resizeDeferred,o=t._resizeDeferred=new C.Deferred;return(0,C.when)(n).always((function(){l.default.deferRender((function(){t._dataController.isLoaded()&&t._synchronizeColumns(),t._resetGroupElementHeight(),l.default.deferUpdate((function(){l.default.deferRender((function(){l.default.deferUpdate((function(){t._updateDimensionsCore()}))}))}))})).done(o.resolve).fail(o.reject)})),o.promise()}},_resetGroupElementHeight:function(){var e=this.component.$element().children().get(0),t=this._rowsView.getScrollable();!e||!e.style.height||t&&t.scrollTop()||(e.style.height="")},_checkSize:function(e){var t=this.component.$element();return!(e&&(this._lastWidth===t.width()&&this._lastHeight===t.height()||!t.is(":visible")))},_setScrollerSpacingCore:function(e){var t=this,n=e?t._rowsView.getScrollbarWidth():0,o=t._rowsView.getScrollbarWidth(!0);l.default.deferRender((function(){t._columnHeadersView&&t._columnHeadersView.setScrollerSpacing(n),t._footerView&&t._footerView.setScrollerSpacing(n),t._rowsView.setScrollerSpacing(n,o)}))},_setScrollerSpacing:function(e){var t=this;!0===this.option("scrolling.useNative")?l.default.deferRender((function(){l.default.deferUpdate((function(){t._setScrollerSpacingCore(e)}))})):this._setScrollerSpacingCore(e)},_updateDimensionsCore:function(){var e,t=this,n=t._dataController,r=t._rowsView,d=t.component.$element(),h=d.children().get(0),f=d&&(d.get(0).clientHeight||d.height()),_=parseInt(d.css("maxHeight")),m=_&&f>=_,C=t.option("height")||d.get(0).style.height,w=t.getController("editorFactory"),v=m&&h.scrollHeight===h.offsetHeight;t.updateSize(d);var x=t._hasHeight||m;C&&t._hasHeight^"auto"!==C&&(e=(0,o.default)("<div>").height(C).appendTo(d),t._hasHeight=!!e.height(),e.remove()),l.default.deferRender((function(){r.height(null,x),m&&!v&&(0,o.default)(h).css("height",_),n.isLoaded()?l.default.deferUpdate((function(){t._updateLastSizes(d),t._setScrollerSpacing(x),(0,c.each)(T,(function(e,n){var view=t.getView(n);view&&view.resize()})),w&&w.resize()})):r.setLoading(n.isLoading())}))},_updateLastSizes:function(e){this._lastWidth=e.width(),this._lastHeight=e.height()},optionChanged:function(e){switch(e.name){case"width":case"height":this.component._renderDimensions(),this.resize();case"legacyRendering":case"renderAsync":return void(e.handled=!0);default:this.callBase(e)}},init:function(){var e=this;e._dataController=e.getController("data"),e._columnsController=e.getController("columns"),e._columnHeadersView=e.getView("columnHeadersView"),e._footerView=e.getView("footerView"),e._rowsView=e.getView("rowsView")}}),A=r.default.ViewController.inherit({_scrollChangedHandler:function(e,t,n){for(var o=0;o<e.length;o++)e[o]&&e[o].name!==n&&e[o].scrollTo({left:t.left,top:t.top})},init:function(){for(var e=[this.getView("columnHeadersView"),this.getView("footerView"),this.getView("rowsView")],i=0;i<e.length;i++){var view=e[i];view&&view.scrollChanged.add(this._scrollChangedHandler.bind(this,e))}}}),B=r.default.View.inherit({_endUpdateCore:function(){this.component._requireResize&&(this.component._requireResize=!1,this._resizingController.resize())},_getWidgetAriaLabel:function(){return"dxDataGrid-ariaDataGrid"},init:function(){var e=this;e._resizingController=e.getController("resizing"),e._dataController=e.getController("data")},getView:function(e){return this.component._views[e]},element:function(){return this._groupElement},optionChanged:function(e){var t=this;h.default.isDefined(t._groupElement)&&"showBorders"===e.name?(t._groupElement.toggleClass(t.addWidgetPrefix(F),!!e.value),e.handled=!0):t.callBase(e)},_renderViews:function(e){var t=this;(0,c.each)(T,(function(n,o){var view=t.getView(o);view&&view.render(e)}))},_getTableRoleName:function(){return"grid"},render:function(e){var t=this,n=!t._groupElement,r=t._groupElement||(0,o.default)("<div>").addClass(t.getWidgetContainerClass());r.addClass(V),r.toggleClass(t.addWidgetPrefix(F),!!t.option("showBorders")),t.setAria("role","presentation",e),t.component.setAria({role:this._getTableRoleName(),label:m.default.format(t._getWidgetAriaLabel())},r),t._rootElement=e||t._rootElement,n&&(t._groupElement=r,d.default.hasWindow()&&t.getController("resizing").updateSize(e),r.appendTo(e)),t._renderViews(r)},update:function(){var e=this,t=e._rootElement,n=e._groupElement,o=e.getController("resizing");t&&n&&(o.resize(),e._dataController.isLoaded()&&e._resizingController.fireContentReadyAction())}});e.exports={defaultOptions:function(){return{showBorders:!1,renderAsync:!1,legacyRendering:!1}},controllers:{resizing:k,synchronizeScrolling:A},views:{gridView:B}}},1733:function(e,t,n){"use strict";var o=f(n(0)),r=f(n(1072)),l=f(n(343)),d=n(6),c=n(2),h=n(34);function f(e){return e&&e.__esModule?e:{default:e}}n(1088);var _="toolbar-button",m=l.default.ColumnsView.inherit({_getToolbarItems:function(){return[]},_getButtonContainer:function(){return(0,o.default)("<div>").addClass(this.addWidgetPrefix(_))},_getToolbarButtonClass:function(e){var t=e?" "+e:"";return this.addWidgetPrefix(_)+t},_getToolbarOptions:function(){var e={toolbarOptions:{items:this._getToolbarItems(),onItemRendered:function(e){var t=e.itemData.onItemRendered;t&&t(e)}}};if(this.executeAction("onToolbarPreparing",e),e.toolbarOptions&&!(0,c.isDefined)(e.toolbarOptions.visible)){var t=e.toolbarOptions.items;e.toolbarOptions.visible=!(!t||!t.length)}return e.toolbarOptions},_renderCore:function(){this._toolbar?this._toolbar.option(this._toolbarOptions):(this.element().addClass(this.addWidgetPrefix("header-panel")),this._toolbar=this._createComponent((0,o.default)("<div>").appendTo(this.element()),r.default,this._toolbarOptions))},_columnOptionChanged:d.noop,_handleDataChanged:function(){this._requireReady&&this.render()},init:function(){this.callBase(),this.createAction("onToolbarPreparing",{excludeValidators:["disabled","readOnly"]})},render:function(){this._toolbarOptions=this._getToolbarOptions(),this.callBase.apply(this,arguments)},setToolbarItemDisabled:function(e,t){var n=this._toolbar;if(n){var o=n.option("items")||[],r=o.indexOf(o.filter((function(t){return t.name===e}))[0]);if(r>=0){var l="items["+r+"]";n.option(l+".options")?n.option(l+".options.disabled",t):n.option(l+".disabled",t)}}},updateToolbarDimensions:function(){this._toolbar&&(0,h.triggerResizeEvent)(this.getHeaderPanel())},getHeaderPanel:function(){return this.element()},getHeight:function(){return this.getElementHeight()},optionChanged:function(e){"onToolbarPreparing"===e.name&&(this._invalidate(),e.handled=!0),this.callBase(e)},isVisible:function(){return this._toolbarOptions&&this._toolbarOptions.visible},allowDragging:d.noop});e.exports={defaultOptions:function(){return{}},views:{headerPanel:m},extenders:{controllers:{resizing:{_updateDimensionsCore:function(){this.callBase.apply(this,arguments),this.getView("headerPanel").updateToolbarDimensions()}}}}}},1747:function(e,t,n){"use strict";var o=f(n(0)),r=f(n(71)),l=n(6),d=n(10),c=n(2),h=n(19);function f(e){return e&&e.__esModule?e:{default:e}}var _,m="dx-master-detail-cell",C="dx-master-detail-row",w="dx-cell-focus-disabled";e.exports={defaultOptions:function(){return{masterDetail:{enabled:!1,autoExpandAll:!1,template:null}}},extenders:{controllers:{columns:{_getExpandColumnsCore:function(){var e=this.callBase();return this.option("masterDetail.enabled")&&e.push({type:"detailExpand",cellTemplate:r.default.getExpandCellTemplate()}),e}},data:(_=function(e){e._expandedItems=[],e._isExpandAll=e.option("masterDetail.autoExpandAll")},{init:function(){_(this),this.callBase()},expandAll:function(e){var t=this;e<0?(t._isExpandAll=!0,t._expandedItems=[],t.updateItems()):t.callBase.apply(t,arguments)},collapseAll:function(e){var t=this;e<0?(t._isExpandAll=!1,t._expandedItems=[],t.updateItems()):t.callBase.apply(t,arguments)},isRowExpanded:function(e){var t=this,n=r.default.getIndexByKey(e,t._expandedItems);return Array.isArray(e)?t.callBase.apply(t,arguments):!!(t._isExpandAll^(n>=0&&t._expandedItems[n].visible))},_getRowIndicesForExpand:function(e){var t=this.getRowIndexByKey(e);return[t,t+1]},_changeRowExpandCore:function(e){var t,n=this;if(Array.isArray(e))t=n.callBase.apply(n,arguments);else{var o=r.default.getIndexByKey(e,n._expandedItems);if(o>=0){var l=n._expandedItems[o].visible;n._expandedItems[o].visible=!l}else{n._expandedItems.push({key:e,visible:!0});var d=n.getController("editing");d&&d.correctEditRowIndexAfterExpand(e)}n.updateItems({changeType:"update",rowIndices:n._getRowIndicesForExpand(e)}),t=(new h.Deferred).resolve()}return t},_processDataItem:function(data,e){var t=this,n=t.callBase.apply(t,arguments);return n.isExpanded=t.isRowExpanded(n.key),void 0===e.detailColumnIndex&&(e.detailColumnIndex=-1,(0,d.each)(e.visibleColumns,(function(t,n){if("expand"===n.command&&!(0,c.isDefined)(n.groupIndex))return e.detailColumnIndex=t,!1}))),e.detailColumnIndex>=0&&(n.values[e.detailColumnIndex]=n.isExpanded),n},_processItems:function(e,t){var n=this,o=t.changeType,c=[];return e=n.callBase.apply(n,arguments),"loadingAll"===o?e:("refresh"===o&&(n._expandedItems=(0,l.grep)(n._expandedItems,(function(e){return e.visible}))),(0,d.each)(e,(function(e,t){c.push(t);var o=r.default.getIndexByKey(t.key,n._expandedItems);"data"===t.rowType&&(t.isExpanded||o>=0)&&!t.isNewRow&&c.push({visible:t.isExpanded,rowType:"detail",key:t.key,data:t.data,values:[]})})),c)},optionChanged:function(e){var t,n;if("masterDetail"===e.name){switch(e.name="dataSource",e.fullName){case"masterDetail":var o=e.value||{},r=e.previousValue||{};t=o.enabled!==r.enabled,n=o.autoExpandAll!==r.autoExpandAll;break;case"masterDetail.enabled":t=!0;break;case"masterDetail.autoExpandAll":n=!0}(t||n)&&_(this)}this.callBase(e)}}),resizing:{fireContentReadyAction:function(){this.callBase.apply(this,arguments),this._updateParentDataGrids(this.component.$element())},_updateParentDataGrids:function(e){var t=this,n=e.closest(".dx-master-detail-row");n.length&&(0,h.when)(this._updateMasterDataGrid(n,e)).done((function(){t._updateParentDataGrids(n.parent())}))},_updateMasterDataGrid:function(e,t){var n=(0,o.default)(e).data("options"),r=(0,o.default)(e).closest("."+this.getWidgetContainerClass()).parent().data("dxDataGrid");if(n&&r){if(!r.getView("rowsView").isFixedColumns()){var l=r.getScrollable();return l&&l.update()}this._updateFixedMasterDetailGrids(r,n.rowIndex,t)}},_updateFixedMasterDetailGrids:function(e,t,n){var r=this,l=(0,o.default)(e.getRowElement(t));if(l&&2===l.length&&l.eq(0).height()!==l.eq(1).height()){var d=n.width();return e.updateDimensions().done((function(){var t=r.option("columnAutoWidth")&&!0===e.option("scrolling.useNative"),o=t&&d!==n.width();t&&o&&r.updateDimensions()}))}},_toggleBestFitMode:function(e){if(this.callBase.apply(this,arguments),this.option("masterDetail.template")){var t=this._rowsView.getTableElement();t&&t.find(".dx-master-detail-cell").css("maxWidth",e?0:"")}}}},views:{rowsView:{_getCellTemplate:function(e){var t=this,n=e.column,o=t.getController("editing"),r=o&&o.isEditRow(e.rowIndex);return"detail"!==n.command||r?t.callBase.apply(t,arguments):t.option("masterDetail.template")||{allowRenderToDetachedContainer:!1,render:t._getDefaultTemplate(n)}},_isDetailRow:function(e){return e&&e.rowType&&0===e.rowType.indexOf("detail")},_createRow:function(e){var t=this.callBase(e);return e&&this._isDetailRow(e)&&(this.option("showRowLines")&&t.addClass("dx-row-lines"),t.addClass(C),(0,c.isDefined)(e.visible)&&t.toggle(e.visible)),t},_renderCells:function(e,t){var n=t.row,o=this._columnsController.getVisibleColumns();n.rowType&&this._isDetailRow(n)?this._needRenderCell(0,t.columnIndices)&&this._renderCell(e,{value:null,row:n,rowIndex:n.rowIndex,column:{command:"detail"},columnIndex:0}).addClass(w).addClass(m).attr("colSpan",o.length):this.callBase.apply(this,arguments)}}}}}},1791:function(e,t,n){"use strict";var o=V(n(14)),r=V(n(76)),l=V(n(342)),d=V(n(71)),c=n(1792),h=V(n(30)),f=V(n(58)),_=n(70),m=n(10),C=n(2),w=n(75),v=n(1),x=n(183),y=V(n(117)),F=n(211),I=n(19),E=n(188);function V(e){return e&&e.__esModule?e:{default:e}}var R={month:function(e){return y.default.getMonthNames()[e-1]},quarter:function(e){return y.default.format(new Date(2e3,3*e-1),"quarter")}},T=r.default.ViewController.inherit({init:function(){this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._headerFilterView=this.getView("headerFilterView")},_updateSelectedState:function(e,t){for(var i=e.length,n="exclude"===t.filterType;i--;){var o=e[i];"items"in e[i]&&this._updateSelectedState(e[i].items,t),(0,c.updateHeaderFilterItemSelectionState)(o,d.default.getIndexByKey(e[i].value,t.filterValues,null)>-1,n)}},_normalizeGroupItem:function(e,t,n){var o,r,path=n.path,l=n.valueSelector,d=n.displaySelector,c=n.column;return l&&d?(o=l(e),r=d(e)):r=o=e.key,e=(0,C.isObject)(e)?(0,v.extend)({},e):{},path.push(o),1===path.length?e.value=path[0]:e.value=path.join("/"),e.text=this.getHeaderItemText(r,c,t,n.headerFilterOptions),e},getHeaderItemText:function(e,t,n,o){var text=d.default.formatValue(e,function(e,t,n){var o=l.default.getGroupInterval(t),r=d.default.getFormatOptionsByColumn(t,"headerFilter");return o&&(r.groupInterval=o[n],d.default.isDateType(t.dataType)?r.format=R[o[n]]:"number"===t.dataType&&(r.getDisplayFormat=function(){var r={format:t.format,target:"headerFilter"},l=d.default.formatValue(e,r),c=e+o[n],h=d.default.formatValue(c,r);return l&&h?l+" - "+h:""})),r}(e,t,n));return text||(text=o.texts.emptyValue),text},_processGroupItems:function(e,t,path,n){var o,r,l=n.column.lookup,d=n.level;path=path||[],t=t||0,l&&(o=(0,_.compileGetter)(l.displayExpr),r=(0,_.compileGetter)(l.valueExpr));for(var i=0;i<e.length;i++)e[i]=this._normalizeGroupItem(e[i],t,{column:n.column,headerFilterOptions:n.headerFilterOptions,displaySelector:o,valueSelector:r,path:path}),"items"in e[i]&&(t!==d&&(0,C.isDefined)(e[i].value)?this._processGroupItems(e[i].items,t+1,path,n):delete e[i].items),path.pop()},getDataSource:function(e){var t=this,n=t._dataController.dataSource(),o=d.default.getHeaderFilterGroupParameters(e,n&&n.remoteOperations().grouping),r=e.headerFilter&&e.headerFilter.dataSource,l=t.option("headerFilter"),c=!1,h={component:t.component};if(n){if((0,C.isDefined)(r)&&!(0,C.isFunction)(r))h.dataSource=(0,x.normalizeDataSourceOptions)(r);else if(e.lookup){var f;c=!0,e.lookup.items?f=e.lookup.items:(f=e.lookup.dataSource,(0,C.isFunction)(f)&&!(0,F.isWrapped)(f)&&(f=f({}))),h.dataSource=(0,x.normalizeDataSourceOptions)(f)}else{var _=Array.isArray(o)?o.length-1:0;t._currentColumn=e;var filter=t._dataController.getCombinedFilter();t._currentColumn=null,h.dataSource={filter:filter,group:o,useDefaultSearch:!0,load:function(o){var r=new I.Deferred;return o.dataField=e.dataField||e.name,n.load(o).done((function(data){t._processGroupItems(data,null,null,{level:_,column:e,headerFilterOptions:l}),r.resolve(data)})).fail(r.reject),r}}}(0,C.isFunction)(r)&&r.call(e,h);var m=h.dataSource.postProcess;return h.dataSource.postProcess=function(data){var n=data;return c&&(0!==this.pageIndex()||this.searchValue()||(n=n.slice(0)).unshift(null),t._processGroupItems(n,null,null,{level:0,column:e,headerFilterOptions:l})),n=m&&m.call(this,n)||n,t._updateSelectedState(n,e),n},h.dataSource}},getCurrentColumn:function(){return this._currentColumn},showHeaderFilterMenu:function(e,t){var n=this._columnsController,o=(0,v.extend)(!0,{},this._columnsController.getColumns()[e]);if(o){var r=n.getVisibleIndex(e),view=t?this.getView("headerPanel"):this.getView("columnHeadersView"),l=l||view.getColumnElements().eq(t?o.groupIndex:r);this.showHeaderFilterMenuBase({columnElement:l,column:o,applyFilter:!0,apply:function(){n.columnOption(e,{filterValues:this.filterValues,filterType:this.filterType})}})}},showHeaderFilterMenuBase:function(e){var t=this,n=this,o=e.column;if(o){var r=l.default.getGroupInterval(o),d=n._dataController.dataSource(),c=d&&d.remoteOperations().filtering;(0,v.extend)(e,o,{type:r&&r.length>1?"tree":"list",remoteFiltering:c,onShowing:function(t){var o=t.component.overlayContent().dxResizable("instance");o&&o.option("onResizeEnd",(function(t){var o=n.getController("columns"),r=o.columnOption(e.dataField,"headerFilter");(r=r||{}).width=t.width,r.height=t.height,o.columnOption(e.dataField,"headerFilter",r,!0)}))},onHidden:function(){return(0,E.restoreFocus)(t)}}),e.dataSource=n.getDataSource(e),e.isFilterBuilder&&(e.dataSource.filter=null,e.alignment="right"),n._headerFilterView.showHeaderFilterMenu(e.columnElement,e)}},hideHeaderFilterMenu:function(){this._headerFilterView.hideHeaderFilterMenu()}}),S=(0,v.extend)({},c.headerFilterMixin,{_renderCellContent:function(e,t){var n,o=this,r=t.column;!r.command&&(0,c.allowHeaderFiltering)(r)&&o.option("headerFilter.visible")&&"header"===t.rowType&&(n=o._applyColumnState({name:"headerFilter",rootElement:e,column:r,showColumnLines:o.option("showColumnLines")}))&&o._subscribeToIndicatorEvent(n,r,"headerFilter"),o.callBase(e,t)},_subscribeToIndicatorEvent:function(e,t,n){var r=this;"headerFilter"===n&&o.default.on(e,f.default.name,r.createAction((function(e){e.event.stopPropagation(),r.getController("headerFilter").showHeaderFilterMenu(t.index,!1)})))},_updateIndicator:function(e,t,n){var o=this.callBase(e,t,n);o&&this._subscribeToIndicatorEvent(o,t,n)},_updateHeaderFilterIndicators:function(){this.option("headerFilter.visible")&&this._updateIndicators("headerFilter")},_needUpdateFilterIndicators:function(){return!0},_columnOptionChanged:function(e){var t=e.optionNames;d.default.checkChanges(t,["filterValues","filterType"])?this._needUpdateFilterIndicators()&&this._updateHeaderFilterIndicators():this.callBase(e)}}),P=(0,v.extend)({},c.headerFilterMixin,{_createGroupPanelItem:function(e,t){var n,r=this,l=r.callBase.apply(r,arguments);return!t.command&&(0,c.allowHeaderFiltering)(t)&&r.option("headerFilter.visible")&&(n=r._applyColumnState({name:"headerFilter",rootElement:l,column:{alignment:(0,w.getDefaultAlignment)(r.option("rtlEnabled")),filterValues:t.filterValues,allowHeaderFiltering:!0},showColumnLines:!0}))&&o.default.on(n,f.default.name,r.createAction((function(e){e.event.stopPropagation(),r.getController("headerFilter").showHeaderFilterMenu(t.index,!0)}))),l}});var D={skipCalculateColumnFilters:function(){return!1},_calculateAdditionalFilter:function(){if(this.skipCalculateColumnFilters())return this.callBase();var e=this,t=[e.callBase()],n=e._columnsController.getVisibleColumns(null,!0),o=e.getController("headerFilter").getCurrentColumn();return(0,m.each)(n,(function(e,n){var filter;if((!o||o.index!==n.index)&&(0,c.allowHeaderFiltering)(n)&&n.calculateFilterExpression&&Array.isArray(n.filterValues)&&n.filterValues.length){var r=[];(0,m.each)(n.filterValues,(function(e,t){Array.isArray(t)?filter=t:(n.deserializeValue&&!d.default.isDateType(n.dataType)&&"number"!==n.dataType&&(t=n.deserializeValue(t)),filter=n.createFilterExpression(t,"=","headerFilter")),filter&&(filter.columnIndex=n.index),r.push(filter)})),r=d.default.combineFilters(r,"or"),t.push("exclude"===n.filterType?["!",r]:r)}})),d.default.combineFilters(t)}};e.exports={invertFilterExpression:function(filter){return["!",filter]},defaultOptions:function(){return{headerFilter:{visible:!1,width:252,height:325,allowSearch:!1,searchTimeout:500,texts:{emptyValue:h.default.format("dxDataGrid-headerFilterEmptyValue"),ok:h.default.format("dxDataGrid-headerFilterOK"),cancel:h.default.format("dxDataGrid-headerFilterCancel")}}}},controllers:{headerFilter:T},views:{headerFilterView:c.HeaderFilterView},extenders:{controllers:{data:D},views:{columnHeadersView:S,headerPanel:P}}}},1792:function(e,t,n){"use strict";var o=C(n(0)),r=C(n(76)),l=C(n(71)),d=n(2),c=n(10),h=n(1),f=C(n(138)),_=C(n(295)),m=C(n(292));function C(e){return e&&e.__esModule?e:{default:e}}var w="dx-header-filter";function v(e){e=e||[];for(var i=0;i<e.length;i++)e[i].selected=!1,v(e[i].items)}function x(e,t){if(!e.component.option("searchValue")){var n=(0,o.default)(e.element).find(".dx-list-select-all-checkbox").data("dxCheckBox");n&&t&&t.length&&n.option("value",void 0)}}function y(e,t){var n=t.headerFilter;return n&&(0,d.isDefined)(n.allowSearch)?n.allowSearch:e.option("headerFilter.allowSearch")}t.updateHeaderFilterItemSelectionState=function(e,t,n){if(t^n){if(e.selected=!0,n&&e.items)for(var o=0;o<e.items.length;o++)if(!e.items[o].selected){e.selected=void 0;break}}else(n||e.selected)&&(e.selected=!1,v(e.items))},t.HeaderFilterView=r.default.View.inherit({getPopupContainer:function(){return this._popupContainer},getListContainer:function(){return this._listContainer},applyHeaderFilter:function(e){var t=this.getListContainer(),n=t.option("searchValue"),o=[];!n&&!e.isFilterBuilder&&t.$element().find(".dx-checkbox").eq(0).hasClass("dx-checkbox-checked")?("tree"===e.type&&(e.filterType="exclude"),Array.isArray(e.filterValues)&&(e.filterValues=[])):"tree"===e.type&&(e.filterType&&(e.filterType="include"),function e(o,r,l){(0,c.each)(r,(function(r,d){if(void 0!==d.selected&&!!d.selected^l){var c=t._getNode(d),h=t._hasChildren(c)&&d.items&&d.items.some((function(e){return e.selected}));if(!n||!h)return void o.push(d.value)}d.items&&d.items.length&&e(o,d.items,l)}))}(o,t.option("items"),!1),e.filterValues=o),e.filterValues&&!e.filterValues.length&&(e.filterValues=null),e.apply(),this.hideHeaderFilterMenu()},showHeaderFilterMenu:function(e,t){var n=this;if(t){n._initializePopupContainer(t);var o=n.getPopupContainer();n.hideHeaderFilterMenu(),n.updatePopup(e,t),o.show()}},hideHeaderFilterMenu:function(){var e=this.getPopupContainer();e&&e.hide()},updatePopup:function(e,t){var n=this,o="right"===t.alignment?"left":"right";n._popupContainer&&(n._cleanPopupContent(),n._popupContainer.option("position",{my:o+" top",at:o+" bottom",of:e,collision:"flip fit"}))},_getSearchExpr:function(e){var t=e.lookup,n=e.useDefaultSearchExpr,o=e.headerFilter&&e.headerFilter.dataSource;if(n||(0,d.isDefined)(o)&&!(0,d.isFunction)(o))return"text";if(t)return t.displayExpr||"this";if(e.dataSource){var r=e.dataSource.group;if(Array.isArray(r)&&r.length>0)return r[0].selector;if((0,d.isFunction)(r)&&!e.remoteFiltering)return r}return e.dataField||e.selector},_cleanPopupContent:function(){this._popupContainer&&this._popupContainer.$content().empty()},_initializePopupContainer:function(e){var t=this,n=t.element(),o=t.option("headerFilter"),r={width:e.headerFilter&&e.headerFilter.width||o&&o.width,height:e.headerFilter&&e.headerFilter.height||o&&o.height,visible:!1,shading:!1,showTitle:!1,showCloseButton:!1,closeOnTargetScroll:!1,dragEnabled:!1,closeOnOutsideClick:!0,focusStateEnabled:!1,toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:o.texts.ok,onClick:function(){t.applyHeaderFilter(e)}}},{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:o.texts.cancel,onClick:function(){t.hideHeaderFilterMenu()}}}],resizeEnabled:!0,onShowing:function(n){n.component.$content().parent().addClass("dx-dropdowneditor-overlay"),t._initializeListContainer(e),e.onShowing&&e.onShowing(n)},onShown:function(){t.getListContainer().focus()},onHidden:e.onHidden,onInitialized:function(e){var component=e.component;component.option("animation",component._getDefaultOptions().animation)}};(0,d.isDefined)(t._popupContainer)?t._popupContainer.option(r):t._popupContainer=t._createComponent(n,f.default,r)},_initializeListContainer:function(e){var t=this,n=t._popupContainer.$content(),r={searchEnabled:y(t,e),searchTimeout:t.option("headerFilter.searchTimeout"),searchMode:e.headerFilter&&e.headerFilter.searchMode||"",dataSource:e.dataSource,onContentReady:function(){t.renderCompleted.fire()},itemTemplate:function(data,t,element){var n=(0,o.default)(element);return e.encodeHtml?n.text(data.text):n.html(data.text)}};function d(n){"searchValue"!==n.fullName||e.isFilterBuilder||!1===t.option("headerFilter.hideSelectAllOnSearch")||("tree"===e.type?n.component.option("showCheckBoxesMode",n.value?"normal":"selectAll"):n.component.option("selectionMode",n.value?"multiple":"all"))}"tree"===e.type?t._listContainer=t._createComponent((0,o.default)("<div>").appendTo(n),_.default,(0,h.extend)(r,{showCheckBoxesMode:e.isFilterBuilder?"normal":"selectAll",onOptionChanged:d,keyExpr:"id"})):t._listContainer=t._createComponent((0,o.default)("<div>").appendTo(n),m.default,(0,h.extend)(r,{searchExpr:t._getSearchExpr(e),pageLoadMode:"scrollBottom",showSelectionControls:!0,selectionMode:e.isFilterBuilder?"multiple":"all",onOptionChanged:d,onSelectionChanged:function(t){var n=t.component.option("items"),o=t.component.option("selectedItems");if(!t.component._selectedItemsUpdating&&!t.component.option("searchValue")&&!e.isFilterBuilder){var r=e.filterValues||[],d="exclude"===e.filterType;0===o.length&&n.length&&(r.length<=1||d&&r.length===n.length-1)?(e.filterType="include",e.filterValues=[]):o.length===n.length&&(e.filterType="exclude",e.filterValues=[])}(0,c.each)(n,(function(t,n){var r=l.default.getIndexByKey(n,o,null)>=0;if(!!n.selected!==r){n.selected=r,e.filterValues=e.filterValues||[];var d=l.default.getIndexByKey(n.value,e.filterValues,null);d>=0&&e.filterValues.splice(d,1),r^"exclude"===e.filterType&&e.filterValues.push(n.value)}})),x(t,e.filterValues)},onContentReady:function(t){var component=t.component,n=component.option("items"),o=[];(0,c.each)(n,(function(){this.selected&&o.push(this)})),component._selectedItemsUpdating=!0,component.option("selectedItems",o),component._selectedItemsUpdating=!1,x(t,e.filterValues)}}))},_renderCore:function(){this.element().addClass("dx-header-filter-menu")}});var F=t.allowHeaderFiltering=function(e){return(0,d.isDefined)(e.allowHeaderFiltering)?e.allowHeaderFiltering:e.allowFiltering};t.headerFilterMixin={_applyColumnState:function(e){var t,n=e.rootElement,o=e.column;return"headerFilter"===e.name?(n.find(".dx-header-filter").remove(),F(o)&&(t=this.callBase(e).toggleClass("dx-header-filter-empty",this._isHeaderFilterEmpty(o)),this.option("useLegacyKeyboardNavigation")||t.attr("tabindex",this.option("tabindex")||0)),t):this.callBase(e)},_isHeaderFilterEmpty:function(e){return!e.filterValues||!e.filterValues.length},_getIndicatorClassName:function(e){return"headerFilter"===e?w:this.callBase(e)},_renderIndicator:function(e){var t=e.container,n=e.indicator;if("headerFilter"===e.name){var o=this.option("rtlEnabled");if(t.children().length&&(!o&&"right"===e.columnAlignment||o&&"left"===e.columnAlignment))return void t.prepend(n)}this.callBase(e)},optionChanged:function(e){if("headerFilter"===e.name){var t="columnHeadersView"===this.name;this._invalidate(t,t),e.handled=!0}else this.callBase(e)}}},1806:function(e,t,n){"use strict";var o=h(n(76)),r=h(n(1807)),l=n(35),d=n(2),c=n(20);function h(e){return e&&e.__esModule?e:{default:e}}var f=function(e){return 1+(parseInt(e.pageIndex())||0)},_=o.default.View.inherit({init:function(){var e=this,t=e.getController("data");e._isVisible=!1,t.changed.add((function(n){if(n&&n.repaintChangesOnly){var o=e._getPager();o?o.option({pageIndex:f(t),pageSize:t.pageSize(),pageCount:t.pageCount(),totalCount:t.totalCount(),hasKnownLastPage:t.hasKnownLastPage()}):e.render()}else(!n||"update"!==n.changeType&&"updateSelection"!==n.changeType)&&e.render()}))},_getPager:function(){var e=this.element();return e&&e.data("dxPager")},_renderCore:function(){var e=this,t=e.element().addClass(e.addWidgetPrefix("pager")),n=e.option("pager")||{},o=e.getController("data"),l=e.getController("keyboardNavigation"),c={maxPagesCount:10,pageIndex:f(o),pageCount:o.pageCount(),pageSize:o.pageSize(),showPageSizes:n.showPageSizeSelector,showInfo:n.showInfo,pagesNavigatorVisible:n.visible,showNavigationButtons:n.showNavigationButtons,pageSizes:e.getPageSizes(),totalCount:o.totalCount(),hasKnownLastPage:o.hasKnownLastPage(),pageIndexChanged:function(e){o.pageIndex()!==e-1&&setTimeout((function(){o.pageIndex(e-1)}))},pageSizeChanged:function(e){setTimeout((function(){o.pageSize(e)}))},onKeyDown:function(e){return l&&l.executeAction("onKeyDown",e)},useLegacyKeyboardNavigation:this.option("useLegacyKeyboardNavigation"),useKeyboard:this.option("keyboardNavigation.enabled")};(0,d.isDefined)(n.infoText)&&(c.infoText=n.infoText),e._createComponent(t,r.default,c)},getPageSizes:function(){var e=this,t=e.getController("data"),n=e.option("pager"),o=n&&n.allowedPageSizes,r=t.pageSize();return(0,d.isDefined)(e._pageSizes)&&-1!==(0,l.inArray)(r,e._pageSizes)||(e._pageSizes=[],n&&(Array.isArray(o)?e._pageSizes=o:o&&r>1&&(e._pageSizes=[Math.floor(r/2),r,2*r]))),e._pageSizes},isVisible:function(){var e=this,t=e.getController("data"),n=e.option("pager"),o=n&&n.visible,r=e.option("scrolling");return!!e._isVisible||("auto"===o&&(o=(!r||"virtual"!==r.mode&&"infinite"!==r.mode)&&(t.pageCount()>1||t.isLoaded()&&!t.hasKnownLastPage())),e._isVisible=o,o)},getHeight:function(){return this.getElementHeight()},optionChanged:function(e){var t=this,n=e.name,o="pager"===n,r="paging"===n,l="dataSource"===n,d="scrolling"===n,h=t.getController("data");if(o||r||d||l){if(e.handled=!0,h.skipProcessingPagingChange(e.fullName))return;(o||r)&&(t._pageSizes=null),(o||r||d)&&(t._isVisible=!1),l||(t._invalidate(),(0,c.hasWindow)()&&o&&t.component&&t.component.resize())}}});e.exports={defaultOptions:function(){return{pager:{visible:"auto",showPageSizeSelector:!1,allowedPageSizes:"auto"}}},views:{pagerView:_}}},1811:function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=T(n(0)),l=T(n(27)),d=T(n(14)),c=T(n(76)),h=n(71),f=n(2),_=n(35),m=n(148),C=R(n(21)),w=T(n(68)),v=T(n(58)),x=n(6),y=R(n(188)),F=T(n(50)),I=n(337),E=T(n(29));function V(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return V=function(){return e},e}function R(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=V();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var desc=r?Object.getOwnPropertyDescriptor(e,l):null;desc&&(desc.get||desc.set)?Object.defineProperty(n,l,desc):n[l]=e[l]}return n.default=e,t&&t.set(e,n),n}function T(e){return e&&e.__esModule?e:{default:e}}var S="rowsview",P="edit-form",D="dx-row",H="dx-freespace-row",k="dx-master-detail-cell",A="dx-editor-cell",B="dx-command-expand",N="dx-command-select",K="[class^=dx-command]",M="dx-cell-focus-disabled",z="dx-state-focused",O="delete",W="input:not([type='hidden']), textarea, a, select, button, [tabindex]",L="form",G="cell",$="cell",U="columnHeadersView";function j(e){return e&&e.hasClass("dx-group-row")}function J(e){return e&&e.hasClass("dx-master-detail-row")}function Q(e){return e&&!j(e)&&!J(e)}function X(e){return e.length&&"TD"===e[0].tagName}function Y(e,t){return!e._isRowEditMode()&&t&&!t.hasClass(N)&&t.hasClass(A)}function Z(e){return(0,f.isDefined)(e)&&e.length>0}function ee(){return"desktop"!==E.default.current().deviceType}function te(e){return!!e.parent(".".concat("dx-header-row")).length}var ie=c.default.ViewController.inherit({init:function(){var e=this;e.isKeyboardEnabled()&&(y.subscribeVisibilityChange(),e._dataController=e.getController("data"),e._selectionController=e.getController("selection"),e._editingController=e.getController("editing"),e._headerPanel=e.getView("headerPanel"),e._columnsController=e.getController("columns"),e._fastEditingStarted=!1,e._focusedCellPosition={},e._canceledCellPosition=null,e.getController("editorFactory").focused.add((function(t){e.setupFocusedView(),e._isNeedScroll&&t.is(":visible")&&e._focusedView&&e._focusedView.getScrollable&&(e._focusedView._scrollToElement(t),e._isNeedScroll=!1)})),e._initViewHandlers(),e._initDocumentHandlers(),e.createAction("onKeyDown"))},_initViewHandlers:function(){var e=this,t=this.createAction(this._pointerEventHandler),n=this.getView("rowsView");n.renderCompleted.add((function(o){var l=n.element(),c=!o||"refresh"===o.changeType,h=e._focusedView&&e._focusedView.name===n.name,f=o&&("append"===o.changeType||"prepend"===o.changeType),_=".".concat(D," > td, .").concat(D),m=(0,r.default)(":focus"),x=!m.length||m.closest(l).length||F.default.msie&&m.is("body"),y=ee()?v.default.name:w.default.down;d.default.off(l,C.addNamespace(y,"dxDataGridKeyboardNavigation"),t),d.default.on(l,C.addNamespace(y,"dxDataGridKeyboardNavigation"),_,t),e._initKeyDownHandler(l,(function(t){return e._keyDownHandler(t)})),e._setRowsViewAttributes(l),h&&x&&(e._isNeedFocus?!f:e._isHiddenFocus&&c)&&e._updateFocus(!0)}))},_resetFocusedView:function(){this._focusedView=null,this._resetFocusedCell()},_initDocumentHandlers:function(){var e=this,t=l.default.getDocument();e._documentClickHandler=e.createAction((function(t){var n=(0,r.default)(t.event.target),o=e._isEventInCurrentGrid(t.event)&&n.closest(".".concat(e.addWidgetPrefix(S))).length,l=n.closest(".".concat("dx-dropdowneditor-overlay")).length;o||l||e._resetFocusedView()})),d.default.on(t,C.addNamespace(w.default.down,"dxDataGridKeyboardNavigation"),e._documentClickHandler)},_setRowsViewAttributes:function(e){!this._dataController.getVisibleRows().length&&this._applyTabIndexToElement(e)},_initKeyDownHandler:function(element,e){I.keyboard.off(this._keyDownListener),this._keyDownListener=I.keyboard.on(element,null,e)},dispose:function(){this.callBase(),this._focusedView=null,I.keyboard.off(this._keyDownListener),d.default.off(l.default.getDocument(),C.addNamespace(w.default.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler),y.unsubscribeVisibilityChange()},optionChanged:function(e){switch(e.name){case"keyboardNavigation":case"useLegacyKeyboardNavigation":e.handled=!0;break;default:this.callBase(e)}},isRowFocusType:function(){return"row"===this.focusType},isCellFocusType:function(){return this.focusType===$},setRowFocusType:function(){this.option("focusedRowEnabled")&&(this.focusType="row")},setCellFocusType:function(){this.focusType=$},_keyDownHandler:function(e){var t=this._editingController.isEditing(),n=!0,o=e.originalEvent,r=this._processOnKeyDown(e);if(!o.isDefaultPrevented()&&(this._isNeedFocus=!0,this._isNeedScroll=!0,this._updateFocusedCellPositionByTarget(o.target),!r)){switch(e.keyName){case"leftArrow":case"rightArrow":this._leftRightKeysHandler(e,t);break;case"upArrow":case"downArrow":e.ctrl?y.selectView("rowsView",this,o):this._upDownKeysHandler(e,t);break;case"pageUp":case"pageDown":this._pageUpDownKeyHandler(e);break;case"space":this._spaceKeyHandler(e,t);break;case"A":e.ctrl?this._ctrlAKeyHandler(e,t):this._beginFastEditing(e.originalEvent);break;case"tab":this._tabKeyHandler(e,t);break;case"enter":this._enterKeyHandler(e,t);break;case"escape":this._escapeKeyHandler(e,t);break;case"F":e.ctrl?this._ctrlFKeyHandler(e):this._beginFastEditing(e.originalEvent);break;case"F2":this._f2KeyHandler();break;case"del":case"backspace":this._isFastEditingAllowed()&&!this._isFastEditingStarted()&&this._beginFastEditing(o,!0);break;default:this._beginFastEditing(o)||(this._isNeedFocus=!1,this._isNeedScroll=!1,n=!1)}n&&o.stopPropagation()}},_processOnKeyDown:function(e){var t=e.originalEvent,n={handled:!1,event:t};return this.executeAction("onKeyDown",n),e.ctrl=t.ctrlKey,e.alt=t.altKey,e.shift=t.shiftKey,!!n.handled},_closeEditCell:function(){var e=this;setTimeout((function(){e._editingController.closeEditCell()}))},_leftRightKeysHandler:function(e,t){var n=this.getVisibleRowIndex(),o=e.originalEvent,r=this._focusedView&&this._focusedView.getRow(n),l=this._getDirectionCodeByKey(e.keyName),d=this._isFastEditingStarted();if((!t||d)&&Q(r)){this.setCellFocusType(),d&&this._closeEditCell();var c=this._getNextCell(l);Z(c)&&this._arrowKeysHandlerFocusCell(o,c),o&&o.preventDefault()}},_upDownKeysHandler:function(e,t){var n=this.getVisibleRowIndex(),o=this._focusedView&&this._focusedView.getRow(n),r=e.originalEvent,l="upArrow"===e.keyName,d=this._dataController.dataSource(),c=this._isFastEditingStarted();if((!t||c)&&o&&!J(o)){if(c&&this._closeEditCell(),!this._navigateNextCell(r,e.keyName)&&this._isVirtualScrolling()&&l&&d&&!d.isLoading()){var h=o.outerHeight();n=this._focusedCellPosition.rowIndex-1,this._scrollBy(-h,n,r)}r&&r.preventDefault()}},_pageUpDownKeyHandler:function(e){var t=this._dataController.pageIndex(),n=this._dataController.pageCount(),o=this.option("paging.enabled"),r="pageUp"===e.keyName,l=r?-1:1,d=this.getView("rowsView").getScrollable();o&&!this._isVirtualScrolling()?(r?t>0:t<n-1)&&!this._isVirtualScrolling()&&(this._dataController.pageIndex(t+l),e.originalEvent.preventDefault()):d&&d._container().height()<d.$content().height()&&(this._scrollBy(d._container().height()*l),e.originalEvent.preventDefault())},_spaceKeyHandler:function(e,t){var n=this.getVisibleRowIndex(),o=(0,r.default)(e.originalEvent&&e.originalEvent.target);if(this.option("selection")&&"none"!==this.option("selection").mode&&!t){var l="row"===this._getElementType(o)&&this.isRowFocusType()&&Q(o);o.hasClass(N)&&"onClick"===this.option("selection.showCheckBoxesMode")&&this._selectionController.startSelectionWithCheckboxes(),(l||o.parent().hasClass("dx-data-row")||o.hasClass(this.addWidgetPrefix(S)))&&(this._selectionController.changeItemSelection(n,{shift:e.shift,control:e.ctrl}),e.originalEvent.preventDefault())}else this._beginFastEditing(e.originalEvent)},_ctrlAKeyHandler:function(e,t){!t&&e.ctrl&&!e.alt&&"multiple"===this.option("selection.mode")&&this.option("selection.allowSelectAll")&&(this._selectionController.selectAll(),e.originalEvent.preventDefault())},_tabKeyHandler:function(e,t){var n=this.option("editing"),o=e.shift?"previous":"next",l=!((0,f.isDefined)(this._focusedCellPosition)&&!(0,f.isEmptyObject)(this._focusedCellPosition))||!e.shift&&this._isLastValidCell(this._focusedCellPosition)||e.shift&&this._isFirstValidCell(this._focusedCellPosition),d=e.originalEvent.target,c=this._focusedView&&this._focusedView.element();if(!this._handleTabKeyOnMasterDetailCell(d,o)){if((0,r.default)(c).addClass(z),n&&d&&!l)if((0,r.default)(d).hasClass(this.addWidgetPrefix(S))&&this._resetFocusedCell(),t){if(!this._editingCellTabHandler(e,o))return}else this._targetCellTabHandler(e,o)&&(l=!0);l?(this.getController("editorFactory").loseFocus(),this._editingController.isEditing()&&!this._isRowEditMode()&&(this._resetFocusedCell(),this._closeEditCell())):e.originalEvent.preventDefault()}},_editingCellTabHandler:function(e,t){var n,o=e.originalEvent.target,r=this._getCellElementFromTarget(o),l=e.originalEvent,d=this._getElementType(o);if(r.is(K))return!this._targetCellTabHandler(e,t);this._updateFocusedCellPosition(r);var c=this._getNextCellByTabKey(l,t,d);if(!(r=c.$cell)||this._handleTabKeyOnMasterDetailCell(r,t))return!1;var h=this._columnsController.getVisibleColumns()[this.getView("rowsView").getCellIndex(r)],f=this._dataController.items()[this._getRowIndex(r&&r.parent())];if(h.allowEditing){var _=!f||"data"===f.rowType;n=this._editingController.allowUpdating({row:f})?_:f&&f.isNewRow}return n||this._closeEditCell(),this._focusCell(r,!c.isHighlighted)&&(!this._isRowEditMode()&&n?this._editingController.editCell(this.getVisibleRowIndex(),this._focusedCellPosition.columnIndex):this._focusInteractiveElement(r,e.shift)),!0},_targetCellTabHandler:function(e,t){var n,o=e.originalEvent,l=o.target,d=this._getCellElementFromTarget(l),c=this._getInteractiveElement(d,!e.shift),h=!1;if(!Y(this,d)&&c.length&&l!==c.get(0))h=!0;else{void 0===this._focusedCellPosition.rowIndex&&(0,r.default)(l).hasClass(D)&&this._updateFocusedCellPosition(d),n=this._getElementType(l),this.isRowFocusType()&&(this.setCellFocusType(),"row"===n&&Q((0,r.default)(l))&&(l=this.getFirstValidCellInRow((0,r.default)(l)),n=this._getElementType(l)));var f=this._getNextCellByTabKey(o,t,n);if(!(d=f.$cell))return!1;if(!(d=this._checkNewLineTransition(o,d)))return!1;this._focusCell(d,!f.isHighlighted),Y(this,d)||this._focusInteractiveElement(d,e.shift)}return h},_getNextCellByTabKey:function(e,t,n){var o=this._getNextCell(t,n),r=o&&this._fireFocusedCellChanging(e,o,!0);return!r||r.cancel?{}:(r.$newCellElement&&(o=r.$newCellElement),{$cell:o,isHighlighted:r.isHighlighted})},_checkNewLineTransition:function(e,t){var n=this.getVisibleRowIndex(),o=t.parent();if(n!==this._getRowIndex(o)){var r=this._getCellPosition(t),l=this._fireFocusedRowChanging(e,o);if(l.cancel)return;l.rowIndexChanged&&(this.setFocusedColumnIndex(r.columnIndex),t=this._getFocusedCell())}return t},_enterKeyHandler:function(e,t){var n=this._getFocusedCell(),o=this.getVisibleRowIndex(),r=this._focusedView&&this._focusedView.getRow(o);if(this.option("grouping.allowCollapsing")&&j(r)||this.option("masterDetail.enabled")&&n&&n.hasClass(B)){var l=this._dataController.getKeyByRowIndex(o),d=this._dataController.items()[o];void 0!==l&&d&&d.data&&!d.data.isContinuation&&this._dataController.changeRowExpand(l)}else this._processEnterKeyForDataCell(e,t)},_processEnterKeyForDataCell:function(e,t){var n=this._getEnterKeyDirection(e),o=this._allowEditingOnEnterKey();t||!o&&n?(this._handleEnterKeyEditingCell(e.originalEvent),"next"===n||"previous"===n?this._targetCellTabHandler(e,n):"upArrow"!==n&&"downArrow"!==n||this._navigateNextCell(e.originalEvent,n)):o&&this._startEditing(e)},_getEnterKeyDirection:function(e){var t=this.option("keyboardNavigation.enterKeyDirection"),n=e.shift;return"column"===t?n?"upArrow":"downArrow":"row"===t?n?"previous":"next":void 0},_handleEnterKeyEditingCell:function(e){var t=e.target,n=this._getCellElementFromTarget(t),o=this._isRowEditMode();this._updateFocusedCellPosition(n),o?(this._focusEditFormCell(n),setTimeout(this._editingController.saveEditData.bind(this._editingController))):(d.default.trigger((0,r.default)(t),"change"),this._closeEditCell(),e.preventDefault())},_escapeKeyHandler:function(e,t){var n=this._getCellElementFromTarget(e.originalEvent.target);t&&(this._updateFocusedCellPosition(n),this._isRowEditMode()?(this._focusEditFormCell(n),this._editingController.cancelEditData(),0===this._dataController.items().length&&(this._resetFocusedCell(),this.getController("editorFactory").loseFocus())):"cell"===this._editingController.getEditMode()?this._editingController.cancelEditData():this._closeEditCell(),e.originalEvent.preventDefault())},_ctrlFKeyHandler:function(e){if(this.option("searchPanel.visible")){var t=this._headerPanel.getSearchTextEditor();t&&(t.focus(),e.originalEvent.preventDefault())}},_f2KeyHandler:function(){var e=this._editingController.isEditing(),t=this.getVisibleRowIndex(),n=this._focusedView&&this._focusedView.getRow(t);!e&&Q(n)&&this._startEditing()},_navigateNextCell:function(e,t){var n=this._getNextCell(t);return!(!n||!this._isCellValid(n))&&this._arrowKeysHandlerFocusCell(e,n,!0)},_arrowKeysHandlerFocusCell:function(e,t,n){var o=this._fireFocusChangingEvents(e,t,n,!0);return t=o.$newCellElement,!(o.cancel||!this._isCellValid(t))&&(this._focus(t,!o.isHighlighted),!0)},_beginFastEditing:function(e,t){if(!this._isFastEditingAllowed()||e.altKey||e.ctrlKey||this._editingController.isEditing())return!1;if(t)this._startEditing(e,O);else{var n=e.key,o=e.keyCode||e.which,r=n||o&&String.fromCharCode(o);!r||1!==r.length&&r!==O||this._startEditing(e,r)}return!0},_pointerEventHandler:function(e){var t=e.event||e,n=(0,r.default)(t.currentTarget),o=this.getView("rowsView"),l=o&&o.element(),d=n.parent(),c=d.hasClass("dx-edit-row"),h=(0,r.default)(t.target).is(W),f=!!(0,r.default)(t.target).closest(".".concat("dx-revert-button")).length,_=n.hasClass(B);!f&&this._isEventInCurrentGrid(t)&&(this._isCellValid(n,!h)||_)?(n=this._isInsideEditForm(n)?(0,r.default)(t.target):n,this._focusView(),(0,r.default)(l).removeClass(z),d.hasClass(H)?(this._updateFocusedCellPosition(n),this._applyTabIndexToElement(this._focusedView.element()),this._focusedView.focus()):this._isMasterDetailCell(n)||c?this._updateFocusedCellPosition(n):this._clickTargetCellHandler(t,n)):n.is("td")&&this._resetFocusedCell()},_clickTargetCellHandler:function(e,t){var n=this.getView("rowsView").getCellIndex(t),o=this._columnsController.getVisibleColumns()[n],l=this._isCellEditMode();this.setCellFocusType();var d=this._fireFocusChangingEvents(e,t,!0);if(t=d.$newCellElement,d.cancel)this.setRowFocusType(),this.setFocusedRowIndex(d.prevRowIndex),t=this._getFocusedCell(),this._editingController.isEditing()&&l&&this._closeEditCell();else{if(d.resetFocusedRow)return void this.getController("focus")._resetFocusedRow();if(d.rowIndexChanged&&(t=this._getFocusedCell()),d.isHighlighted||l||this.setRowFocusType(),this._updateFocusedCellPosition(t),this._allowRowUpdating()&&l&&o&&o.allowEditing)this._isNeedFocus=!1,this._isHiddenFocus=!1;else{var c=e&&(0,r.default)(e.target).closest(W+", td"),h=c&&c.not(t).is(W),f=!(!!o&&!o.command&&t.hasClass(A))&&(!d.isHighlighted||h);this._focus(t,f,h)}}},_allowRowUpdating:function(){var e=this.getVisibleRowIndex(),t=this._dataController.items()[e];return this._editingController.allowUpdating({row:t},"click")},focus:function(element){var e,t=this.option("focusedRowEnabled"),n=X((0,r.default)(element));element||(e=".dx-datagrid-rowsview .dx-row[tabindex]",t||(e+=", .dx-datagrid-rowsview .dx-row > td[tabindex]"),element=this.component.$element().find(e).first()),element&&this._focusElement((0,r.default)(element),n)},getFocusedView:function(){return this._focusedView},setupFocusedView:function(){this.isKeyboardEnabled()&&!(0,f.isDefined)(this._focusedView)&&this._focusView()},_focusElement:function(e,t){var n=(0,r.default)(this._getRowsViewElement()),o=e.closest(n),l=this.isRowFocusType(),d={};!o.length||X(e)&&!this._isCellValid(e)||(this._focusView(),this._isNeedFocus=!0,this._isNeedScroll=!0,(X(e)||j(e))&&(this.setCellFocusType(),e=(d=this._fireFocusChangingEvents(null,e,!1,t)).$newCellElement,l&&!d.isHighlighted&&this.setRowFocusType()),d.cancel||(this._focus(e,!d.isHighlighted),this._focusInteractiveElement(e)))},_getFocusedViewByElement:function(e){var view=this.getFocusedView(),t=view&&(0,r.default)(view.element());return e&&0!==e.closest(t).length},_focusView:function(){this._focusedView=this.getView("rowsView")},_focusInteractiveElement:function(e,t){if(e){var n=this._getInteractiveElement(e,t);(0,h.focusAndSelectElement)(this,n)}},_focus:function(e,t,n){var o=e&&!e.hasClass(D)?e.closest(".".concat(D)):e;if(!o||!function(e){return!e||e.hasClass(H)||e.hasClass("dx-virtual-row")}(o)){var r,l=this._focusedView,c=l&&l.element();this._isHiddenFocus=t,j(o)||this.isRowFocusType()?(r=o,l&&this.setFocusedRowIndex(this._getRowIndex(o))):X(e)&&(r=e,this._updateFocusedCellPosition(e)),r&&(c&&c.find(".dx-row[tabIndex], .dx-row > td[tabindex]").not(r).removeClass(M).removeAttr("tabIndex"),d.default.one(r,"blur",(function(e){e.relatedTarget&&r.removeClass(M)})),n||(this._applyTabIndexToElement(r),d.default.trigger(r,"focus")),t?r.addClass(M):this.getController("editorFactory").focus(r))}},_updateFocus:function(e){var t=this;setTimeout((function(){var n=t.getController("editing"),o=n.getEditMode()===G;if(!t.option("repaintChangesOnly")&&o&&n.hasChanges())n._focusEditingCell();else{var r=t._getFocusedCell(),l=n.isEditing();if(r&&(!t._isMasterDetailCell(r)||t._isRowEditMode())){if(t._hasSkipRow(r.parent())){var c=t._focusedCellPosition&&t._focusedCellPosition.rowIndex>0?"upArrow":"downArrow";r=t._getNextCell(c)}if(Z(r)){if(e&&!l&&t._checkCellOverlapped(r))return;if(r.is("td")||r.hasClass(t.addWidgetPrefix("edit-form-item"))){var h=r.is(K),f=Z(r.find(":focus"));!e&&h||!t.getController("editorFactory").focus()?f||!t._isNeedFocus&&!t._isHiddenFocus||t._focus(r,t._isHiddenFocus):!f&&t._focus(r),l&&t._focusInteractiveElement.bind(t)(r)}else d.default.trigger(r,"focus")}}}}))},_checkCellOverlapped:function(e){var t=e.offset(),n=!1;return this.component.getScrollable&&this.component.getScrollable()&&(t.left<0?n=e.width()+t.left<=0:t.top<0&&(n=e.height()+t.top<=0)),n},_getFocusedCell:function(){return(0,r.default)(this._getCell(this._focusedCellPosition))},_updateFocusedCellPositionByTarget:function(e){var t;if("row"===this._getElementType(e)&&(0,f.isDefined)(null===(t=this._focusedCellPosition)||void 0===t?void 0:t.columnIndex)){var n=(0,r.default)(e);this._focusedView&&j(n)&&this.setFocusedRowIndex(this._getRowIndex(n))}else this._updateFocusedCellPosition(this._getCellElementFromTarget(e))},_updateFocusedCellPosition:function(e,t){var n=this._getCellPosition(e,t);return n&&(!e.length||n.rowIndex>=0&&n.columnIndex>=0)&&this.setFocusedCellPosition(n.rowIndex,n.columnIndex),n},_getCellPosition:function(e,t){var n,o=Z(e)&&e.closest("tr"),r=this.getView("rowsView");if(Z(o)){var l=this._getRowIndex(o);return n=r.getCellIndex(e,l),t&&(n="previous"===t?n-1:n+1,n=this._applyColumnIndexBoundaries(n)),{rowIndex:l,columnIndex:n}}},_focusCell:function(e,t){if(this._isCellValid(e))return this._focus(e,t),!0},_focusEditFormCell:function(e){e.hasClass(k)&&this.getController("editorFactory").focus(e,!0)},_resetFocusedCell:function(){var e=this,t=e._getFocusedCell();t&&t.removeAttr("tabIndex"),e._focusedView&&e._focusedView.renderFocusState&&e._focusedView.renderFocusState(),e._isNeedFocus=!1,e._isNeedScroll=!1,e._focusedCellPosition={}},restoreFocusableElement:function(e,t){var n,o,r=this,l=(0,f.isDefined)(e),c=r.getView("rowsView"),h=c.element(),_=r._focusedCellPosition.columnIndex,m=r._dataController.getRowIndexOffset();e=l?e:c.getTopVisibleItemIndex()+m,l?(o=c.getRow(e-m),!(n=r._fireFocusedRowChanging(t,o)).cancel&&n.rowIndexChanged&&(e=n.newRowIndex)):(r.getController("editorFactory").loseFocus(),r._applyTabIndexToElement(h),d.default.trigger(h,"focus")),l&&n.cancel||r.setFocusedCellPosition(e,_),l&&r._updateFocus()},_getNewPositionByCode:function(e,t,code){var n=e.columnIndex,o=e.rowIndex;if(void 0===e.rowIndex&&"next"===code)return{columnIndex:0,rowIndex:0};switch(code){case"nextInRow":case"next":n<this._getVisibleColumnCount()-1&&"row"!==t&&this._hasValidCellAfterPosition({columnIndex:n,rowIndex:o})?n++:this._isLastRow(o)||"next"!==code||(n=0,o++);break;case"previousInRow":case"previous":n>0&&"row"!==t&&this._hasValidCellBeforePosition({columnIndex:n,rowIndex:o})?n--:o>0&&"previous"===code&&(o--,n=this._getVisibleColumnCount()-1);break;case"upArrow":o=o>0?o-1:o;break;case"downArrow":o=this._isLastRow(o)?o:o+1}return{columnIndex:n,rowIndex:o}},setFocusedCellPosition:function(e,t){this.setFocusedRowIndex(e),this.setFocusedColumnIndex(t)},setFocusedRowIndex:function(e){this._focusedCellPosition||(this._focusedCellPosition={}),this._focusedCellPosition.rowIndex=e},setFocusedColumnIndex:function(e){this._focusedCellPosition||(this._focusedCellPosition={}),this._focusedCellPosition.columnIndex=e},getVisibleRowIndex:function(){return this._focusedCellPosition?this._focusedCellPosition.rowIndex?this._focusedCellPosition.rowIndex-this._dataController.getRowIndexOffset():this._focusedCellPosition.rowIndex:null},getVisibleColumnIndex:function(){return this._focusedCellPosition&&(0,f.isDefined)(this._focusedCellPosition.columnIndex)?this._focusedCellPosition.columnIndex:-1},getFocusedColumnIndex:function(){return this._focusedCellPosition?this._focusedCellPosition.columnIndex:null},_applyColumnIndexBoundaries:function(e){var t=this._getVisibleColumnCount();return e<0?e=0:e>=t&&(e=t-1),e},_isCellByPositionValid:function(e){var t=(0,r.default)(this._getCell(e));return this._isCellValid(t)},_isLastRow:function(e){return this._isVirtualScrolling()?e>=this._dataController.totalItemsCount()-1:e===this.getController("data").items().length-1},_isFirstValidCell:function(e){var t=!1;return 0===e.rowIndex&&e.columnIndex>=0&&(t=t||!this._hasValidCellBeforePosition(e)),t},_hasValidCellBeforePosition:function(e){for(var t=e.columnIndex,n=!1;t>0&&!n;){var o={columnIndex:--t,rowIndex:e.rowIndex};n=this._isCellByPositionValid(o)}return n},_hasValidCellAfterPosition:function(e){for(var t=e.columnIndex,n=!1,o=this._getVisibleColumnCount();t<o-1&&!n;){var r={columnIndex:++t,rowIndex:e.rowIndex};n=this._isCellByPositionValid(r)}return n},_isLastValidCell:function(e){var t=e.columnIndex>=0?e.columnIndex+1:0,n=e.rowIndex,o={columnIndex:t,rowIndex:n},r=this.getController("data").getVisibleRows(),l=r&&r[n];return!!this._isLastRow(n)&&(!!(l&&"group"===l.rowType&&e.columnIndex>0)||(e.columnIndex===this._getVisibleColumnCount()-1||!this._isCellByPositionValid(o)&&this._isLastValidCell(o)))},_isCellValid:function(e,t){if(Z(e)&&this._columnsController){var n=this.getView("rowsView"),o=e.parent(),r=this._columnsController.getVisibleColumns(),l=n.getCellIndex(e),d=r[l],c=this._getVisibleColumnCount(),h=this._editingController,_=J(o),m=d&&d.showWhenGrouped,C=d&&!e.hasClass(B)&&Q(o);if(this._isMasterDetailCell(e))return!0;if(c>l&&(!_&&d&&(!(0,f.isDefined)(d.groupIndex)||m&&C)||parseInt(e.attr("colspan"))>1)){var w=this._dataController.items(),v=n.getRowIndex(o),x=w[v],y=h&&this._isCellEditMode()&&h.isEditing(),F=h&&h.isEditRow(v),I=F||y;return d.command?this._isLegacyNavigation()?!I&&"expand"===d.command:y?!d.command:F?"select"!==d.command:!I:(!y||!x||"data"===x.rowType)&&(!I||d.allowEditing||t)}}},getFirstValidCellInRow:function(e,t){for(var n,o,r=e.find("> td"),i=t=t||0;i<r.length;++i)if(n=r.eq(i),this._isCellValid(n)){o=n;break}return o},_getNextCell:function(e,t,n){var o,l,d=n||this._focusedCellPosition,c=this.isRowFocusType(),h=c||(0,_.inArray)(e,["next","previous"])>-1;if(this._focusedView&&d){var f=this._getNewPositionByCode(d,t,e);o=(0,r.default)(this._getCell(f));var m="previous"===e?this._isFirstValidCell(f):this._isLastValidCell(f);if(Z(o)&&!this._isCellValid(o)&&this._isCellInRow(f,h)&&!m&&(o=c?this.getFirstValidCellInRow(o.parent(),f.columnIndex):this._getNextCell(e,"cell",f)),l=Z(o)&&o.parent(),this._hasSkipRow(l)){var C=this._getRowIndex(l);if(this._isLastRow(C))return null;o=this._getNextCell(e,"row",{columnIndex:d.columnIndex,rowIndex:C})}return Z(o)?o:null}return null},_startEditing:function(e,t){var n=this._focusedCellPosition,o=this.getVisibleRowIndex(),r=this._dataController.items()[o],l=this._columnsController.getVisibleColumns()[n.columnIndex];this._isAllowEditing(r,l)&&(this._isRowEditMode()?this._editingController.editRow(o):n&&this._startEditingCell(e,t))},_isAllowEditing:function(e,t){return this.getController("editing").allowUpdating({row:e})&&t&&t.allowEditing},_startEditingCell:function(e,t){var n=this,o=this.getVisibleRowIndex(),r=this._focusedCellPosition.columnIndex;this._fastEditingStarted=(0,f.isDefined)(t);var l=this._editingController.editCell(o,r);if(this._isFastEditingStarted())if(!0===l)n._editingCellHandler(e,t);else if(l&&l.done){var d=t!==O?t:"";l.done((function(){return n._editingCellHandler(e,d)}))}},_editingCellHandler:function(e,t){var n=this._getFocusedCell().find(".dx-texteditor-input").eq(0),o=C.createEvent(e,{type:"keydown",target:n.get(0)}),r=C.createEvent(e,{type:"keypress",target:n.get(0)}),l=C.createEvent(e,{type:"input",target:n.get(0)});if(d.default.trigger(n,o),!o.isDefaultPrevented()&&(d.default.trigger(n,r),!r.isDefaultPrevented())){var c=F.default.mozilla?25:0;setTimeout((function(){n.val(t);var e=n.closest(".".concat("dx-widget"));d.default.off(e,"focusout"),d.default.one(e,"focusout",(function(){d.default.trigger(n,"change")})),d.default.trigger(n,l)}),c)}},_fireFocusChangingEvents:function(e,t,n,o){var l={},d=this._getCellPosition(t)||{};return this.isCellFocusType()&&((l=this._fireFocusedCellChanging(e,t,o)).cancel||(d.columnIndex=l.newColumnIndex,d.rowIndex=l.newRowIndex,o=l.isHighlighted,t=(0,r.default)(this._getCell(d)))),!l.cancel&&n&&t&&((l=this._fireFocusedRowChanging(e,t.parent())).cancel||(d.rowIndex=l.newRowIndex,l.isHighlighted=o)),l.$newCellElement=(0,r.default)(this._getCell(d)),l.$newCellElement.length||(l.$newCellElement=t),l},_fireFocusedCellChanging:function(e,t,n){var o=this,l=o.option("focusedColumnIndex"),d=o.option("focusedRowIndex"),c=o._getCellPosition(t),h=c?c.columnIndex:-1,f=c?c.rowIndex:-1,_={cellElement:t,prevColumnIndex:l,prevRowIndex:d,newColumnIndex:h,newRowIndex:f,rows:o.getController("data").getVisibleRows(),columns:o.getController("columns").getVisibleColumns(),event:e,isHighlighted:n||!1,cancel:!1};return this._canceledCellPosition=null,o.executeAction("onFocusedCellChanging",_),_.newColumnIndex===h&&_.newRowIndex===f||(_.$newCellElement=(0,r.default)(this._getCell({columnIndex:_.newColumnIndex,rowIndex:_.newRowIndex}))),_.cancel&&(this._canceledCellPosition={rowIndex:f,columnIndex:h}),_},_fireFocusedCellChanged:function(e,t,n){var o=this,r=o.getController("data"),l=o.getView("rowsView").getCellIndex(e),d=this._getRowIndex(e&&e.parent()),c=Math.min(d-r.getRowIndexOffset(),r.items().length-1),h=o.getController("editing").isEditCell(c,l),f=r.items()[c];h||t===l&&n===d||(r=o.getController("data"),o.executeAction("onFocusedCellChanged",{cellElement:e,columnIndex:l,rowIndex:d,row:f,column:o.getController("columns").getVisibleColumns()[l]}))},_fireFocusedRowChanging:function(e,t){var n=this._getRowIndex(t),o=this.getController("data"),r=this.option("focusedRowIndex"),l=o.loadingOperationTypes(),d={rowElement:t,prevRowIndex:r,newRowIndex:n,event:e,rows:this.getController("data").getVisibleRows(),cancel:!1};return!o||o.isLoading()&&(l.reload||l.paging)?(d.cancel=!0,d):(this.option("focusedRowEnabled")&&(this.executeAction("onFocusedRowChanging",d),d.cancel||d.newRowIndex===n||(d.resetFocusedRow=d.newRowIndex<0,d.resetFocusedRow||this.setFocusedRowIndex(d.newRowIndex),d.rowIndexChanged=!0)),d)},_fireFocusedRowChanged:function(e){var t,n=this.option("focusedRowKey"),o=this.getController("focus"),r=null==o?void 0:o.getFocusedRowIndexByKey(n);if(this.option("focusedRowEnabled")){if(r>=0){var l=this.getController("data");t=r>=0&&l.getVisibleRows()[r-l.getRowIndexOffset()]}this.executeAction("onFocusedRowChanged",{rowElement:e,rowIndex:r,row:t})}},_isEventInCurrentGrid:function(e){return(0,h.isElementInCurrentGrid)(this,(0,r.default)(e.target))},_isRowEditMode:function(){var e=this.getController("editing").getEditMode();return"row"===e||e===L},_isCellEditMode:function(){var e=this.getController("editing").getEditMode();return e===G||"batch"===e},_isFastEditingAllowed:function(){return this._isCellEditMode()&&this.option("keyboardNavigation.editOnKeyPress")},_getInteractiveElement:function(e,t){var n=e.find(W).filter(":visible");return t?n.last():n.first()},_applyTabIndexToElement:function(e){var t=this.option("tabIndex")||0;e.attr("tabindex",(0,f.isDefined)(t)?t:0)},_getCell:function(e){if(this._focusedView&&this._dataController&&e)return this._focusedView.getCell({rowIndex:e.rowIndex-this._dataController.getRowIndexOffset(),columnIndex:e.columnIndex})},_getRowIndex:function(e){var t=this.getView("rowsView").getRowIndex(e);return t>=0&&(t+=this.getController("data").getRowIndexOffset()),t},_hasSkipRow:function(e){var t=e&&e.get(0);return t&&("none"===t.style.display||e.hasClass(this.addWidgetPrefix("group-footer"))||J(e)&&!e.hasClass(this.addWidgetPrefix(P)))},_allowEditingOnEnterKey:function(){return"startEdit"===this.option("keyboardNavigation.enterKeyAction")},_isLegacyNavigation:function(){return this.option("useLegacyKeyboardNavigation")},_getDirectionCodeByKey:function(e){return this.option("rtlEnabled")?"leftArrow"===e?"nextInRow":"previousInRow":"leftArrow"===e?"previousInRow":"nextInRow"},_isVirtualScrolling:function(){var e=this.option("scrolling.mode");return"virtual"===e||"infinite"===e},_scrollBy:function(e,t,n){var o=this,r=this.getView("rowsView").getScrollable();if(o._focusedCellPosition){r.on("scroll",(function e(){r.off("scroll",e),setTimeout(o.restoreFocusableElement.bind(o,t,n))}))}r.scrollBy({left:0,top:e})},_isInsideEditForm:function(element){return(0,r.default)(element).closest("."+this.addWidgetPrefix(P)).length>0},_isMasterDetailCell:function(element){var e=(0,r.default)(element).closest(".dx-master-detail-cell"),t=e.closest("."+this.getWidgetContainerClass()).parent();return e.length&&t.is(this.component.$element())},_processNextCellInMasterDetail:function(e){!this._isInsideEditForm(e)&&e&&this._applyTabIndexToElement(e)},_handleTabKeyOnMasterDetailCell:function(e,t){if(this._isMasterDetailCell(e)){this._updateFocusedCellPosition((0,r.default)(e),t);var n=this._getNextCell(t,"row");return this._processNextCellInMasterDetail(n),!0}return!1},_getElementType:function(e){return(0,r.default)(e).is("tr")?"row":"cell"},_isFastEditingStarted:function(){return this._isFastEditingAllowed()&&this._fastEditingStarted},_getVisibleColumnCount:function(){return this.getController("columns").getVisibleColumns().length},_isCellInRow:function(e,t){var n=e.columnIndex,o=this._getVisibleColumnCount();return t?n>=0&&n<=o-1:n>0&&n<o-1},_getCellElementFromTarget:function(e){var t=this._getElementType(e),n=(0,r.default)(e);return"cell"===t?n.closest(".".concat(D," > td")):n.children().not(".dx-command-expand").first()},_getRowsViewElement:function(){var e=this.getView("rowsView");return e&&e.element()},isKeyboardEnabled:function(){return this.option("keyboardNavigation.enabled")},_processCanceledEditCellPosition:function(e,t){if(this._canceledCellPosition){var n=this._canceledCellPosition.rowIndex===e&&this._canceledCellPosition.columnIndex===t;return this._canceledCellPosition=null,n}}});e.exports={defaultOptions:function(){return{useLegacyKeyboardNavigation:!1,keyboardNavigation:{enabled:!0,enterKeyAction:"startEdit",enterKeyDirection:"none",editOnKeyPress:!1}}},controllers:{keyboardNavigation:ie},extenders:{views:{rowsView:{_rowClick:function(e){var t=this.getController("editing").getEditRowIndex(),n=this.getController("keyboardNavigation");t===e.rowIndex&&n.setCellFocusType();var o=ee()&&this.option("focusedRowEnabled");o&&this._triggerPointerDownEventHandler(e),this.callBase.apply(this,arguments)},_triggerPointerDownEventHandler:function(e){var t=e.event.originalEvent;if(t){var n=this.getController("keyboardNavigation"),o=(0,r.default)(t.target),l=this.getCellIndex(o),d=this.getController("columns").getVisibleColumns()[l],c=this.getController("data").items()[e.rowIndex];if(n._isAllowEditing(c,d)){var h=C.createEvent(t,{currentTarget:t.target});n._pointerEventHandler(h)}}},renderFocusState:function(){var e=this._dataController,t=this.option("focusedRowIndex")||0,n=this.element();n&&!(0,m.focused)(n)&&n.attr("tabIndex",null),(t<0||t>=e.getVisibleRows().length)&&(t=0);var o=this.getCellElements(t);this.getController("keyboardNavigation").isKeyboardEnabled()&&o&&this.updateFocusElementTabIndex(o)},updateFocusElementTabIndex:function(e){var t=this.getController("keyboardNavigation"),n=e.eq(0).parent(),o=this.option("focusedColumnIndex");(!o||o<0)&&(o=0),j(n)?t._applyTabIndexToElement(n):this._updateFocusedCellTabIndex(e,o)},_updateFocusedCellTabIndex:function(e,t){var n,o=this.getController("keyboardNavigation"),l=o._focusedView,d=e?e.length:-1;if(o._focusedView=this,d>0){d<=t&&(t=d-1);for(var i=t;i<d;++i)if(n=(0,r.default)(e[i]),!o._isMasterDetailCell(n)&&o._isCellValid(n)&&X(n)){o._applyTabIndexToElement(n),o.setCellFocusType();break}}o._focusedView=l},renderDelayedTemplates:function(e){this.callBase.apply(this,arguments),e&&e.repaintChangesOnly||this.renderFocusState()},_renderCore:function(e){this.callBase(e),e&&e.repaintChangesOnly||this.renderFocusState()},_editCellPrepared:function(e){var t=this._getEditorInstance(e),n=this.getController("keyboardNavigation"),o=n&&n._isFastEditingStarted();t&&o&&this._handleEditingNavigationMode(t),this.callBase.apply(this,arguments)},_handleEditingNavigationMode:function(e){["downArrow","upArrow"].forEach((function(t){var n=e._supportedKeys()[t];e.registerKeyHandler(t,(function(t){if("true"===e._input().attr("aria-expanded"))return n&&n.call(e,t)}))})),e.registerKeyHandler("leftArrow",x.noop),e.registerKeyHandler("rightArrow",x.noop),"dxDateBox"===e.NAME&&e.option("useMaskBehavior")&&e.registerKeyHandler("enter",x.noop)},_getEditorInstance:function(e){var t=e.find(".dx-texteditor").eq(0);return(0,h.getWidgetInstance)(t)}}},controllers:{editing:{editCell:function(e,t){var n=this.getController("keyboardNavigation");if(n._processCanceledEditCellPosition(e,t))return!1;var o=this.callBase(e,t);return o&&n.setupFocusedView(),o},editRow:function(e){var t=this.getController("keyboardNavigation"),n=this.option("focusedColumnIndex"),o=this._columnsController.getVisibleColumns()[n];(o&&o.type||this.option("editing.mode")===L)&&t._resetFocusedCell(),this.callBase(e)},addRow:function(e){var t=this.getController("keyboardNavigation");return t.setupFocusedView(),t.setCellFocusType(),this.callBase.apply(this,arguments)},getFocusedCellInRow:function(e){var t=this.getController("keyboardNavigation"),n=this.callBase(e);if(t.isKeyboardEnabled()&&t._focusedCellPosition.rowIndex===e){var o=t._getFocusedCell();Z(o)&&!o.hasClass("dx-command-edit")&&(n=o)}return n},_processCanceledEditingCell:function(){var e=this;this.closeEditCell().done((function(){e.getController("keyboardNavigation")._updateFocus()}))},init:function(){this.callBase(),this._keyboardNavigationController=this.getController("keyboardNavigation")},closeEditCell:function(){var e=this._keyboardNavigationController;e._fastEditingStarted=!1;var t=this.callBase.apply(this,arguments);return e._updateFocus(),t},_delayedInputFocus:function(){this._keyboardNavigationController._isNeedScroll=!0,this.callBase.apply(this,arguments)},_isEditingStart:function(){var e=this.getController("keyboardNavigation"),t=this.callBase.apply(this,arguments);if(t&&!e._isNeedFocus){var n=e._getFocusedCell();e._focus(n,!0)}return t}},data:{_correctRowIndices:function(e){var t=this,n=t.getController("keyboardNavigation"),o=t.getController("editorFactory"),r=n._focusedCellPosition;if(t.callBase.apply(t,arguments),r&&r.rowIndex>=0){var l=e(r.rowIndex);l&&(r.rowIndex+=l,o.refocus())}}},adaptiveColumns:{_showHiddenCellsInView:function(e){var t=e.viewName,n=e.$cells,o=e.isCommandColumn;this.callBase.apply(this,arguments),t===U&&!o&&n.each((function(e,t){var n=(0,r.default)(t);te(n)&&n.attr("tabindex",0)}))},_hideVisibleCellInView:function(e){var t=e.viewName,n=e.$cell,o=e.isCommandColumn;this.callBase.apply(this,arguments),t===U&&!o&&te(n)&&n.removeAttr("tabindex")}}}}}},76:function(e,t,n){"use strict";var o=v(n(0)),r=v(n(14)),l=v(n(37)),d=v(n(74)),c=n(6),h=n(2),f=n(35),_=n(10),m=v(n(56)),C=v(n(30)),w=n(20);function v(e){return e&&e.__esModule?e:{default:e}}var x=l.default.inherit({_endUpdateCore:function(){},ctor:function(component){var e=this;e._updateLockCount=0,e.component=component,e._actions={},e._actionConfigs={},(0,_.each)(this.callbackNames()||[],(function(t,n){var o=e.callbackFlags(n)||{};o.unique=!0,o.syncStrategy=!0,e[this]=(0,d.default)(o)}))},init:function(){},callbackNames:function(){},callbackFlags:function(){},publicMethods:function(){},beginUpdate:function(){this._updateLockCount++},endUpdate:function(){this._updateLockCount>0&&(this._updateLockCount--,this._updateLockCount||this._endUpdateCore())},option:function(e){var component=this.component,t=component._optionCache;return 1===arguments.length&&t?(e in t||(t[e]=component.option(e)),t[e]):component.option.apply(component,arguments)},localize:function(e){var t=this.component._optionCache;return t?(e in t||(t[e]=C.default.format(e)),t[e]):C.default.format(e)},on:function(){return this.component.on.apply(this.component,arguments)},off:function(){return this.component.off.apply(this.component,arguments)},optionChanged:function(e){e.name in this._actions&&(this.createAction(e.name,this._actionConfigs[e.name]),e.handled=!0)},getAction:function(e){return this._actions[e]},setAria:function(e,t,n){var o=n.get(0),r="role"!==e&&"id"!==e?"aria-":"";o.setAttribute?o.setAttribute(r+e,t):n.attr(r+e,t)},_createComponent:function(){return this.component._createComponent.apply(this.component,arguments)},getController:function(e){return this.component._controllers[e]},createAction:function(e,t){if((0,h.isFunction)(e)){var n=this.component._createAction(e.bind(this),t);return function(e){n({event:e})}}this._actions[e]=this.component._createActionByOption(e,t),this._actionConfigs[e]=t},executeAction:function(e,t){var n=this._actions[e];return n&&n(t)},dispose:function(){var e=this;(0,_.each)(e.callbackNames()||[],(function(){e[this].empty()}))},addWidgetPrefix:function(e){return"dx-"+this.component.NAME.slice(2).toLowerCase()+(e?"-"+e:"")},getWidgetContainerClass:function(){var e="dxDataGrid"===this.component.NAME?null:"container";return this.addWidgetPrefix(e)}}),y=x,F=y.inherit({getView:function(e){return this.component._views[e]},getViews:function(){return this.component._views}}),I=x.inherit({_isReady:function(){return this.component.isReady()},_endUpdateCore:function(){this.callBase(),!this._isReady()&&this._requireReady&&(this._requireRender=!1,this.component._requireResize=!1),this._requireRender&&(this._requireRender=!1,this.render(this._$parent))},_invalidate:function(e,t){this._requireRender=!0,this.component._requireResize=(0,w.hasWindow)()&&(this.component._requireResize||e),this._requireReady=this._requireReady||t},_renderCore:function(){},_resizeCore:function(){},_afterRender:function(){},_parentElement:function(){return this._$parent},ctor:function(component){this.callBase(component),this.renderCompleted=(0,d.default)(),this.resizeCompleted=(0,d.default)()},element:function(){return this._$element},getElementHeight:function(){var e=this.element();if(!e)return 0;var t=parseFloat(e.css("marginTop"))||0,n=parseFloat(e.css("marginBottom"))||0;return e.get(0).offsetHeight+t+n},isVisible:function(){return!0},getTemplate:function(e){return this.component._getTemplate(e)},render:function(e,t){var n=this._$element,r=this.isVisible();(n||e)&&(this._requireReady=!1,n||(n=this._$element=(0,o.default)("<div>").appendTo(e),this._$parent=e),n.toggleClass("dx-hidden",!r),r&&(this.component._optionCache={},this._renderCore(t),this.component._optionCache=void 0,this._afterRender(e),this.renderCompleted.fire(t)))},resize:function(){this.isResizing=!0,this._resizeCore(),this.resizeCompleted.fire(),this.isResizing=!1},focus:function(){r.default.trigger(this.element(),"focus")}}),E=1e6;e.exports={modules:[],View:I,ViewController:F,Controller:y,registerModule:function(e,t){for(var n=this.modules,i=0;i<n.length;i++)if(n[i].name===e)return;t.name=e,n.push(t),delete this.controllerTypes,delete this.viewTypes},registerModulesOrder:function(e){this.modulesOrder=e},unregisterModule:function(e){this.modules=(0,c.grep)(this.modules,(function(t){return t.name!==e})),delete this.controllerTypes,delete this.viewTypes},processModules:function(e,t){var n=t.modules,o=t.modulesOrder,r=t.controllerTypes||{},l=t.viewTypes||{};t.controllerTypes||(o&&n.sort((function(e,t){var n=(0,f.inArray)(e.name,o),r=(0,f.inArray)(t.name,o);return n<0&&(n=E),r<0&&(r=E),n-r})),(0,_.each)(n,(function(){var e=this.controllers,t=this.name,n=this.views;e&&(0,_.each)(e,(function(e,n){if(r[e])throw m.default.Error("E1001",t,e);if(!(n&&n.subclassOf&&n.subclassOf(y)))throw n.subclassOf(y),m.default.Error("E1002",t,e);r[e]=n})),n&&(0,_.each)(n,(function(e,n){if(l[e])throw m.default.Error("E1003",t,e);if(!(n&&n.subclassOf&&n.subclassOf(I)))throw m.default.Error("E1004",t,e);l[e]=n}))})),(0,_.each)(n,(function(){var e=this.extenders;e&&(e.controllers&&(0,_.each)(e.controllers,(function(e,t){r[e]&&(r[e]=r[e].inherit(t))})),e.views&&(0,_.each)(e.views,(function(e,t){l[e]&&(l[e]=l[e].inherit(t))})))})),t.controllerTypes=r,t.viewTypes=l);var d=function(t){var n={};return(0,_.each)(t,(function(t,o){var r=new o(e);r.name=t,function(e,t,n){var o=n.publicMethods();o&&(0,_.each)(o,(function(o,r){if(!n[r])throw m.default.Error("E1006",t,r);if(e[r])throw m.default.Error("E1005",r);e[r]=function(){return n[r].apply(n,arguments)}}))}(e,t,r),n[t]=r})),n};e._controllers=d(r),e._views=d(l)},callModuleItemsMethod:function(e,t,n){n=n||[],e._controllers&&(0,_.each)(e._controllers,(function(){this[t]&&this[t].apply(this,n)})),e._views&&(0,_.each)(e._views,(function(){this[t]&&this[t].apply(this,n)}))}}}}]);