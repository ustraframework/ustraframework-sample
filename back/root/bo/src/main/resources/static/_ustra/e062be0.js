(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{1717:function(e,n,t){"use strict";var o=A(t(0)),r=A(t(74)),l=t(211),d=A(t(70)),c=t(6),f=t(2),m=A(t(10)),h=t(75),x=t(1),C=t(35),v=A(t(97)),_=t(222),y=A(t(56)),I=A(t(76)),O=t(71),w=A(t(101)),S=A(t(170)),F=A(t(151)),D=A(t(117)),V=A(t(30)),B=t(19),z=A(t(421)),P=t(214),T=t(183),E=A(t(342));function A(e){return e&&e.__esModule?e:{default:e}}function G(object,e){var n=Object.keys(object);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(object);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),n.push.apply(n,t)}return n}function k(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var N=["filterValues","filterType","fixed","fixedPosition"],R=["visibleIndex","dataField","name","dataType","width","visible","sortOrder","lastSortOrder","sortIndex","groupIndex","filterValue","selectedFilterOperation","added"].concat(N),M={visibleWidth:!0,bestFitWidth:!0,bufferedFilterValue:!0},j=Number.MAX_SAFE_INTEGER||9007199254740991,U="groupExpand",W=/columns\[(\d+)\]\.?/gi,H=1;e.exports={defaultOptions:function(){return{commonColumnSettings:{allowFiltering:!0,allowHiding:!0,allowSorting:!0,allowEditing:!0,encodeHtml:!0,trueText:V.default.format("dxDataGrid-trueText"),falseText:V.default.format("dxDataGrid-falseText")},allowColumnReordering:!1,allowColumnResizing:!1,columnResizingMode:"nextColumn",columnMinWidth:void 0,columnWidth:void 0,adaptColumnWidthByRatio:!0,columns:void 0,regenerateColumnsByVisibleItems:!1,customizeColumns:null,dateSerializationFormat:void 0}},controllers:{columns:I.default.Controller.inherit(function(){var e={visible:!0,showInColumnChooser:!0},n={number:["=","<>","<",">","<=",">=","between"],string:["contains","notcontains","startswith","endswith","=","<>"],date:["=","<>","<",">","<=",">=","between"],datetime:["=","<>","<",">","<=",">=","between"]},t={visibleIndex:!0,groupIndex:!0,grouped:!0,sortIndex:!0,sortOrder:!0},I="group",V="columnChooser",A=function(e){e.filterOperations=e.defaultFilterOperations},L=function(n,t,o,r){var l={};if(t){(0,f.isString)(t)&&(t={dataField:t});var d={};if(t.command)d=(0,_.deepExtendArraySafe)(l,t);else{l=n.getCommonSettings(t),o&&o.name&&o.dataField&&(t=(0,x.extend)({},t,{dataField:o.dataField}));var c=n._createCalculatedColumnOptions(t,r);t.type||(d={headerId:"dx-col-".concat(H++)}),d=(0,_.deepExtendArraySafe)(d,e),(0,_.deepExtendArraySafe)(d,l),(0,_.deepExtendArraySafe)(d,c),(0,_.deepExtendArraySafe)(d,t),(0,_.deepExtendArraySafe)(d,{selector:null})}return t.filterOperations===t.defaultFilterOperations&&A(d),d}},J=function e(n,t,o){var r=[];return t&&m.default.each(t,(function(t,l){var d=n._columnsUserState&&re(l,n._columnsUserState[t])&&n._columnsUserState[t],c=L(n,l,d,o);c&&(o&&(c.ownerBand=o),r.push(c),c.columns&&(r=r.concat(e(n,c.columns,c)),delete c.columns,c.hasColumns=!0))})),r},X=function(e,n){for(var t=[],o=n[e];o;)t.unshift(o),o=n[e=o.index];return t},K=function(e,n,t){var o=[],r=n[e];if(r)for(var i=0;i<r.length;i++){var l=r[i];(0,f.isDefined)(l.groupIndex)&&!l.showWhenGrouped||(o.push(l),t&&l.isBand&&(o=o.concat(K(l.index,n,t))))}return o},Q=function(e,n){var t,o=[],r=e.getBandColumnsCache(),l=function(e){return e.ownerBand===n.ownerBand};if(r.isPlain){var d=e._columns.indexOf(n);d>=0&&(o=["columns[".concat(d,"]")])}else for(t=e._columns.filter(l);t.length&&-1!==t.indexOf(n);)o.unshift("columns[".concat(t.indexOf(n),"]")),t=(n=r.columnParentByIndex[n.index])?e._columns.filter(l):[];return o.join(".")},Y=function e(n,t){var o=0,r=n.getChildrenByBandColumn(t,!0);return m.default.each(r,(function(t,r){r.isBand?(r.colspan=r.colspan||e(n,r.index),o+=r.colspan||1):o+=1})),o},Z=function(e){var n=(0,f.type)(e);return"string"!==n&&"boolean"!==n&&"number"!==n&&"date"!==n&&"object"!==n&&(n=void 0),n},$=function(e,n){switch(e){case"date":case"datetime":return S.default.getDateSerializationFormat(n);case"number":if((0,f.isString)(n))return"string";if((0,f.isNumeric)(n))return null}},ee=function(e,n){e.deserializeValue||((0,O.isDateType)(n)&&(e.deserializeValue=function(e){return S.default.deserializeDate(e)},e.serializeValue=function(e){return(0,f.isString)(e)?e:S.default.serializeDate(e,this.serializationFormat)}),"number"===n&&(e.deserializeValue=function(e){var n=parseFloat(e);return isNaN(n)?e:n},e.serializeValue=function(e,n){return"filter"===n?e:(0,f.isDefined)(e)&&"string"===this.serializationFormat?e.toString():e}))},ne=function(e){return!0===e.value?this.trueText||"true":!1===e.value?this.falseText||"false":e.valueText||""},te=function(e){if("boolean"===e)return ne},ie=function(e){m.default.each(e._columns,(function(e,n){n.index=e})),m.default.each(e._columns,(function(e,n){(0,f.isObject)(n.ownerBand)&&(n.ownerBand=n.ownerBand.index)})),m.default.each(e._commandColumns,(function(e,n){n.index=-(e+1)}))},oe=function(e,n){(0,C.normalizeIndexes)(e._columns,"groupIndex",n,(function(e){var n=e.grouped;return delete e.grouped,n}))},ae=function(e,n,t){var o,r=(0,f.isObject)(n)?n.rowIndex:null,l=t===I?e.getGroupColumns():t===V?e.getChooserColumns():e.getVisibleColumns(r);return n=(0,f.isObject)(n)?n.columnIndex:n,(o=l[n])&&o.type===U&&(o=e._columns.filter((function(col){return o.type===col.type}))[0]||o),o&&(0,f.isDefined)(o.index)?o.index:-1};function re(e,n){return e&&n&&n.name===e.name&&(n.dataField===e.dataField||e.name)}var le=function(e){var n,t,i,o=e._columnsUserState,r=e._ignoreColumnOptionNames||[],l=e._columns,d={},c=[],m=!0,h=[];function x(e,n){if(n)for(var t=0;t<R.length;t++){var o=R[t];(0,C.inArray)(o,r)>=0||("dataType"===o?e[o]=e[o]||n[o]:(0,C.inArray)(o,N)>=0?o in n&&(e[o]=n[o]):("selectedFilterOperation"===o&&n[o]&&(e.defaultSelectedFilterOperation=e[o]||null),e[o]=n[o]))}}function v(e,n){for(var t=n.name||n.dataField,o=d[t]||0,r=0;r<e.length;r++)if(re(n,e[r])){if(!o)return d[t]=d[t]||0,d[t]++,r;o--}return-1}if(o){for(i=0;i<l.length;i++)t=v(o,l[i]),m=m&&t>=0,h.push(t);for(i=0;i<l.length;i++)n=l[i],t=h[i],(e._hasUserState||m)&&x(n,o[t]),t>=0&&(0,f.isDefined)(o[t].initialIndex)?c[t]=n:c.push(n);var _=!1;for(i=0;i<o.length;i++){var y=o[i];y.added&&v(l,y)<0&&(x(n=L(e,y.added),y),c.push(n),y.added.columns&&(_=!0))}_&&(ie(e),c=J(e,c)),de(e,c)}},ue=function(e,n){ie(e),oe(e,n),function(e,n){m.default.each(e._columns,(function(e,n){(0,f.isDefined)(n.sortIndex)&&!ge(n.sortOrder)&&delete n.sortIndex})),(0,C.normalizeIndexes)(e._columns,"sortIndex",n,(function(e){return!(0,f.isDefined)(e.groupIndex)&&ge(e.sortOrder)}))}(e,n),we(e),function(e,n){for(var t,o,r={},l=[],d=e.getBandColumnsCache(),c=e._columns.filter((function(e){return!e.command})),i=0;i<c.length;i++){o=c[i];var f=X(i,d.columnParentByIndex);if(f.length){var m=f[f.length-1].index;r[m]=r[m]||[],r[m].push(o)}else l.push(o)}for(t in r)(0,C.normalizeIndexes)(r[t],"visibleIndex",n);(0,C.normalizeIndexes)(l,"visibleIndex",n)}(e,n)},se=function(e){e.resetColumnsCache()};function de(e,n){e._columns=n,se(e),e.updateColumnDataTypes()}var ce=function(e,n,t,o){var r=e._columnChanges||{optionNames:{length:0},changeTypes:{length:0},columnIndex:o};t=(t=t||"all").split(".")[0];var l=r.changeTypes;n&&!l[n]&&(l[n]=!0,l.length++);var d=r.optionNames;t&&!d[t]&&(d[t]=!0,d.length++),void 0!==o&&o===r.columnIndex||delete r.columnIndex,e._columnChanges=r,se(e)},fe=function(e){var n,t=e.option("onColumnsChanging"),o=e._columnChanges,r=["dataField","lookup","dataType","columns"];e.isInitialized()&&!e._updateLockCount&&o&&(t&&(e._updateLockCount++,t((0,x.extend)({component:e.component},o)),e._updateLockCount--),e._columnChanges=void 0,(n=o.optionNames)&&r.some((function(e){return n[e]}))?e.reinit():e.columnsChanged.fire(o))},me=function(e,n,t,o){if(t>=0)o>=0||(n.lastSortOrder=n.sortOrder);else{var r=e.option("sorting.mode"),l=n.lastSortOrder;if("single"===r)e._columns.some((function(col){return col!==n&&(0,f.isDefined)(col.sortIndex)}))&&(l=void 0);n.sortOrder=l}},pe=function(e,n){var t=n.value,o=n.optionName,r=n.prevValue,l=n.fullOptionName,d="".concat(l,".").concat(o);M[o]||e._skipProcessingColumnsChange===d||(e._skipProcessingColumnsChange=d,e.component._notifyOptionChanged(d,t,r),e._skipProcessingColumnsChange=!1)},he=function(e,n,o,r,l){var c,m,h,x=d.default.compileGetter(o),v=n.index;if(3===arguments.length)return x(n,{functionsAsIs:!0});var _=x(n,{functionsAsIs:!0});if(_!==r){"groupIndex"===o||"calculateGroupValue"===o?(m="grouping",me(e,n,r,_)):m="sortIndex"===o||"sortOrder"===o||"calculateSortValue"===o?"sorting":"columns";var y=d.default.compileSetter(o);y(n,r,{functionsAsIs:!0});var I=Q(e,n);t[o]&&(ue(e,n),r=x(n)),I&&pe(e,{fullOptionName:I,optionName:o,value:r,prevValue:_}),(0,f.isDefined)(_)||(0,f.isDefined)(r)||0===o.indexOf("buffer")||(l=!0),l?se(e):((0,C.inArray)(o,R)<0&&"visibleWidth"!==o&&(c=e.option("columns"),h=e.getColumnByPath(I,c),(0,f.isString)(h)&&(h=c[v]={dataField:h}),h&&re(h,n)&&y(h,r,{functionsAsIs:!0})),ce(e,m,o,v))}};function ge(e){return"asc"===e||"desc"===e}var xe=function(data,e){var path=this.dataField.split("."),n=path.length-1;this.serializeValue&&(e=this.serializeValue(e));for(var i=0;i<n;i++){var t=path[i];data=data[t]=data[t]||{}}data[path[n]]=e},Ce=function e(n,t,o){var r=[];return n[t=t||0]&&m.default.each(n[t],(function(l,d){d.ownerBand!==o&&d.type!==U||(d.isBand&&d.colspan?r.push.apply(r,e(n,t+1,d.index)):(!d.command||t<1)&&r.push(d))})),r},ve=function(e,n){return!!e._columns.filter((function(e){return e.type===n.type})).length},_e=function(e,n){var t=e.option("rtlEnabled");return n.command&&!ve(e,n)||!n.fixedPosition?t?"right":"left":n.fixedPosition},ye=function(e,n,t,o){var r,l=this.getRowCount(),d=e[o]&&e[o].rowspan,c=n.filter((function(e){return e.type===t}));return e.forEach((function(n,o){n.type===t&&(r=o,d=e[o+1]?e[o+1].rowspan:l)})),d>1&&(c=m.default.map(c,(function(e){return(0,x.extend)({},e,{rowspan:d})}))),c.unshift.apply(c,(0,f.isDefined)(r)?[r,1]:[o,0]),e.splice.apply(e,c),d||1},be=function(e,n){for(var t=e?e.toString():"0";t.length<n;)t="0"+t;return t},Ie=function(e,n,t,o){for(var r,l,d=n.slice().map((function(e){return(0,x.extend)({},e)})),c=e._isColumnFixing(),f=t.slice().map((function(e){return(0,x.extend)({fixed:c},e)})),m=function(e){return t.reduce((function(n,t,r){var l=o&&e.type===U?"expand":e.type;return t.type===l||t.command===e.command?r:n}),-1)},h=function(e){return e.command!==t[l].command},i=0;i<n.length;i++)if(r=n[i],(l=r&&(r.type||r.command)?m(r):-1)>=0)if(o)d[i]=(0,x.extend)({fixed:c},t[l],r),r.type!==U&&(f=f.filter(h));else{var C={visibleIndex:r.visibleIndex,index:r.index,headerId:r.headerId,allowFixing:0===r.groupIndex,allowReordering:0===r.groupIndex,groupIndex:r.groupIndex};d[i]=(0,x.extend)({},r,t[l],r.type===U&&C)}return n.length&&o&&f.length&&(d=d.concat(f)),d},Oe=function(e,n){return(0,f.isDefined)(n.fixed)||!n.type?n.fixed:e._isColumnFixing()},we=function(e){e._bandColumnsCache=void 0},Se=function(e,n){var t,o=(0,f.isString)(n)&&n.substr(0,n.indexOf(":"));if(void 0!==n)return o&&(n=n.substr(o.length+1)),o?t=e.filter((function(e){return""+e[o]===n}))[0]:["index","name","dataField","caption"].some((function(o){return!!(t=e.filter((function(e){return e[o]===n}))[0])})),t};return{_getExpandColumnOptions:function(){return{type:"expand",command:"expand",width:"auto",cssClass:"dx-command-expand",allowEditing:!1,allowGrouping:!1,allowSorting:!1,allowResizing:!1,allowReordering:!1,allowHiding:!1}},_getFirstItems:function(e){var n,t=[];return e&&e.items().length>0&&(n=(0,O.normalizeSortingInfo)(e.group()).length,t=function e(n,t){if(!n||!t)return n;for(var i=0;i<n.length;i++){var o=e(n[i].items||n[i].collapsedItems,t-1);if(o&&o.length)return o}}(e.items(),n)||[]),t},_endUpdateCore:function(){!this._skipProcessingColumnsChange&&fe(this)},init:function(){var e=this,n=e.option("columns");e._commandColumns=e._commandColumns||[],e._columns=e._columns||[],e._isColumnsFromOptions=!!n,e._isColumnsFromOptions?(de(e,n?J(e,n):[]),le(e)):de(e,e._columnsUserState?J(e,e._columnsUserState):e._columns),function(e){var n=e._getExpandColumnOptions();e.addCommandColumn(n)}(e),e._dataSourceApplied?e.applyDataSource(e._dataSource,!0):ue(e)},callbackNames:function(){return["columnsChanged"]},getColumnByPath:function(path,e){var n,t=[];return path.replace(W,(function(e,n){return t.push(parseInt(n)),""})),t.length&&(n=e?t.reduce((function(e,n){return e&&e.columns&&e.columns[n]}),{columns:e}):function(e,n){var t,o,r=function(e){var n=t?t.index:void 0;return e.ownerBand===n};if(e.getBandColumnsCache().isPlain)t=e._columns[n[0]];else{o=e._columns.filter(r);for(var i=0;i<n.length;i++)(t=o[n[i]])&&(o=e._columns.filter(r))}return t}(this,t)),n},optionChanged:function(e){var n;switch(e.name){case"adaptColumnWidthByRatio":e.handled=!0;break;case"dataSource":e.value===e.previousValue||this.option("columns")||Array.isArray(e.value)&&Array.isArray(e.previousValue)||(this._columns=[]);break;case"columns":n=this._skipProcessingColumnsChange,e.handled=!0,this._skipProcessingColumnsChange||(e.name===e.fullName?(this._columnsUserState=null,this._ignoreColumnOptionNames=null,this.init()):(this._columnOptionChanged(e),n=!0)),n&&this._updateRequireResize(e);break;case"commonColumnSettings":case"columnAutoWidth":case"allowColumnResizing":case"allowColumnReordering":case"columnFixing":case"grouping":case"groupPanel":case"regenerateColumnsByVisibleItems":case"customizeColumns":case"editing":case"columnHidingEnabled":case"dateSerializationFormat":case"columnResizingMode":case"columnMinWidth":case"columnWidth":e.handled=!0;var t="columnWidth"===e.fullName&&["width"],o=e.fullName&&0===e.fullName.indexOf("editing.popup"),r=e.fullName&&0===e.fullName.indexOf("editing.form");o||r||this.reinit(t);break;case"rtlEnabled":this.reinit();break;default:this.callBase(e)}},_columnOptionChanged:function(e){var n={},t=this.getColumnByPath(e.fullName),o=e.fullName.replace(W,"");t&&(o?n[o]=e.value:n=e.value,this._skipProcessingColumnsChange=e.fullName,this.columnOption(t.index,n),this._skipProcessingColumnsChange=!1)},_updateRequireResize:function(e){var component=this.component;"width"===e.fullName.replace(W,"")&&component._updateLockCount&&(component._requireResize=!0)},publicMethods:function(){return["addColumn","deleteColumn","columnOption","columnCount","clearSorting","clearGrouping","getVisibleColumns","getVisibleColumnIndex"]},applyDataSource:function(e,n){var t=this,o=e&&e.isLoaded();if(t._dataSource=e,!t._dataSourceApplied||0===t._dataSourceColumnsCount||n||t.option("regenerateColumnsByVisibleItems")){if(o){if(!t._isColumnsFromOptions){var r=function(e,n){for(var t,o=e._getFirstItems(n),r={},d=[],i=0;i<o.length;i++)if(o[i])for(t in o[i])(0,f.isFunction)(o[i][t])&&!(0,l.isWrapped)(o[i][t])||(r[t]=!0);for(t in r)if(0!==t.indexOf("__")){var c=L(e,t);d.push(c)}return d}(t,e);r.length&&(de(t,r),t._dataSourceColumnsCount=t._columns.length,le(t))}return t.updateColumns(e,n)}t._dataSourceApplied=!1}else if(o&&!t.isAllDataTypesDefined(!0)&&t.updateColumnDataTypes(e))return ce(t,"columns"),fe(t),(new B.Deferred).reject().promise()},reset:function(){this._dataSourceApplied=!1,this._dataSourceColumnsCount=void 0,this.reinit()},resetColumnsCache:function(){var e=this;e._visibleColumns=void 0,e._fixedColumns=void 0,e._rowCount=void 0,we(e)},reinit:function(e){this._columnsUserState=this.getUserState(),this._ignoreColumnOptionNames=e||null,this.init(),e&&(this._ignoreColumnOptionNames=null)},isInitialized:function(){return!!this._columns.length||!!this.option("columns")},isDataSourceApplied:function(){return this._dataSourceApplied},getCommonSettings:function(e){var n=(!e||!e.type)&&this.option("commonColumnSettings")||{},t=this.option("grouping")||{},o=this.option("groupPanel")||{};return(0,x.extend)({allowFixing:this.option("columnFixing.enabled"),allowResizing:this.option("allowColumnResizing")||void 0,allowReordering:this.option("allowColumnReordering"),minWidth:this.option("columnMinWidth"),width:this.option("columnWidth"),autoExpandGroup:t.autoExpandAll,allowCollapsing:t.allowCollapsing,allowGrouping:o.allowColumnDragging&&o.visible||t.contextMenuEnabled},n)},isColumnOptionUsed:function(e){for(var i=0;i<this._columns.length;i++)if(this._columns[i][e])return!0},isAllDataTypesDefined:function(e){var n=this._columns;if(!n.length)return!1;for(var i=0;i<n.length;i++)if((n[i].dataField||n[i].calculateCellValue!==n[i].defaultCalculateCellValue)&&(!n[i].dataType||e&&n[i].deserializeValue&&void 0===n[i].serializationFormat))return!1;return!0},getColumns:function(){return this._columns},isBandColumnsUsed:function(){return this.getColumns().some((function(e){return e.isBand}))},getGroupColumns:function(){var e=[];return m.default.each(this._columns,(function(){var n=this;(0,f.isDefined)(n.groupIndex)&&(e[n.groupIndex]=n)})),e},getVisibleColumns:function(e){return this._visibleColumns=this._visibleColumns||this._getVisibleColumnsCore(),e=(0,f.isDefined)(e)?e:this._visibleColumns.length-1,this._visibleColumns[e]||[]},getFixedColumns:function(e){return this._fixedColumns=this._fixedColumns||this._getFixedColumnsCore(),e=(0,f.isDefined)(e)?e:this._fixedColumns.length-1,this._fixedColumns[e]||[]},getFilteringColumns:function(){return this.getColumns().filter((function(e){return(e.dataField||e.name)&&(e.allowFiltering||e.allowHeaderFiltering)})).map((function(e){var n=(0,x.extend)(!0,{},e);return(0,f.isDefined)(n.dataField)||(n.dataField=n.name),n.filterOperations=e.filterOperations!==e.defaultFilterOperations?n.filterOperations:null,n}))},_getFixedColumnsCore:function(){var e,n,t,o=this,r=[],l=o.getRowCount(),d={command:"transparent"},c=0;if(o._isColumnFixing())for(var i=0;i<=l;i++){e=0,t=null,n=null;for(var m=o.getVisibleColumns(i,!0),h=0;h<m.length;h++){var x=m[h-1],C=m[h];C.fixed?x&&x.fixed&&_e(o,x)!==_e(o,C)?(0,f.isDefined)(n)||(n=h):t=C.fixedPosition:(0===i&&(C.isBand&&C.colspan?c+=C.colspan:c++),e++,(0,f.isDefined)(n)||(n=h))}if(0===i&&(0===e||e>=m.length))return[];(0,f.isDefined)(n)||(n="right"===t?0:m.length),r[i]=m.slice(0),d.colspan||(d.colspan=c),r[i].splice(n,e,d)}return r.map((function(e){return e.map((function(e){var n=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?G(Object(source),!0).forEach((function(n){k(e,n,source[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):G(Object(source)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(source,n))}))}return e}({},e);return n.headerId&&(n.headerId+="-fixed"),n}))}))},_isColumnFixing:function(){var e=this.option("columnFixing.enabled");return!e&&m.default.each(this._columns,(function(n,t){if(t.fixed)return e=!0,!1})),e},_getExpandColumnsCore:function(){return this.getGroupColumns()},getExpandColumns:function(){var e,n=this._getExpandColumnsCore(),t=n.filter((function(e){return 0===e.groupIndex}))[0],o=t&&t.fixed,r=this._isColumnFixing();return n.length&&(e=this.columnOption("command:expand")),n=m.default.map(n,(function(n){return(0,x.extend)({},n,{visibleWidth:null,minWidth:null,cellTemplate:(0,f.isDefined)(n.groupIndex)?null:n.cellTemplate,headerCellTemplate:null,fixed:!(!(0,f.isDefined)(n.groupIndex)||!o)||r},e,{index:n.index,type:n.type||U})}))},getBandColumnsCache:function(){if(!this._bandColumnsCache){var e=this._columns,n={},t={},o=!0;e.forEach((function(r){var l=r.ownerBand,d=e[l];r.hasColumns&&(o=!1),r.colspan&&(r.colspan=void 0),r.rowspan&&(r.rowspan=void 0),d?t[r.index]=d:l=-1,n[l]=n[l]||[],n[l].push(r)})),this._bandColumnsCache={isPlain:o,columnChildrenByIndex:n,columnParentByIndex:t}}return this._bandColumnsCache},_isColumnVisible:function(e){return e.visible&&this.isParentColumnVisible(e.index)},_getVisibleColumnsCore:function(){var i,e,n=this,t=[],o=0,r=0,l=n.getRowCount(),d=[],c=[],h=0,x=n.option("rtlEnabled"),C=n.getBandColumnsCache(),v=Ie(n,n.getExpandColumns(),n._columns),y=Ie(n,n._columns,n._commandColumns,!0),I=function(e){var i;for(i=0;e>1;i++)e/=10;return i}(y.length);for(function(e,n,t){for(var o,i=0;i<n.length;i++){var r=n[i];(r.visible||r.command)&&(r.isBand&&(r.colspan=r.colspan||Y(e,r.index)),r.isBand&&r.colspan||(o=e.getRowCount(),r.command||(0,f.isDefined)(r.groupIndex)&&!r.showWhenGrouped||(o-=X(r.index,t.columnParentByIndex).length),o>1&&(r.rowspan=o)))}}(n,y,C),i=0;i<l;i++)t[i]=[],c[i]=[{}],d[i]=[{},{},{}];return m.default.each(y,(function(){var t,o=this,r=o.visibleIndex,l=X(o.index,C.columnParentByIndex);if(n._isColumnVisible(o)&&(!(0,f.isDefined)(o.groupIndex)||o.showWhenGrouped)){var m=l.length;if(r<0?(r=-r,t=c[m]):(o.fixed=l.length?l[0].fixed:o.fixed,o.fixedPosition=l.length?l[0].fixedPosition:o.fixedPosition,o.fixed?(e="right"===o.fixedPosition,!x||o.command&&!ve(n,o)||(e=!e),t=e?d[m][2]:d[m][0]):t=d[m][1]),l.length)for(r=be(r,I),i=l.length-1;i>=0;i--)r=be(l[i].visibleIndex,I)+r;t[r]=t[r]||[],t[r].push(o),h++}})),m.default.each(t,(function(e){(0,_.orderEach)(c[e],(function(n,o){t[e].unshift.apply(t[e],o)}));var l=t[e].length;m.default.each(d[e],(function(n,o){(0,_.orderEach)(o,(function(n,o){t[e].push.apply(t[e],o)}))})),r<e+1&&(r+=ye.call(n,t[e],v,"detailExpand",l)),o<e+1&&(o+=ye.call(n,t[e],v,U,l))})),t.push(Ce(t)),!h&&n._columns.length&&t[l].push({command:"empty"}),t},getInvisibleColumns:function(e,n){var t,o=this,r=[];return e=e||o._columns,m.default.each(e,(function(e,l){l.ownerBand===n&&(l.isBand?(t=l.visible?o.getInvisibleColumns(o.getChildrenByBandColumn(l.index),l.index):o.getChildrenByBandColumn(l.index)).length&&(r.push(l),r=r.concat(t)):l.visible||r.push(l))})),r},getChooserColumns:function(e){var n=e?this.getColumns():this.getInvisibleColumns();return(0,c.grep)(n,(function(e){return e.showInColumnChooser}))},allowMoveColumn:function(e,n,t,o){var r=ae(this,e,t),l=this._columns[r];return!(!l||!(l.allowReordering||l.allowGrouping||l.allowHiding))&&(t===o?t!==V&&((e=(0,f.isObject)(e)?e.columnIndex:e)!==(n=(0,f.isObject)(n)?n.columnIndex:n)&&e+1!==n):t===I&&o!==V||o===I?l&&l.allowGrouping:t!==V&&o!==V||l&&l.allowHiding)},moveColumn:function(e,n,t,o){var r,l,d=this,c={},m=ae(d,e,t),h=ae(d,n,o);if(m>=0){var x=d._columns[m];if(n=(0,f.isObject)(n)?n.columnIndex:n,l=h>=0?d._columns[h].groupIndex:-1,(0,f.isDefined)(x.groupIndex)&&t===I&&(l>x.groupIndex&&l--,o!==I?c.groupIndex=void 0:(r=x.groupIndex,delete x.groupIndex,oe(d))),o===I)c.groupIndex=function(e,n,t){var i,o=e.getGroupColumns();if(t>=0)for(i=0;i<o.length;i++)o[i].groupIndex>=t&&o[i].groupIndex++;else for(t=0,i=0;i<o.length;i++)t=Math.max(t,o[i].groupIndex+1);return t}(d,0,l),x.groupIndex=r;else if(n>=0){var C=d._columns[h];C&&x.ownerBand===C.ownerBand?Oe(d,x)^Oe(d,C)?c.visibleIndex=j:c.visibleIndex=C.visibleIndex:c.visibleIndex=j}var v=o!==V;x.visible!==v&&(c.visible=v),d.columnOption(x.index,c)}},changeSortOrder:function(e,n){var t=this,o={},r=t.option("sorting"),l=r&&r.mode,d="single"===l||!n,c="single"===l||"multiple"===l,h=t._columns[e];c&&h&&h.allowSorting&&(d&&!(0,f.isDefined)(h.groupIndex)&&m.default.each(t._columns,(function(n){n!==e&&this.sortOrder&&((0,f.isDefined)(this.groupIndex)||delete this.sortOrder,delete this.sortIndex)})),ge(n)?h.sortOrder!==n&&(o.sortOrder=n):"none"===n?h.sortOrder&&(o.sortIndex=void 0,o.sortOrder=void 0):function(e){if("ctrl"===n){if(!("sortOrder"in e)||!("sortIndex"in e))return!1;o.sortOrder=void 0,o.sortIndex=void 0}else(0,f.isDefined)(e.groupIndex)||(0,f.isDefined)(e.sortIndex)?o.sortOrder="desc"===e.sortOrder?"asc":"desc":o.sortOrder="asc"}(h)),t.columnOption(h.index,o)},getSortDataSourceParameters:function(e){var n=[],t=[];return m.default.each(this._columns,(function(){(this.dataField||this.selector||this.calculateCellValue)&&(0,f.isDefined)(this.sortIndex)&&!(0,f.isDefined)(this.groupIndex)&&(n[this.sortIndex]=this)})),m.default.each(n,(function(){if(ge(this&&this.sortOrder)){var n={selector:this.calculateSortValue||this.displayField||this.calculateDisplayValue||e&&this.selector||this.dataField||this.calculateCellValue,desc:"desc"===this.sortOrder};this.sortingMethod&&(n.compare=this.sortingMethod.bind(this)),t.push(n)}})),t.length>0?t:null},getGroupDataSourceParameters:function(e){var n=[];return m.default.each(this.getGroupColumns(),(function(){var t=this.calculateGroupValue||this.displayField||this.calculateDisplayValue||e&&this.selector||this.dataField||this.calculateCellValue;if(t){var o={selector:t,desc:"desc"===this.sortOrder,isExpanded:!!this.autoExpandGroup};this.sortingMethod&&(o.compare=this.sortingMethod.bind(this)),n.push(o)}})),n.length>0?n:null},refresh:function(e){var n=[];return m.default.each(this._columns,(function(){var t=this.lookup;if(t&&!this.calculateDisplayValue){if(e&&t.valueMap)return;t.update&&n.push(t.update())}})),B.when.apply(o.default,n).done(se.bind(null,this))},_updateColumnOptions:function(e,t){e.selector=e.selector||function(data){return e.calculateCellValue(data)},m.default.each(["calculateSortValue","calculateGroupValue","calculateDisplayValue"],(function(n,o){var r=e[o];(0,f.isFunction)(r)&&!r.originalCallback&&(e[o]=function(data){return r.call(e,data)},e[o].originalCallback=r,e[o].columnIndex=t)})),(0,f.isString)(e.calculateDisplayValue)&&(e.displayField=e.calculateDisplayValue,e.calculateDisplayValue=d.default.compileGetter(e.displayField)),e.calculateDisplayValue&&(e.displayValueMap=e.displayValueMap||{}),ee(e,e.dataType);var o=e.lookup;o&&ee(o,o.dataType);var r=o?o.dataType:e.dataType;r&&(e.alignment=e.alignment||function(e,n){switch(e){case"number":return"right";case"boolean":return"center";default:return(0,h.getDefaultAlignment)(n)}}(r,this.option("rtlEnabled")),e.format=e.format||(0,O.getFormatByDataType)(r),e.customizeText=e.customizeText||te(r),e.defaultFilterOperations=e.defaultFilterOperations||!o&&n[r]||[],(0,f.isDefined)(e.filterOperations)||A(e),e.defaultFilterOperation=e.filterOperations&&e.filterOperations[0]||"=",e.showEditorAlways=(0,f.isDefined)(e.showEditorAlways)?e.showEditorAlways:"boolean"===r&&!e.cellTemplate)},updateColumnDataTypes:function(e){var n=this,t=n.option("dateSerializationFormat"),o=n._getFirstItems(e),r=!1;return m.default.each(n._columns,(function(e,l){var i,d,c,f,m,h=l.lookup;if((0,O.isDateType)(l.dataType)&&void 0===l.serializationFormat&&(l.serializationFormat=t),h&&(0,O.isDateType)(h.dataType)&&void 0===l.serializationFormat&&(h.serializationFormat=t),l.calculateCellValue&&o.length){if(!l.dataType||h&&!h.dataType){for(i=0;i<o.length;i++)d=l.calculateCellValue(o[i]),l.dataType||(m=Z(d),(c=c||m)&&m&&c!==m&&(c="string")),h&&!h.dataType&&(m=Z((0,O.getDisplayValue)(l,d,o[i])),(f=f||m)&&m&&f!==m&&(f="string"));(c||f)&&(c&&(l.dataType=c),h&&f&&(h.dataType=f),r=!0)}if(void 0===l.serializationFormat||h&&void 0===h.serializationFormat)for(i=0;i<o.length;i++)d=l.calculateCellValue(o[i],!0),void 0===l.serializationFormat&&(l.serializationFormat=$(l.dataType,d)),h&&void 0===h.serializationFormat&&(h.serializationFormat=$(h.dataType,h.calculateCellValue(d,!0)))}n._updateColumnOptions(l,e)})),r},_customizeColumns:function(e){var n=this,t=n.option("customizeColumns");t&&(e.some((function(e){return(0,f.isObject)(e.ownerBand)}))&&ue(n),t(e),de(n,J(n,e)))},updateColumns:function(e,n){var t=this;if(n||this.updateSortingGrouping(e),!e||e.isLoaded()){var o=e?e.sort()||[]:this.getSortDataSourceParameters(),r=e?e.group()||[]:this.getGroupDataSourceParameters(),l=null==e?void 0:e.lastLoadOptions().filter;this._customizeColumns(this._columns),ue(this);var d=this._columns;return(0,B.when)(this.refresh(!0)).always((function(){t._columns===d&&(t._updateChanges(e,{sorting:o,grouping:r,filtering:l}),fe(t))}))}},_updateChanges:function(e,n){e&&(this.updateColumnDataTypes(e),this._dataSourceApplied=!0),(0,O.equalSortParameters)(n.sorting,this.getSortDataSourceParameters())||ce(this,"sorting"),(0,O.equalSortParameters)(n.grouping,this.getGroupDataSourceParameters())||ce(this,"grouping");var t=this.getController("data");t&&!(0,O.equalFilterParameters)(n.filtering,t.getCombinedFilter())&&ce(this,"filtering"),ce(this,"columns")},updateSortingGrouping:function(e,n){var t,o,r=this,l=function(e,n,t){m.default.each(e,(function(e,o){if(delete o[t],n)for(var i=0;i<n.length;i++){var r=n[i].selector,l=n[i].isExpanded;if(r===o.dataField||r===o.name||r===o.selector||r===o.calculateCellValue||r===o.calculateGroupValue||r===o.calculateDisplayValue){o.sortOrder=o.sortOrder||(n[i].desc?"desc":"asc"),void 0!==l&&(o.autoExpandGroup=l),o[t]=i;break}}}))};if(e){t=(0,O.normalizeSortingInfo)(e.sort());var d=(0,O.normalizeSortingInfo)(e.group()),c=r.getGroupDataSourceParameters(),f=r.getSortDataSourceParameters();r._columns.length||(m.default.each(d,(function(e,n){r._columns.push(n.selector)})),m.default.each(t,(function(e,n){r._columns.push(n.selector)})),de(r,J(r,r._columns))),!n&&(c||r._hasUserState)||(0,O.equalSortParameters)(d,c)||(l(r._columns,d,"groupIndex"),n&&(ce(r,"grouping"),o=!0)),!n&&(f||r._hasUserState)||(0,O.equalSortParameters)(t,f)||(l(r._columns,t,"sortIndex"),n&&(ce(r,"sorting"),o=!0)),o&&fe(r)}},updateFilter:function(filter,e,n,t){if(!Array.isArray(filter))return filter;if(n=void 0!==(filter=(0,x.extend)([],filter)).columnIndex?filter.columnIndex:n,t=void 0!==filter.filterValue?filter.filterValue:t,(0,f.isString)(filter[0])&&"!"!==filter[0]){var o=this.columnOption(filter[0]);e?(0,v.default)().forceIsoDateParsing&&o&&o.serializeValue&&filter.length>1&&(filter[filter.length-1]=o.serializeValue(filter[filter.length-1],"filter")):o&&o.selector&&(filter[0]=o.selector,filter[0].columnIndex=o.index)}else(0,f.isFunction)(filter[0])&&(filter[0].columnIndex=n,filter[0].filterValue=t);for(var i=0;i<filter.length;i++)filter[i]=this.updateFilter(filter[i],e,n,t);return filter},columnCount:function(){return this._columns?this._columns.length:0},columnOption:function(e,option,n,t){var o=this,r=o._columns.concat(o._commandColumns),l=Se(r,e);if(l){if(1===arguments.length)return(0,x.extend)({},l);if((0,f.isString)(option)){if(2===arguments.length)return he(o,l,option);he(o,l,option,n,t)}else(0,f.isObject)(option)&&m.default.each(option,(function(e,n){he(o,l,e,n,t)}));fe(o)}},clearSorting:function(){var e=this,n=this.columnCount();e.beginUpdate();for(var i=0;i<n;i++)e.columnOption(i,"sortOrder",void 0);e.endUpdate()},clearGrouping:function(){var e=this,n=this.columnCount();e.beginUpdate();for(var i=0;i<n;i++)e.columnOption(i,"groupIndex",void 0);e.endUpdate()},getVisibleIndex:function(e,n){for(var t=this.getVisibleColumns(n),i=t.length-1;i>=0;i--)if(t[i].index===e)return i;return-1},getVisibleIndexByColumn:function(e,n){var t=this.getVisibleColumns(n),o=t.filter((function(col){return col.index===e.index&&col.command===e.command}))[0];return t.indexOf(o)},getVisibleColumnIndex:function(e,n){var t=this.columnOption(e,"index");return this.getVisibleIndex(t,n)},addColumn:function(e){var n=this,t=L(n,e),o=n._columns.length;n._columns.push(t),t.isBand&&(n._columns=J(n,n._columns),t=n._columns[o]),t.added=e,ue(n,t),n.updateColumns(n._dataSource)},deleteColumn:function(e){var n,t=this,o=t.columnOption(e);if(o&&o.index>=0){if((n=t._columns).forEach((function(e){(0,f.isDefined)(e.ownerBand)&&(e.ownerBand=n[e.ownerBand])})),t._columns.splice(o.index,1),o.isBand){var r=t.getChildrenByBandColumn(o.index).map((function(e){return e.index}));t._columns=t._columns.filter((function(e){return r.indexOf(e.index)<0}))}ue(t),t.updateColumns(t._dataSource)}},addCommandColumn:function(e){var n=this._commandColumns.filter((function(n){return n.command===e.command}))[0];n||(n=e,this._commandColumns.push(n))},getUserState:function(){var i,e=this._columns,n=[];function t(t,o){void 0!==e[i][o]&&(n[i][o]=e[i][o])}for(i=0;i<e.length;i++)n[i]={},m.default.each(R,t);return n},setUserState:function(e){var n=this,t=n._dataSource,o=n.option("stateStoring.ignoreColumnOptionNames");if(!o){o=[];var r=n.getCommonSettings();n.option("columnChooser.enabled")||o.push("visible"),"none"===n.option("sorting.mode")&&o.push("sortIndex","sortOrder"),r.allowGrouping||o.push("groupIndex"),r.allowFixing||o.push("fixed","fixedPosition"),r.allowResizing||o.push("width","visibleWidth");var l=!n.option("filterPanel.visible");!n.option("filterRow.visible")&&l&&o.push("filterValue","selectedFilterOperation"),!n.option("headerFilter.visible")&&l&&o.push("filterValues","filterType")}n._columnsUserState=e,n._ignoreColumnOptionNames=o,n._hasUserState=!!e,ce(n,"filtering"),n.init(),t&&(t.sort(n.getSortDataSourceParameters()),t.group(n.getGroupDataSourceParameters()))},_createCalculatedColumnOptions:function(e,n){var t={},o=e.dataField;if((Array.isArray(e.columns)&&e.columns.length||e.isBand)&&(t.isBand=!0,o=null),o){if((0,f.isString)(o)){var c=d.default.compileGetter(o);t={caption:w.default.captionize(o),calculateCellValue:function(data,e){var n=c(data);return this.deserializeValue&&!e?this.deserializeValue(n):n},setCellValue:xe,parseValue:function(text){var e,n,t=this;return"number"===t.dataType?(0,f.isString)(text)&&t.format?(n=F.default.parse(text),(0,f.isNumeric)(n)&&(e=n)):(0,f.isDefined)(text)&&(0,f.isNumeric)(text)&&(e=Number(text)):"boolean"===t.dataType?text===t.trueText?e=!0:text===t.falseText&&(e=!1):(0,O.isDateType)(t.dataType)?(n=D.default.parse(text,t.format))&&(e=n):e=text,e}}}t.allowFiltering=!0}else t.allowFiltering=!!e.calculateFilterExpression;return t.calculateFilterExpression=function(){return E.default.defaultCalculateFilterExpression.apply(this,arguments)},t.createFilterExpression=function(e){var n;return this.calculateFilterExpression&&(n=this.calculateFilterExpression.apply(this,arguments)),(0,f.isFunction)(n)&&(n=[n,"=",!0]),n&&(n.columnIndex=this.index,n.filterValue=e),n},o&&(0,f.isString)(o)||(0,x.extend)(!0,t,{allowSorting:!1,allowGrouping:!1,calculateCellValue:function(){return null}}),n&&(t.allowFixing=!1),e.dataType&&(t.userDataType=e.dataType),e.selectedFilterOperation&&!("defaultSelectedFilterOperation"in t)&&(t.defaultSelectedFilterOperation=e.selectedFilterOperation),e.lookup&&(t.lookup={calculateCellValue:function(e,n){return this.valueExpr&&(e=this.valueMap&&this.valueMap[e]),this.deserializeValue&&!n?this.deserializeValue(e):e},updateValueMap:function(){if(this.valueMap={},this.items)for(var e=d.default.compileGetter(this.valueExpr),n=d.default.compileGetter(this.displayExpr),i=0;i<this.items.length;i++){var t=this.items[i],o=n(t);this.valueMap[e(t)]=o,this.dataType=this.dataType||Z(o)}},update:function(){var e=this,n=e.dataSource;if(n)if((0,f.isFunction)(n)&&!(0,l.isWrapped)(n)&&(n=n({})),(0,f.isPlainObject)(n)||n instanceof z.default||Array.isArray(n)){if(e.valueExpr){var t=(0,T.normalizeDataSourceOptions)(n);return t.paginate=!1,(n=new P.DataSource(t)).load().done((function(data){e.items=data,e.updateValueMap&&e.updateValueMap()}))}}else y.default.log("E1016");else e.updateValueMap&&e.updateValueMap()}}),t.resizedCallbacks=(0,r.default)(),e.resized&&t.resizedCallbacks.add(e.resized.bind(e)),m.default.each(t,(function(e){if((0,f.isFunction)(t[e])&&0!==e.indexOf("default")){var n="default"+e.charAt(0).toUpperCase()+e.substr(1);t[n]=t[e]}})),t},getRowCount:function(){var e,n,t;return this._rowCount=this._rowCount||(n=1,t=(e=this).getBandColumnsCache().columnParentByIndex,e._columns.forEach((function(e){var o=X(e.index,t),r=o.filter((function(e){return!e.visible}));e.visible&&!r.length&&(n=Math.max(n,o.length+1))})),n),this._rowCount},getRowIndex:function(e,n){var t=this._columns[e],o=this.getBandColumnsCache();return t&&(n||t.visible&&!t.command&&!(0,f.isDefined)(t.groupIndex))?X(e,o.columnParentByIndex).length:0},getChildrenByBandColumn:function(e,n){var t=this.getBandColumnsCache(),o=K(e,t.columnChildrenByIndex,!n);return n?o.filter((function(e){return e.visible&&!e.command})).sort((function(e,n){return e.visibleIndex-n.visibleIndex})):o},isParentBandColumn:function(e,n){var t=!1,o=this._columns[e],r=this.getBandColumnsCache(),l=o&&X(e,r.columnParentByIndex);return l&&m.default.each(l,(function(e,o){if(o.index===n)return t=!0,!1})),t},isParentColumnVisible:function(e){var n=!0,t=this.getBandColumnsCache(),o=e>=0&&X(e,t.columnParentByIndex);return o&&m.default.each(o,(function(e,t){return n=n&&t.visible})),n},getColumnId:function(e){return e.command&&e.type===U?ve(this,e)?"type:"+e.type:"command:"+e.command:e.index},getCustomizeTextByDataType:te,getHeaderContentAlignment:function(e){return this.option("rtlEnabled")?"left"===e?"right":"left":e}}}())}}}}]);