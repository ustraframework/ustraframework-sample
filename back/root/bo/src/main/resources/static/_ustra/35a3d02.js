(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{1097:function(e,t,n){"use strict";var o=y(n(0)),r=n(70),l=n(1),d=n(10),c=y(n(29)),h=y(n(288)),f=y(n(1676)),_=y(n(182)),v=n(184),m=n(2),C=n(6);function y(e){return e&&e.__esModule?e:{default:e}}var w="dx-state-disabled",x=_.default.inherit({_getDefaultOptions:function(){return(0,l.extend)(this.callBase(),{keyExpr:"id",displayExpr:"text",selectedExpr:"selected",disabledExpr:"disabled",itemsExpr:"items",hoverStateEnabled:!0,parentIdExpr:"parentId",expandedExpr:"expanded"})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===c.default.real().deviceType&&!c.default.isSimulator()},options:{focusStateEnabled:!0}}])},_init:function(){this.callBase(),this._initAccessors(),this._initDataAdapter(),this._initDynamicTemplates()},_initDataSource:function(){this.callBase(),this._dataSource&&this._dataSource.paginate(!1)},_initDataAdapter:function(){var e=this._createDataAdapterAccessors();this._dataAdapter=new f.default((0,l.extend)({dataAccessors:{getters:e.getters,setters:e.setters},items:this.option("items")},this._getDataAdapterOptions()))},_getDataAdapterOptions:C.noop,_initDynamicTemplates:function(){var e=this;this._templateManager.addDefaultTemplates({item:new v.BindableTemplate(function(t,n){t.html(n.html).append(this._getIconContainer(n)).append(this._getTextContainer(n)).append(this._getPopoutContainer(n)),e._addContentClasses(n,t.parent())}.bind(this),["text","html","items","icon"],this.option("integrationOptions.watchMethod"),{text:this._displayGetter,items:this._itemsGetter})})},_getIconContainer:function(e){return e.icon?h.default.getImageContainer(e.icon):void 0},_getTextContainer:function(e){return(0,o.default)("<span>").text(e.text)},_getPopoutContainer:C.noop,_addContentClasses:C.noop,_initAccessors:function(){var e=this;(0,d.each)(this._getAccessors(),(function(t,n){e._compileAccessor(n)})),this._compileDisplayGetter()},_getAccessors:function(){return["key","selected","items","disabled","parentId","expanded"]},_getChildNodes:function(e){var t=this,n=[];return(0,d.each)(e.internalFields.childrenKeys,(function(e,o){var r=t._dataAdapter.getNodeByKey(o);n.push(r)})),n},_hasChildren:function(e){return e&&e.internalFields.childrenKeys.length},_compileAccessor:function(e){var t="_"+e+"Getter",n="_"+e+"Setter",o=this.option(e+"Expr");return o?(0,m.isFunction)(o)?(this[n]=function(e,t){e[o()]=t},void(this[t]=function(e){return e[o()]})):(this[t]=(0,r.compileGetter)(o),void(this[n]=(0,r.compileSetter)(o))):(this[t]=C.noop,void(this[n]=C.noop))},_createDataAdapterAccessors:function(){var e=this,t={getters:{},setters:{}};return(0,d.each)(this._getAccessors(),(function(n,o){var r="_"+o+"Getter",l="_"+o+"Setter",d="parentId"===o?"parentKey":o;t.getters[d]=e[r],t.setters[d]=e[l]})),t.getters.display=this._displayGetter?this._displayGetter:function(e){return e.text},t},_initMarkup:function(){this.callBase(),this._addWidgetClass()},_addWidgetClass:function(){this._focusTarget().addClass(this._widgetClass())},_widgetClass:C.noop,_renderItemFrame:function(e,t){var n=this.callBase.apply(this,arguments);return n.toggleClass(w,!!this._disabledGetter(t)),n},_optionChanged:function(e){switch(e.name){case"displayExpr":case"keyExpr":this._initAccessors(),this._initDynamicTemplates(),this.repaint();break;case"itemsExpr":case"selectedExpr":case"disabledExpr":case"expandedExpr":case"parentIdExpr":this._initAccessors(),this._initDataAdapter(),this.repaint();break;case"items":this._initDataAdapter(),this.callBase(e);break;default:this.callBase(e)}}});e.exports=x},1676:function(e,t,n){"use strict";var o=n(37),r=n(6),l=n(10),d=n(10).each,c=n(2),h=n(1).extend,f=n(56),_=n(639).getOperationBySearchMode,v=n(35).inArray,m=n(153),C=n(289),y=n(1677),w="expanded",x="selected",I=o.inherit({ctor:function(e){this.options={},h(this.options,this._defaultOptions(),e),this.options.dataConverter.setDataAccessors(this.options.dataAccessors),this._selectedNodesKeys=[],this._expandedNodesKeys=[],this._dataStructure=[],this._createInternalDataStructure(),this.getTreeNodes()},setOption:function(e,t){this.options[e]=t,"recursiveSelection"===e&&this._updateSelection()},_defaultOptions:function(){return{dataAccessors:void 0,items:[],multipleSelection:!0,recursiveSelection:!1,recursiveExpansion:!1,rootValue:0,searchValue:"",dataType:"tree",searchMode:"contains",dataConverter:new y,onNodeChanged:r.noop,sort:null}},_createInternalDataStructure:function(){this._initialDataStructure=this.options.dataConverter.createPlainStructure(this.options.items,this.options.rootValue,this.options.dataType),this._dataStructure=this.options.searchValue.length?this.search(this.options.searchValue):this._initialDataStructure,this.options.dataConverter._dataStructure=this._dataStructure,this._updateSelection(),this._updateExpansion()},_updateSelection:function(){this.options.recursiveSelection&&(this._setChildrenSelection(),this._setParentSelection()),this._selectedNodesKeys=this._updateNodesKeysArray(x)},_updateExpansion:function(e){this.options.recursiveExpansion&&(e?this._updateOneBranch(e):this._setParentExpansion()),this._expandedNodesKeys=this._updateNodesKeysArray(w)},_updateNodesKeysArray:function(e){var t=this,n=[];return d(t._getDataBySelectionMode(),(function(o,r){t._isNodeVisible(r)&&r.internalFields[e]&&(e===w||t.options.multipleSelection?n.push(r.internalFields.key):(n.length&&t.toggleSelection(n[0],!1,!0),n=[r.internalFields.key]))})),n},_getDataBySelectionMode:function(){return this.options.multipleSelection?this.getData():this.getFullData()},_isNodeVisible:function(e){return!1!==e.internalFields.item.visible},_getByKey:function(data,e){return data===this._dataStructure?this.options.dataConverter._getByKey(e):this.options.dataConverter.getByKey(data,e)},_setChildrenSelection:function(){var e=this;d(this._dataStructure,(function(t,n){if(n.internalFields.childrenKeys.length){var o=n.internalFields.selected;!0===o&&e._toggleChildrenSelection(n,o)}}))},_setParentSelection:function(){var e=this;d(this._dataStructure,(function(t,n){e.options.dataConverter.getParentNode(n)&&n.internalFields.parentKey!==e.options.rootValue&&e._iterateParents(n,(function(t){var n=e._calculateSelectedState(t);e._setFieldState(t,x,n)}))}))},_setParentExpansion:function(){var e=this;d(this._dataStructure,(function(t,n){n.internalFields.expanded&&e._updateOneBranch(n.internalFields.key)}))},_updateOneBranch:function(e){var t=this,n=this.getNodeByKey(e);t._iterateParents(n,(function(e){t._setFieldState(e,w,!0)}))},_iterateChildren:function(e,t,n,o){if(c.isFunction(n)){var r=this,l=e.internalFields.key;-1===(o=o||[]).indexOf(l)&&(o.push(l),d(e.internalFields.childrenKeys,(function(e,l){var d=r.getNodeByKey(l);n(d),d.internalFields.childrenKeys.length&&t&&r._iterateChildren(d,t,n,o)})))}},_iterateParents:function(e,t,n){if(e.internalFields.parentKey!==this.options.rootValue&&c.isFunction(t)){n=n||[];var o=e.internalFields.key;if(-1===n.indexOf(o)){n.push(o);var r=this.options.dataConverter.getParentNode(e);r&&(t(r),r.internalFields.parentKey!==this.options.rootValue&&this._iterateParents(r,t,n))}}},_calculateSelectedState:function(e){for(var t=e.internalFields.childrenKeys.length,n=0,o=0,r=!1,i=0;i<=t-1;i++){var l=this.getNodeByKey(e.internalFields.childrenKeys[i]),d=!1===l.internalFields.item.visible,c=l.internalFields.selected;d?o++:c?n++:void 0===c&&(n+=.5)}return n&&(r=n===t-o||void 0),r},_toggleChildrenSelection:function(e,t){var n=this;this._iterateChildren(e,!0,(function(e){n._isNodeVisible(e)&&n._setFieldState(e,x,t)}))},_setFieldState:function(e,t,n){e.internalFields[t]!==n&&(e.internalFields[t]=n,e.internalFields.publicNode&&(e.internalFields.publicNode[t]=n),this.options.dataAccessors.setters[t](e.internalFields.item,n),this.options.onNodeChanged(e))},_markChildren:function(e){var t=this;d(e,(function(e,n){var o=t.getIndexByKey(n),r=t.getNodeByKey(n);t._dataStructure[o]=0,r.internalFields.childrenKeys.length&&t._markChildren(r.internalFields.childrenKeys)}))},_removeNode:function(e){var t=this.getNodeByKey(e);this._dataStructure[this.getIndexByKey(e)]=0,this._markChildren(t.internalFields.childrenKeys);var n=this,o=0,r=h([],this._dataStructure);d(r,(function(e,t){t||(n._dataStructure.splice(e-o,1),o++)}))},_addNode:function(e){var t=this.options.dataConverter,n=t._convertItemToNode(e,this.options.dataAccessors.getters.parentKey(e));this._dataStructure=this._dataStructure.concat(n),this._initialDataStructure=this._initialDataStructure.concat(n),t._dataStructure=t._dataStructure.concat(n)},_updateFields:function(){this.options.dataConverter.updateChildrenKeys(),this._updateSelection(),this._updateExpansion()},getSelectedNodesKeys:function(){return this._selectedNodesKeys},getExpandedNodesKeys:function(){return this._expandedNodesKeys},getData:function(){return this._dataStructure},getFullData:function(){return this._initialDataStructure},getNodeByItem:function(e){var t=null;return d(this._dataStructure,(function(n,o){if(o.internalFields.item===e)return t=o,!1})),t},getNodesByItems:function(e){var t=this,n=[];return d(e,(function(e,o){var r=t.getNodeByItem(o);r&&n.push(r)})),n},getNodeByKey:function(e,data){return this._getByKey(data||this._getDataBySelectionMode(),e)},getTreeNodes:function(){return this.options.dataConverter.convertToPublicNodes(this.getRootNodes())},getItemsCount:function(){return this.options.dataConverter.getItemsCount()},getVisibleItemsCount:function(){return this.options.dataConverter.getVisibleItemsCount()},getPublicNode:function(e){return e.internalFields.publicNode},getRootNodes:function(){return this.getChildrenNodes(this.options.rootValue)},getChildrenNodes:function(e){return m(this._dataStructure).filter(["internalFields.parentKey",e]).toArray()},getIndexByKey:function(e){return this.options.dataConverter.getIndexByKey(e)},addItem:function(e){this._addNode(e),this._updateFields()},removeItem:function(e){this._removeNode(e),this._updateFields()},toggleSelection:function(e,t,n){var o=this._isSingleModeUnselect(t),r=this._getByKey(n||o?this._initialDataStructure:this._dataStructure,e);this._setFieldState(r,x,t),this.options.recursiveSelection&&!n&&(t?this._setChildrenSelection():this._toggleChildrenSelection(r,t),this._setParentSelection()),this._selectedNodesKeys=this._updateNodesKeysArray(x)},_isSingleModeUnselect:function(e){return!this.options.multipleSelection&&!e},toggleNodeDisabledState:function(e,t){var n=this.getNodeByKey(e);this._setFieldState(n,"disabled",t)},toggleSelectAll:function(e){if(c.isDefined(e)){var t=this,n=t._selectedNodesKeys[t._selectedNodesKeys.length-1],o=t._isSingleModeUnselect(e)?this._initialDataStructure:this._dataStructure;d(o,(function(n,o){t._isNodeVisible(o)&&t._setFieldState(o,x,e)})),t._selectedNodesKeys=t._updateNodesKeysArray(x),!e&&t.options.selectionRequired&&t.toggleSelection(n,!0)}},isAllSelected:function(){return!!this.getSelectedNodesKeys().length&&(this.getSelectedNodesKeys().length===this.getVisibleItemsCount()||void 0)},toggleExpansion:function(e,t){var n=this.getNodeByKey(e);this._setFieldState(n,w,t),t&&this._updateExpansion(e),this._expandedNodesKeys=this._updateNodesKeysArray(w)},isFiltered:function(e){return!this.options.searchValue.length||!!this._filterDataStructure(this.options.searchValue,[e]).length},_createCriteria:function(e,t,n){var o=[];return Array.isArray(e)?(l.each(e,(function(i,e){o.push([e,n,t],"or")})),o.pop(),o):[e,n,t]},_filterDataStructure:function(e,t){var n=this.options.searchExpr||this.options.dataAccessors.getters.display,o=_(this.options.searchMode),r=this._createCriteria(n,e,o);return t=t||this._initialDataStructure,m(t).filter(r).toArray()},search:function(e){var t=this,n=this._filterDataStructure(e),o=this.options.dataConverter;return function e(n,r){for(var l=n.length;r<l;){var d=n[r];if(d.internalFields.parentKey!==t.options.rootValue){var c=o.getParentNode(d);c?(c.internalFields.expanded||t._setFieldState(c,w,!0),v(c,n)>-1?r++:(n.splice(r,0,c),e(n,r))):(f.log("W1007",d.internalFields.parentKey,d.internalFields.key),r++)}else r++}}(n,0),this.options.sort&&(n=C.queryByOptions(m(n),{sort:this.options.sort}).toArray()),o._indexByKey={},d(n,(function(e,t){t.internalFields.childrenKeys=[],o._indexByKey[t.internalFields.key]=e})),o._dataStructure=n,o.setChildrenKeys(),o._dataStructure}});e.exports=I},1677:function(e,t,n){"use strict";var o=n(37),r=n(1).extend,l=n(56),d=n(10).each,c=n(2),h=o.inherit({ctor:function(){this._dataStructure=[],this._itemsCount=0,this._visibleItemsCount=0},_indexByKey:{},_convertItemsToNodes:function(e,t){var n=this;d(e,(function(e,o){var r=c.isDefined(t)?t:n._getParentId(o),l=n._convertItemToNode(o,r);n._dataStructure.push(l),n._checkForDuplicateId(l.internalFields.key),n._indexByKey[l.internalFields.key]=n._dataStructure.length-1,n._itemHasChildren(o)&&n._convertItemsToNodes(n._dataAccessors.getters.items(o),l.internalFields.key)}))},_checkForDuplicateId:function(e){if(c.isDefined(this._indexByKey[e]))throw l.Error("E1040",e)},_getParentId:function(e){return"plain"===this._dataType?this._dataAccessors.getters.parentKey(e):void 0},_itemHasChildren:function(e){if("plain"!==this._dataType){var t=this._dataAccessors.getters.items(e);return t&&t.length}},_getUniqueKey:function(e){var t=this._dataAccessors.getters.key,n=t(e);return t&&(n||0===n)&&c.isPrimitive(n)?n:this.getItemsCount()},_convertItemToNode:function(e,t){this._itemsCount++,!1!==e.visible&&this._visibleItemsCount++;var n=this,o={internalFields:{disabled:n._dataAccessors.getters.disabled(e,{defaultValue:!1}),expanded:n._dataAccessors.getters.expanded(e,{defaultValue:!1}),selected:n._dataAccessors.getters.selected(e,{defaultValue:!1}),key:n._getUniqueKey(e),parentKey:c.isDefined(t)?t:n._rootValue,item:n._makeObjectFromPrimitive(e),childrenKeys:[]}};return r(o,e),delete o.items,o},setChildrenKeys:function(){var e=this;d(this._dataStructure,(function(t,n){if(n.internalFields.parentKey!==e._rootValue){var o=e.getParentNode(n);o&&o.internalFields.childrenKeys.push(n.internalFields.key)}}))},_makeObjectFromPrimitive:function(e){if(c.isPrimitive(e)){var t=e;e={},this._dataAccessors.setters.key(e,t)}return e},_convertToPublicNode:function(e,t){if(!e)return null;var n={text:this._dataAccessors.getters.display(e),key:e.internalFields.key,selected:e.internalFields.selected,expanded:e.internalFields.expanded,disabled:e.internalFields.disabled,parent:t||null,itemData:e.internalFields.item,children:[],items:[]};return n.parent&&(n.parent.children.push(n),n.parent.items.push(n)),n},convertToPublicNodes:function(data,e){if(!data.length)return[];var t=this,n=[];return d(data,(function(o,r){r=c.isPrimitive(r)?t._getByKey(r):r;var l=t._convertToPublicNode(r,e);l.children=t.convertToPublicNodes(r.internalFields.childrenKeys,l),n.push(l),r.internalFields.publicNode=l})),n},setDataAccessors:function(e){this._dataAccessors=e},_getByKey:function(e){return this._dataStructure[this.getIndexByKey(e)]||null},getParentNode:function(e){return this._getByKey(e.internalFields.parentKey)},getByKey:function(data,e){if(null==e)return null;var t=null,n=this,o=function(data,e){return d(data,(function(o,element){if((element.internalFields&&element.internalFields.key||n._dataAccessors.getters.key(element)).toString()===e.toString())return t=element,!1})),t};return o(data,e)},getItemsCount:function(){return this._itemsCount},getVisibleItemsCount:function(){return this._visibleItemsCount},updateIndexByKey:function(){var e=this;this._indexByKey={},d(this._dataStructure,(function(t,n){e._checkForDuplicateId(n.internalFields.key),e._indexByKey[n.internalFields.key]=t}))},updateChildrenKeys:function(){this._indexByKey={},this.removeChildrenKeys(),this.updateIndexByKey(),this.setChildrenKeys()},removeChildrenKeys:function(){this._indexByKey={},d(this._dataStructure,(function(e,t){t.internalFields.childrenKeys=[]}))},getIndexByKey:function(e){return this._indexByKey[e]},createPlainStructure:function(e,t,n){return this._itemsCount=0,this._visibleItemsCount=0,this._rootValue=t,this._dataType=n,this._indexByKey={},this._convertItemsToNodes(e),this.setChildrenKeys(),this._dataStructure}});e.exports=h},1780:function(e,t,n){"use strict";var o=T(n(0)),r=T(n(14)),l=T(n(76)),d=n(71),c=n(6),h=n(10),f=n(2),_=n(1),v=n(148),m=T(n(30)),C=T(n(80)),y=T(n(68)),w=T(n(213)),x=T(n(429)),I=T(n(1781)),S=T(n(149)),V=T(n(82)),P=T(n(56)),R=n(19),B=T(n(150)),D=n(120);function T(e){return e&&e.__esModule?e:{default:e}}function E(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var z="revert-tooltip",F="rowsview",k="invalid-message",N="validator",A="dx-pending-indicator",M="dx-validation-pending",O="__DX_INSERT_INDEX__",L="batch",H="cell",W=["popup","form"],G="valid",j="invalid",$="pending",U="insert",J="cancel",X=function(e){return(0,f.isDefined)(e)&&e!==J},Y=function(e,t){return void 0!==e||void 0===e&&t&&!t.isNewRow},Q=function(e){return!!e&&!!e.validated},Z=l.default.Controller.inherit({init:function(){this._editingController=this.getController("editing"),this.createAction("onRowValidating")},_getBrokenRules:function(e,t){return t?t.brokenRules||t.brokenRule&&[t.brokenRule]:e.brokenRules||[]},_rowValidating:function(e,t){var n=new R.Deferred,o=this._getBrokenRules(e,t),r={brokenRules:o,isValid:t?t.isValid:e.isValid,key:e.key,newData:e.data,oldData:e.oldData,promise:null,errorText:this.getHiddenValidatorsErrorText(o)};return this.executeAction("onRowValidating",r),(0,R.when)(r.promise).always((function(){e.isValid=r.isValid,e.errorText=r.errorText,n.resolve(r)})),n.promise()},getHiddenValidatorsErrorText:function(e){var t=[];return(0,h.each)(e,(function(e,n){var o=n.column,r=o&&void 0!==o.groupIndex&&!o.showWhenGrouped,l=o&&o.visible;n.validator.$element().parent().length||l&&!r||t.push(n.message)})),t.join(", ")},validate:function(e){var t=this,n=!0,o=this._editingController,r=new R.Deferred,l=[],d=o.getEditMode();if(e=e||"row"===d,this._isValidationInProgress)return r.resolve(!1).promise();if(this._isValidationInProgress=!0,e)o.addDeferred(r),(0,h.each)(o._editData,(function(e,o){if(o.type&&"remove"!==o.type){var r=t.validateGroup(o);l.push(r),r.done((function(e){o.validated=!0,n=n&&e.isValid}))}}));else if(this._currentCellValidator){var c=this.validateGroup(this._currentCellValidator._findGroup());l.push(c),c.done((function(e){n=e.isValid}))}return R.when.apply(void 0,l).done((function(){t._isValidationInProgress=!1,r.resolve(n)})),r.promise()},validateGroup:function(e){var t,n=this,o=new R.Deferred,r=w.default.getGroupConfig(e);return r&&r.validators.length&&(this.resetRowValidationResults(e),t=w.default.validateGroup(e)),(0,R.when)(t&&t.complete||t).done((function(t){(0,R.when)(n._rowValidating(e,t)).done(o.resolve)})),o.promise()},isRowDataModified:function(e){return!(0,f.isEmptyObject)(e.data)},updateEditData:function(e){var t=this._editingController.getEditMode();if(-1===W.indexOf(t)){if(e.type===U&&!this.isRowDataModified(e))return void(e.isValid=!0);if(this.setDisableApplyValidationResults(!0),w.default.getGroupConfig(e)){var n=w.default.validateGroup(e);(0,R.when)(n.complete||n).done((function(t){e.isValid=t.isValid,e.brokenRules=t.brokenRules}))}else e.brokenRules&&e.brokenRules.length||(e.isValid=!0);this.setDisableApplyValidationResults(!1)}else e.isValid=!0},setValidator:function(e){this._currentCellValidator=e},renderCellPendingIndicator:function(e){var t=e.find(".dx-pending-indicator");if(!t.length){var n=e.find(".dx-highlight-outline");n.length||(n=e),t=(0,o.default)("<div>").appendTo(n).addClass(A),this._createComponent(t,B.default),e.addClass(M)}},disposeCellPendingIndicator:function(e){var t=e.find(".dx-pending-indicator");if(t.length){var n=B.default.getInstance(t);n&&(n.dispose(),n.$element().remove()),e.removeClass(M)}},validationStatusChanged:function(e){var t=e.validator,n=t.option("validationGroup"),o=t.option("dataGetter")().column;this.updateCellValidationResult({rowKey:n.key,columnIndex:o.index,validationResult:e})},validatorInitialized:function(e){e.component.on("validating",this.validationStatusChanged.bind(this)),e.component.on("validated",this.validationStatusChanged.bind(this))},validatorDisposing:function(e){var t=e.component,n=t.option("validationGroup"),o=t.option("dataGetter")().column,r=this.getCellValidationResult({rowKey:n.key,columnIndex:o.index});X(r)&&r.status===$&&this.cancelCellValidationResult({editData:n,columnIndex:o.index})},applyValidationResult:function(e,t){var n=t.validator,o=n.option("validationGroup"),l=n.option("dataGetter")().column;if(t.brokenRules&&t.brokenRules.forEach((function(e){e.columnIndex=l.index,e.column=l})),e){var d=this.getCellValidationResult({rowKey:o.key,columnIndex:l.index}),c=X(d)&&d.disabledPendingId===t.id;if(this._disableApplyValidationResults||c)return;if(t.status===j){var h=e.find(":focus");this._editingController.showHighlighting(e,!0),(0,v.focused)(h)||(r.default.trigger(h,"focus"),r.default.trigger(h,y.default.down))}var f=!l.editCellTemplate&&this.getController("editorFactory").getEditorInstance(e);t.status===$?(this._editingController.showHighlighting(e,!0),f?f.option("validationStatus",$):this.renderCellPendingIndicator(e)):f?f.option("validationStatus",G):this.disposeCellPendingIndicator(e),e.toggleClass(this.addWidgetPrefix("invalid"),t.status===j)}},createValidator:function(e,t){var n,r,l=this,c=this._editingController,h=e.column,v=function(){var t=h.calculateCellValue(n.data||{});return void 0!==t?t:e.value},m=h.showEditorAlways;if(!(0,f.isDefined)(h.command)&&h.validationRules&&Array.isArray(h.validationRules)&&h.validationRules.length){if((r=c.getIndexByKey(e.key,c._editData))<0){if(!m){var C=this.getController("columns");m=(C&&C.getVisibleColumns()||[]).some((function(e){return e.showEditorAlways}))}m&&c.isCellOrBatchEditMode()&&c.allowUpdating({row:e.row})&&(r=c._addEditData({key:e.key,oldData:e.data}))}if(r>=0){if(t&&!t.length)return void P.default.log("E1050");n=c._editData[r];var y=t&&t.hasClass("dx-widget");t&&t.addClass(this.addWidgetPrefix(N));var w=new x.default(t||(0,o.default)("<div>"),{name:h.caption,validationRules:(0,_.extend)(!0,[],h.validationRules),validationGroup:n,adapter:y?null:{getValue:v,applyValidationResults:function(e){l.applyValidationResult(t,e)}},dataGetter:function(){return{data:(0,d.createObjectWithChanges)(n.oldData,n.data),column:h}},onInitialized:this.validatorInitialized.bind(this),onDisposing:this.validatorDisposing.bind(this)});if(y){var I=w.option("adapter");I&&(I.getValue=v,I.validationRequestsCallbacks.empty())}return w}}},setDisableApplyValidationResults:function(e){this._disableApplyValidationResults=e},getDisableApplyValidationResults:function(){return this._disableApplyValidationResults},isCurrentValidatorProcessing:function(e){var t=e.rowKey,n=e.columnIndex;return this._currentCellValidator&&this._currentCellValidator.option("validationGroup").key===t&&this._currentCellValidator.option("dataGetter")().column.index===n},validateCell:function(e){var t={rowKey:e.option("validationGroup").key,columnIndex:e.option("dataGetter")().column.index},n=this.getCellValidationResult(t),o=X(n);o||(n=e.validate());var r=new R.Deferred,l=e.option("adapter");return o&&n.status===$&&(this.updateCellValidationResult(t),l.applyValidationResults(n)),(0,R.when)(n.complete||n).done((function(e){o&&l.applyValidationResults(e),r.resolve(e)})),r.promise()},updateCellValidationResult:function(e){var t=e.rowKey,n=e.columnIndex,o=e.validationResult,r=this._editingController.getEditDataByKey(t);if(r){var l;if(r.validationResults||(r.validationResults={}),o){if(l=(0,_.extend)({},o),r.validationResults[n]=l,o.status===$&&(this._editingController.getEditMode()===H&&(l.deferred=new R.Deferred,l.complete.always((function(){l.deferred.resolve()})),this._editingController.addDeferred(l.deferred)),this._disableApplyValidationResults))return void(l.disabledPendingId=o.id)}else l=r.validationResults[n];l&&l.disabledPendingId&&delete l.disabledPendingId}},getCellValidationResult:function(e){var t=e.rowKey,n=e.columnIndex,o=this._editingController.getEditDataByKey(t);return o&&o.validationResults&&o.validationResults[n]},removeCellValidationResult:function(e){var t=e.editData,n=e.columnIndex;t&&t.validationResults&&(this.cancelCellValidationResult({editData:t,columnIndex:n}),delete t.validationResults[n])},cancelCellValidationResult:function(e){var t=e.editData,n=e.columnIndex;if(t&&t.validationResults){var o=t.validationResults[n];o&&(o.deferred&&o.deferred.reject(J),t.validationResults[n]=J)}},resetRowValidationResults:function(e){e&&(e.validationResults&&delete e.validationResults,delete e.validated)},isInvalidCell:function(e){var t=e.rowKey,n=e.columnIndex,o=this.getCellValidationResult({rowKey:t,columnIndex:n});return X(o)&&o.status===j},getCellValidator:function(e){var t=e.rowKey,n=e.columnIndex,o=this._editingController.getEditDataByKey(t),r=o&&w.default.getGroupConfig(o),l=r&&r.validators;return l&&l.filter((function(e){var t=e.option("dataGetter")().column;return!!t&&t.index===n}))[0]},setCellValidationStatus:function(e){var t=this.getCellValidationResult({rowKey:e.key,columnIndex:e.column.index});(0,f.isDefined)(t)?e.validationStatus=t!==J?t.status:J:delete e.validationStatus}});e.exports={defaultOptions:function(){return{editing:{texts:{validationCancelChanges:m.default.format("dxDataGrid-validationCancelChanges")}}}},controllers:{validating:Z},extenders:{controllers:{editing:{_addEditData:function(e,t){var n=this,o=n.getController("validating"),r=n.callBase(e,t);if(r>=0){var l=n._editData[r];o.updateEditData(l)}return r},_updateRowAndPageIndices:function(){var e=this,t=e.getView("rowsView").getTopVisibleItemIndex(),n=t;(0,h.each)(e._editData,(function(o,r){r.isValid||r.pageIndex===e._pageIndex||(r.pageIndex=e._pageIndex,r.type===U?r.rowIndex=t:r.rowIndex=n,n++)}))},_needInsertItem:function(e){var t=this.callBase.apply(this,arguments);return t&&!e.isValid&&(t=e.key.pageIndex===this._pageIndex),t},processItems:function(e,t){var i,n=this,o=n._editData,r=n.getController("data"),l=(e=n.callBase(e,t)).length,d=function(t){var data={key:t.key};if(!(function(e,t){var n=-1,o=e.type===U,l=e.key;return(0,h.each)(t,(function(i,e){if((0,c.equalByValue)(l,o?e:r.keyOf(e)))return n=i,!1})),n}(t,e)>=0)){t.rowIndex=t.rowIndex>l?t.rowIndex%l:t.rowIndex;var n=t.rowIndex;data[O]=1,e.splice(n,0,data)}};if(n.getEditMode()===L&&"prepend"!==t&&"append"!==t)for(i=0;i<o.length;i++)o[i].type&&o[i].pageIndex===n._pageIndex&&o[i].key.pageIndex!==n._pageIndex&&d(o[i]);return e},processDataItem:function(e){var t=this,n=e.data[O],o=n?e.data.key:e.key,r=t.getEditMode();if(r===L&&n&&o){var l=(0,d.getIndexByKey)(o,t._editData);if(l>=0){var c=t._editData[l];c.type!==U&&(e.data=(0,_.extend)(!0,{},c.oldData,c.data),e.key=o)}}t.callBase.apply(t,arguments)},_createInvisibleColumnValidators:function(e){var t=this,n=this.getController("validating"),o=this.getController("columns"),r=o.getColumns(),l=o.getInvisibleColumns().filter((function(e){return!e.isBand})),c=o.getGroupColumns().filter((function(e){return!e.showWhenGrouped&&-1===l.indexOf(e)})),f=[];return l.push.apply(l,E(c)),-1===W.indexOf(this.getEditMode())&&(0,h.each)(r,(function(o,r){e.forEach((function(e){var data;if(!function(e,n){return t._dataController.getRowIndexByKey(n)>=0&&l.indexOf(e)<0}(r,e.key)&&(e.type===U?data=e.data:"update"===e.type&&(data=(0,d.createObjectWithChanges)(e.oldData,e.data)),data)){var o=n.createValidator({column:r,key:e.key,value:r.calculateCellValue(data)});o&&f.push(o)}}))})),function(){f.forEach((function(e){e.dispose()}))}},_beforeSaveEditData:function(e,t){var n=this,o=this.callBase.apply(this,arguments),r=this.getController("validating");if(e){var l="remove"===e.type||e.isValid;o=o||!l}else{var d=this._createInvisibleColumnValidators(this._editData);o=new R.Deferred,this.executeOperation(o,(function(){r.validate(!0).done((function(e){switch(d(),n._updateRowAndPageIndices(),n.getEditMode()){case H:e||n._focusEditingCell();break;case L:e||(n._editRowIndex=-1,n._editColumnIndex=-1,n.getController("data").updateItems())}o.resolve(!e)}))}))}return o.promise?o.promise():o},_beforeEditCell:function(e,t,n){var o=this.callBase(e,t,n);if(this.getEditMode()===H){var r=this._rowsView._getCellElement(e,t),l=r&&r.data("dxValidator"),d=r&&r.closest(".dx-row").data("options"),c=l&&l.option("adapter").getValue();if(l&&Y(c,d)){var h=this.getController("validating"),f=new R.Deferred;return(0,R.when)(h.validateCell(l),o).done((function(e,t){f.resolve(e.status===G&&t)})),f.promise()}if(!l)return o}},_afterSaveEditData:function(e){var t,n=this;if((0,h.each)(this._editData,(function(e,o){var r=n._showErrorRow(o);t=t||r})),t){var o=this._rowsView.getScrollable();o&&(o.update(),o.scrollToElement(t))}if(e&&this.getEditMode()===H&&this._needUpdateRow()){var r=this.getEditRowIndex();this._dataController.updateItems({changeType:"update",rowIndices:[r]}),this._focusEditingCell()}},_showErrorRow:function(e){var t,n=this.getController("errorHandling"),o=this.getController("data").items(),r=this.getIndexByKey(e.key,o);if(!e.isValid&&e.errorText&&r>=0)return t=this.getPopupContent(),n&&n.renderErrorRow(e.errorText,r,t)},updateFieldValue:function(e){var t=this,n=this.getController("validating"),o=new R.Deferred;return n.removeCellValidationResult({editData:this.getEditDataByKey(e.key),columnIndex:e.column.index}),this.callBase.apply(this,arguments).done((function(){var r=n.getCellValidator({rowKey:e.key,columnIndex:e.column.index});(0,R.when)(r&&n.validateCell(r)).done((function(e){t.getController("editorFactory").refocus(),o.resolve(e)}))})),o.promise()},showHighlighting:function(e,t){var n=this,o=!0,r=this.callBase,l=new R.Deferred;if(!t){var d=e.data("dxValidator");if(d)return(0,R.when)(this.getController("validating").validateCell(d)).done((function(t){(o=t.status===G)&&r.call(n,e),l.resolve()})),l.promise()}return o&&r.call(this,e),l.resolve().promise()},highlightDataCell:function(e,t){var n=!!t.setValue,o=this.isCellModified(t),r=this.getController("validating");if(o||!n)this.callBase.apply(this,arguments);else{r.setCellValidationStatus(t);var l=(0,f.isDefined)(t.validationStatus),d=t.row.isNewRow||!l;(0,R.when)(this.showHighlighting(e,d)).done((function(){r.setCellValidationStatus(t)}))}},getEditDataByKey:function(e){return this._editData[(0,d.getIndexByKey)(e,this._editData)]},isCellModified:function(e){var t=this.callBase(e),n=this.getEditDataByKey(e.key),o=!!e.row&&this.getController("validating").isInvalidCell({rowKey:e.key,columnIndex:e.column.index});return t||Q(n)&&o}},editorFactory:{_showRevertButton:function(e,t){var n=this;if(t&&t.length){var r=e.find("."+this.addWidgetPrefix(z));r&&r.remove(),r=(0,o.default)("<div>").addClass(this.addWidgetPrefix(z)).appendTo(e);var l={animation:null,visible:!0,target:t,container:e,closeOnOutsideClick:!1,closeOnTargetScroll:!1,contentTemplate:function(){var e=(0,o.default)("<div>").addClass("dx-revert-button"),t={icon:"revert",hint:n.option("editing.texts.validationCancelChanges"),onClick:function(){n._editingController.cancelEditData()}};return new C.default(e,t).$element()},position:{my:"left top",at:"right top",of:t,offset:"1 0",collision:"flip",boundary:this._rowsView.element()},onPositioned:this._positionedHandler.bind(this)};return new I.default(r,l)}},_hideFixedGroupCell:function(e,t){var n,r,l=this._rowsView.isFixedColumns(),d=this._editingController.isFormEditMode();if(l&&!d){var c=e.closest(".dx-row").next().data("options");c&&"group"===c.rowType&&(n=(0,o.default)(this._rowsView.getRowElement(c.rowIndex)).last(),(r=n.find(".dx-group-cell")).length&&"hidden"!==r.get(0).style.visibility&&(r.css("visibility","hidden"),t.onDisposing=function(){r.css("visibility","")}))}},_positionedHandler:function(e,t){if(!e.component.__skipPositionProcessing){var n=(0,o.default)(e.element).hasClass(this.addWidgetPrefix(z)),r=!n&&this._rowsView.updateFreeSpaceRowHeight(),l=this._normalizeValidationMessagePositionAndMaxWidth(e,n,t);e.component.__skipPositionProcessing=!(!r&&!l),l?e.component.option(l):r&&e.component.repaint()}},_showValidationMessage:function(e,t,n,r){var l=this,d=e.find(".dx-highlight-outline"),c=V.default.isMaterial(),h=d.length&&!c?d:e,f=e.find(".dx-dropdowneditor-overlay").data("dxPopup"),_=f&&f.option("visible"),v=_?"top right":"top "+n,m=_?"top left":"bottom "+n,C="";t&&t.forEach((function(e){C+=(C.length?"<br/>":"")+(0,D.encodeHtml)(e)}));var y=(0,o.default)("<div>").addClass("dx-invalid-message").addClass("dx-invalid-message-always").addClass(this.addWidgetPrefix(k)).html(C).appendTo(e),w={target:h,container:e,shading:!1,width:"auto",height:"auto",visible:!0,animation:!1,propagateOutsideClick:!0,closeOnOutsideClick:!1,closeOnTargetScroll:!1,position:{collision:"flip",boundary:this._rowsView.element(),boundaryOffset:"0 0",my:v,at:m},onPositioned:function(t){l._positionedHandler(t,_),l._shiftValidationMessageIfNeed(t.component.$content(),r&&r.$content(),e)}};this._hideFixedGroupCell(e,w),new S.default(y,w)},_normalizeValidationMessagePositionAndMaxWidth:function(e,t,n){var r=this._columnsController.getFixedColumns();if(r&&r.length){var l,d,element,c,h,f=!t&&(d=this,element=e.element,c=(0,o.default)(element).closest("tr").index(),h=(0,o.default)(d._rowsView.getRowElement(c)).first().children().filter(":not(.dx-hidden-cell)"),d._rowsView._getWidths(h).reduce((function(e,t){return e+t}),0)),_=(t?e.component.overlayContent():e.component.$content()).outerWidth(!0),v=!t&&_>f,m=this._rowsView.getCellIndex((0,o.default)(e.element).closest("td")),C=function(e){var t,n;return e.some((function(o,r){if("transparent"===o.command)return t=0===r?-1:r,n=r===e.length-1?-1:r+o.colspan-1,!0})),{startColumnIndex:t,endColumnIndex:n}}(r);return t||m!==C.startColumnIndex&&!v?m===C.endColumnIndex&&(l={collision:"none flip",my:"top right",at:t||n?"top left":"bottom right"},t&&(l.offset="-1 0")):l={collision:"none flip",my:"top left",at:n?"top right":"bottom left"},l&&{position:l,maxWidth:v?f-2:void 0}}},_shiftValidationMessageIfNeed:function(e,t,n){if(t){var o=e.offset(),r=t.offset();if(o.top===r.top&&o.left+e.width()>r.left){var l=t.width()+2;e.css("left",r.left<n.offset().left?-l:l)}}},_getTooltipsSelector:function(){var e=this.addWidgetPrefix(k);return".dx-editor-cell ."+this.addWidgetPrefix(z)+", .dx-editor-cell ."+e+", .dx-cell-modified ."+e},init:function(){this.callBase(),this._editingController=this.getController("editing"),this._columnsController=this.getController("columns"),this._rowsView=this.getView("rowsView")},loseFocus:function(e){e||this.getController("validating").setValidator(null),this.callBase()},updateCellState:function(e,t,n){var o,r=e&&e.closest(this._getFocusCellSelector()),l=r&&r.is("td")?r:null,d=r&&r.closest(".dx-row").data("options"),c=d?this.getController("editing").getEditDataByKey(d.key):null,h=l&&this.getController("columns").getVisibleColumns()[l.index()];if((t&&t.status===j||c&&"update"===c.type&&!this._editingController.isSaving())&&this._editingController.getEditMode()===H&&(o=this._showRevertButton(r,l?r.find(".dx-highlight-outline").first():r)),t&&t.status===j&&l&&h&&t&&t.brokenRules){var f=[];t.brokenRules.forEach((function(e){f.push(e.message)})),this._showValidationMessage(r,f,h.alignment||"left",o)}!n&&this._rowsView.element()&&this._rowsView.updateFreeSpaceRowHeight()},focus:function(e,t){var n=this;if(!arguments.length)return this.callBase();var o=e&&e.closest("."+this.addWidgetPrefix(F)).find(this._getTooltipsSelector());if(o&&o.remove(),null!=e&&e.hasClass("dx-row"))return this.callBase(e,t);var r,l=null==e?void 0:e.closest(this._getFocusCellSelector()),d=this.callBase,c=l&&(l.data("dxValidator")||e.find("."+this.addWidgetPrefix(N)).eq(0).data("dxValidator")),h=l&&l.closest(".dx-row").data("options"),f=this.getController("editing"),_=h?f.getEditDataByKey(h.key):null,v=this.getController("validating");if(c){v.setValidator(c);var m=c.option("adapter").getValue();if(Y(m,h)||Q(_))return f.waitForDeferredOperations().done((function(){(0,R.when)(v.validateCell(c)).done((function(o){var l=(r=o).validator.option("dataGetter")().column;_&&l&&!v.isCurrentValidatorProcessing({rowKey:_.key,columnIndex:l.index})||(r.status===j&&(t=!0),n.updateCellState(e,r,t),d.call(n,e,t))}))})),this.callBase(e,t)}return this.updateCellState(e,r,t),this.callBase(e,t)},getEditorInstance:function(e){var t=e.find(".dx-texteditor").eq(0);return(0,d.getWidgetInstance)(t)}},data:{_isCellChanged:function(e,t,n,o,r){var l=e.cells[o],d=l&&l.validationStatus,c=this.getController("validating"),h=c.getCellValidationResult({rowKey:e.key,columnIndex:o}),f=X(h)?h.status:h,_=JSON.stringify(t.modifiedValues)!==JSON.stringify(e.modifiedValues);return!(d===f||!_)||this.callBase.apply(this,arguments)}}},views:{rowsView:{updateFreeSpaceRowHeight:function(e){var t,n,o,r=this,l=r.element(),d=l&&l.find("."+r.addWidgetPrefix(k)+" .dx-overlay-content");if(r.callBase(e),d&&d.length&&(t=r._getRowElements(),(n=(o=r._getFreeSpaceRowElements(e)).first())&&1===t.length&&(!n.is(":visible")||d.outerHeight()>n.outerHeight())))return o.show(),o.height(d.outerHeight()),!0},_formItemPrepared:function(e,t){var n=this;this.callBase.apply(this,arguments),(0,c.deferUpdate)((function(){var o=t.find(".dx-widget").first();o.length&&!o.children().length||n.getController("validating").createValidator(e,o)}))},_cellPrepared:function(e,t){this.getController("editing").isFormEditMode()||this.getController("validating").createValidator(t,e),this.callBase.apply(this,arguments)}}}}}},1783:function(e,t,n){"use strict";var o=w(n(0)),r=n(20),l=n(6),d=w(n(1784)),c=w(n(71)),h=n(10),f=n(19),_=w(n(77)),v=w(n(150)),m=w(n(50)),C=n(75),y=n(2);function w(e){return e&&e.__esModule?e:{default:e}}var x,I,S,V,P="bottom-load-panel",R="table-content",B="content",D="dx-freespace-row",T="dx-column-lines",E="dx-virtual-row",K="infinite",z="virtual",F=25e4,k=function(e){return e.option("scrolling.mode")===z},N=function(e){return e.option("scrolling.mode")===K},A=function(e){var t=e.option("scrolling.rowRenderingMode");return t===z||"standard"!==t&&void 0},M=function(e,t,n,o){for(var i=0;i<t+1;i++){var r=e[n?e.length-1-i:i];r&&!o(r,i===t,n)&&t++}return t},O=function(e,t){return"data"===e.rowType&&!e.isNewRow||"group"===e.rowType&&t.isGroupItemCountable(e.data)},L=(x=function(e){var t=e._virtualScrollController.beginPageIndex(-1);k(e)&&(t<0||e.viewportSize()>=0&&e.getViewportItemIndex()>=0&&(t*e.pageSize()>e.getViewportItemIndex()||t*e.pageSize()+e.itemsCount()<e.getViewportItemIndex()+e.viewportSize())&&e._dataSource.isLoading()?e._isLoading||(e._isLoading=!0,e.loadingChanged.fire(!0)):e._isLoading&&(e._isLoading=!1,e.loadingChanged.fire(!1)))},I={init:function(e){var t=this;t.callBase.apply(t,arguments),t._items=[],t._isLoaded=!0,t._virtualScrollController=new d.default.VirtualScrollController(t.component,{pageSize:function(){return t.pageSize()},totalItemsCount:function(){return t.totalItemsCount()},hasKnownLastPage:function(){return t.hasKnownLastPage()},pageIndex:function(t){return e.pageIndex(t)},isLoading:function(){return e.isLoading()&&!t.isCustomLoading()},pageCount:function(){return t.pageCount()},load:function(){return e.load()},updateLoading:function(){x(t)},itemsCount:function(){return t.itemsCount(!0)},items:function(){return e.items()},viewportItems:function(e){return e&&(t._items=e),t._items},onChanged:function(e){t.changed.fire(e)},changingDuration:function(e){return t.isLoading()?300:t._renderTime||0}})},_handleLoadingChanged:function(e){k(this)&&!this._isLoadingAll||(this._isLoading=e,this.callBase.apply(this,arguments)),this._startLoadTime=e?new Date:void 0},_handleLoadError:function(){var e=this;e._isLoading=!1,e.loadingChanged.fire(!1),e.callBase.apply(e,arguments)},_handleDataChanged:function(e){var t=this.callBase.bind(this);this._virtualScrollController.handleDataChanged(t,e)},_customizeRemoteOperations:function(e,t){var n=this;!n.option("legacyRendering")&&k(n)&&!t.reload&&t.skip&&n._renderTime<n.option("scrolling.renderingThreshold")&&(e.delay=void 0),n.callBase.apply(n,arguments)},items:function(){return this._items},itemsCount:function(e){return e?this.callBase():this._virtualScrollController.itemsCount()},load:function(e){return e?this.callBase(e):this._virtualScrollController.load()},isLoading:function(){return this._isLoading},isLoaded:function(){return this._dataSource.isLoaded()&&this._isLoaded},resetPagesCache:function(e){e||this._virtualScrollController.reset(!0),this.callBase.apply(this,arguments)},_changeRowExpandCore:function(){var e=this.callBase.apply(this,arguments);return this.resetPagesCache(),x(this),e},reload:function(){this._dataSource.pageIndex(this.pageIndex());var e=this._virtualScrollController;if(e){var t=new f.Deferred;return this.callBase.apply(this,arguments).done((function(n){var o=e._delayDeferred;o?o.done(t.resolve).fail(t.reject):t.resolve(n)})).fail(t.reject),t}return this.callBase.apply(this,arguments)},refresh:function(e,t){var n=this,o=e.storeLoadOptions,r=n._dataSource;return t.reload?(n._virtualScrollController.reset(),r.items().length=0,n._isLoaded=!1,x(n),n._isLoaded=!0,N(n)?(n.pageIndex(0),r.pageIndex(0),o.pageIndex=0,e.pageIndex=0,o.skip=0):(r.pageIndex(n.pageIndex()),r.paginate()&&(e.pageIndex=n.pageIndex(),o.skip=n.pageIndex()*n.pageSize()))):N(n)&&o.skip&&n._skipCorrection<0&&(o.skip+=n._skipCorrection),n.callBase.apply(n,arguments)},dispose:function(){this._virtualScrollController.dispose(),this.callBase.apply(this,arguments)}},["virtualItemsCount","getContentOffset","getVirtualContentSize","setContentSize","setViewportPosition","getViewportItemIndex","setViewportItemIndex","getItemIndexByPosition","viewportSize","viewportItemSize","getItemSize","getItemSizes","pageIndex","beginPageIndex","endPageIndex","loadIfNeed"].forEach((function(e){I[e]=function(){var t=this._virtualScrollController;return t[e].apply(t,arguments)}})),I),H=(S=function(e,t){var n=e.toArray().map((function(e){return(0,o.default)(e).parent("."+t).get(0)})).filter((function(e){return e}));n.length&&(e=(0,o.default)(n));for(var r=t===D?e.length-1:e.length,i=0;i<r;i++)e.eq(i).remove()},{init:function(){var e,t=this,n=this.getController("data");this.callBase(),n.pageChanged.add((function(){t.scrollToPage(n.pageIndex())})),n.dataSourceChanged.add((function(){!t._scrollTop&&t._scrollToCurrentPageOnResize()})),null===(e=n.stateLoaded)||void 0===e||e.add((function(){t._scrollToCurrentPageOnResize()})),this._scrollToCurrentPageOnResize()},_scrollToCurrentPageOnResize:function(){var e=this,t=this.getController("data");!this.option("legacyRendering")&&t.pageIndex()>0&&this.resizeCompleted.add((function n(){e.resizeCompleted.remove(n),e.scrollToPage(t.pageIndex())}))},scrollToPage:function(e){var t,n=this,o=n._dataController,r=o?o.pageSize():0;if(k(n)||N(n)){var l=o.getItemSize(),d=o.getItemSizes(),c=e*r;for(var h in t=c*l,d)h<c&&(t+=d[h]-l)}else t=0;n.scrollTo({y:t,x:n._scrollLeft})},renderDelayedTemplates:function(e){this._updateContentPosition(!0),this.callBase.apply(this,arguments)},_renderCore:function(e){var t=this,n=new Date;t.callBase.apply(t,arguments);var o=t._dataController._dataSource;if(o&&e){var r=e.items?e.items.length:20,l=t._dataController.viewportSize()||20;A(t)?o._renderTime=(new Date-n)*l/r:o._renderTime=new Date-n}},_getRowElements:function(e){var t=this.callBase(e);return t&&t.not(".dx-virtual-row")},_renderContent:function(e,t){var n=this,o=n._dataController.virtualItemsCount();return o&&n.option("legacyRendering")?((0,r.hasWindow)()&&t.addClass(n.addWidgetPrefix(R)),e.children().length?e.children().first().replaceWith(t):e.append(t),1===e.children("table").length&&(e.append(n._createTable()),n._contentHeight=0),e):n.callBase.apply(n,arguments)},_removeRowsElements:function(e,t,n){var r=this._getRowElements(e).toArray();r="append"===n?r.slice(0,t):r.slice(-t);var l=this.getController("errorHandling");r.map((function(e){var t=(0,o.default)(e);l&&l.removeErrorRow(t.next()),t.remove()}))},_restoreErrorRow:function(e){var t=this.getController("editing");t&&t.hasChanges()&&this._getRowElements(e).each((function(e,n){var r=(0,o.default)(n).data("options");if(r){var l=t.getEditDataByKey(r.key);l&&t._showErrorRow(l)}}))},_updateContent:function(e,t){var n,o=this,r=o._findContentElement(),l=t&&t.changeType;if("append"===l||"prepend"===l){var d=r.children().first(),c=o._getBodies(e);o.option("legacyRendering")||1!==c.length?c["append"===l?"appendTo":"prependTo"](d):o._getBodies(d)["append"===l?"append":"prepend"](c.children()),e.remove(),n=o._getFreeSpaceRowElements(d),S(n,D),t.removeCount&&o._removeRowsElements(d,t.removeCount,l),o._restoreErrorRow(d)}else o.callBase.apply(o,arguments);o._updateBottomLoading()},_addVirtualRow:function(e,t,n,o){if(o){var r=this._createEmptyRow(E,t,o);r=this._wrapRowIfNeed(e,r),this._appendEmptyRow(e,r,n)}},_getRowHeights:function(){return this._getRowElements(this._tableElement).toArray().map((function(e){return(0,C.getBoundingRect)(e).height}))},_correctRowHeights:function(e){for(var t=this._dataController,n=t._dataSource,o=[],r=t.getVisibleRows(),l=0,d=!0,i=0;i<e.length;i++){var c=r[i];(0,y.isDefined)(c)&&(O(c,n)&&(d?d=!1:(o.push(l),l=0)),l+=e[i])}return l>0&&o.push(l),o},_updateContentPosition:function(e){var t=this,n=t._dataController,r=t._rowHeight||20;if(n.viewportItemSize(r),t.option("legacyRendering")||!k(t)&&!A(t))(0,l.deferUpdate)((function(){t._updateContentPositionCore()}));else{if(!e){var d=t._getRowHeights(),c=t._correctRowHeights(d);n.setContentSize(c)}var h=n.getContentOffset("begin"),f=n.getContentOffset("end"),_=t.getTableElements(),v=_.children("tbody").children(".dx-virtual-row");S(v,E),_.each((function(e){var n=e>0;t._isFixedTableRendering=n,t._addVirtualRow((0,o.default)(this),n,"top",h),t._addVirtualRow((0,o.default)(this),n,"bottom",f),t._isFixedTableRendering=!1}))}},_updateContentPositionCore:function(){var e,t,n,o=this,r=o._rowHeight||20;if(o._dataController.virtualItemsCount()){t=o._findContentElement().children(),n=t.eq(0);var d=t.eq(1);o._contentTableHeight=n[0].offsetHeight,o._dataController.viewportItemSize(r),o._dataController.setContentSize(o._contentTableHeight),e=o._dataController.getVirtualContentSize();var c=o._dataController.getContentOffset();(0,l.deferRender)((function(){_.default.move(n,{left:0,top:c}),(o._contentHeight!==e||0===e||!o._isTableLinesDisplaysCorrect(d)||!o._isColumnElementsEqual(n.find("col"),d.find("col")))&&(o._contentHeight=e,o._renderVirtualTableContent(d,e))}))}},_isTableLinesDisplaysCorrect:function(table){return table.find(".dx-column-lines").length>0===this.option("showColumnLines")},_isColumnElementsEqual:function(e,t){var n=e.length===t.length;return n&&(0,h.each)(e,(function(e,element){if(element.style.width!==t[e].style.width)return n=!1})),n},_renderVirtualTableContent:function(e,t){for(var n=this,o=n._columnsController.getVisibleColumns(),html=n._createColGroup(o).prop("outerHTML"),r="",l=n.option("showColumnLines")?T:"",d=function(e){return"<tr style='height:"+e+"px;' class='dx-freespace-row dx-row "+l+"' >"+r+"</tr>"},i=0;i<o.length;i++){var c=n._getCellClasses(o[i]),h=c.length?" class='"+c.join(" ")+"'":"";r+="<td"+h+"/>"}for(;t>F;)html+=d(F),t-=F;html+=d(t),e.addClass(n.addWidgetPrefix("table")),e.html(html)},_getCellClasses:function(e){var t=[],n=e.cssClass,o="expand"===e.command;return n&&t.push(n),o&&t.push(this.addWidgetPrefix("group-space")),t},_findBottomLoadPanel:function(e){var t=e||this.element(),n=t&&t.find("."+this.addWidgetPrefix(P));if(n&&n.length)return n},_updateBottomLoading:function(){var e=this,t=e.option("scrolling.mode"),n=t===z,r=t===K,l=!e._dataController.hasKnownLastPage()&&e._dataController.isLoaded()&&(n||r),d=e._findContentElement(),c=e._findBottomLoadPanel(d);l?c||(0,o.default)("<div>").addClass(e.addWidgetPrefix(P)).append(e._createComponent((0,o.default)("<div>"),v.default).$element()).appendTo(d):c&&c.remove()},_handleScroll:function(e){var t=this;t._hasHeight&&t._rowHeight&&t._dataController.setViewportPosition(e.scrollOffset.top),t.callBase.apply(t,arguments)},_needUpdateRowHeight:function(e){var t=this;return t.callBase.apply(t,arguments)||e>0&&t.option("scrolling.mode")===K&&t.option("scrolling.rowRenderingMode")!==z},_updateRowHeight:function(){var e=this;if(e.callBase.apply(e,arguments),e._rowHeight){e._updateContentPosition();var t=e._hasHeight?e.element().outerHeight():(0,o.default)((0,r.getWindow)()).outerHeight();e._dataController.viewportSize(Math.ceil(t/e._rowHeight))}},updateFreeSpaceRowHeight:function(){var e=this.callBase.apply(this,arguments);return e&&this._updateContentPosition(),e},setLoading:function(e,t){var n=this,o=n.callBase,r=n._dataController;r.pageIndex()>0&&r.isLoaded()&&!!n._findBottomLoadPanel()&&(e=!1),o.call(n,e,t)},_resizeCore:function(){var e=this,t=e.element();e.callBase(),e.component.$element()&&!e._windowScroll&&t.closest((0,r.getWindow)().document).length&&(e._windowScroll=d.default.subscribeToExternalScrollers(t,(function(t){!e._hasHeight&&e._rowHeight&&e._dataController.setViewportPosition(t)}),e.component.$element()),e.on("disposing",(function(){e._windowScroll.dispose()}))),e.loadIfNeed()},loadIfNeed:function(){var e=this._dataController;e&&e.loadIfNeed&&e.loadIfNeed()},setColumnWidths:function(e){var t,n=this.getScrollable();this.callBase.apply(this,arguments),"virtual"===this.option("scrolling.mode")&&(t=n?n.$content():this.element(),this.callBase(e,t.children("."+this.addWidgetPrefix(B)).children(":not(."+this.addWidgetPrefix(R)+")")))},dispose:function(){clearTimeout(this._scrollTimeoutID),this.callBase()}});e.exports={defaultOptions:function(){return{scrolling:{timeout:300,updateTimeout:300,minTimeout:0,renderingThreshold:100,removeInvisiblePages:!0,rowPageSize:5,mode:"standard",preloadEnabled:!1,rowRenderingMode:"standard"}}},extenders:{dataSourceAdapter:L,controllers:{data:(V={_refreshDataSource:function(){var e=this.callBase.apply(this,arguments)||(new f.Deferred).resolve().promise();return e.done(this.initVirtualRows.bind(this)),e},getRowPageSize:function(){var e=this.option("scrolling.rowPageSize"),t=this.pageSize();return t&&t<e?t:e},reload:function(){var e=this,t=e._rowsScrollController||e._dataSource,n=t&&t.getItemIndexByPosition(),r=this.callBase.apply(this,arguments);return r&&r.done((function(){if(k(e)||A(e)){var t=e.getRowIndexOffset(),r=Math.floor(n)-t,component=e.component,l=component.getScrollable&&component.getScrollable(),d=e.dataSource().operationTypes().sorting;if(l&&!e.option("legacyRendering")&&!d){var c=component.getRowElement(r),h=c&&c[0]&&(0,o.default)(c[0]),f=h&&h.position().top;f>(m.default.mozilla||m.default.msie?1:0)&&(f=Math.round(f+h.outerHeight()*(n%1)),l.scrollTo({y:f}))}}}))},initVirtualRows:function(){var e=this,t=A(e);if("virtual"!==e.option("scrolling.mode")&&!0!==t||!1===t||e.option("legacyRendering")||!e.option("scrolling.rowPageSize"))return e._visibleItems=null,void(e._rowsScrollController=null);var n=!k(this)&&e.pageIndex()>=e.pageCount()?e.pageCount()-1:e.pageIndex();e._rowPageIndex=Math.ceil(n*e.pageSize()/e.getRowPageSize()),e._visibleItems=[];var o=function(t){return O(t,e._dataSource)};e._rowsScrollController=new d.default.VirtualScrollController(e.component,{pageSize:function(){return e.getRowPageSize()},totalItemsCount:function(){return k(e)?e.totalItemsCount():e._items.filter(o).length},hasKnownLastPage:function(){return!0},pageIndex:function(t){return void 0!==t&&(e._rowPageIndex=t),e._rowPageIndex},isLoading:function(){return e.isLoading()},pageCount:function(){var e=Math.ceil(this.totalItemsCount()/this.pageSize());return e||1},load:function(){e._rowsScrollController.pageIndex()>=this.pageCount()&&(e._rowPageIndex=this.pageCount()-1,e._rowsScrollController.pageIndex(e._rowPageIndex)),!e._rowsScrollController._dataSource.items().length&&this.totalItemsCount()||e._rowsScrollController.handleDataChanged((function(t){(t=t||{}).changeType=t.changeType||"refresh",t.items=t.items||e._visibleItems,e._visibleItems.forEach((function(e,t){e.rowIndex=t})),e._fireChanged(t)}))},updateLoading:function(){},itemsCount:function(){return e._rowsScrollController._dataSource.items().filter(o).length},correctCount:function(e,t,n){return M(e,t,n,(function(e,t,n){return e.isNewRow?t&&!n:t&&n?!e.isNewRow:o(e)}))},items:function(t){var n=e.dataSource(),r=n&&n.virtualItemsCount(),l=r?r.begin:0,d=e.getRowPageSize(),c=e._rowPageIndex*d-l,h=d,f=e._items;return c<0?[]:(c&&(c=this.correctCount(f,c),f=f.slice(c)),h&&(h=this.correctCount(f,h),f=f.slice(0,h)),t?f.filter(o):f)},viewportItems:function(t){return t&&(e._visibleItems=t),e._visibleItems},onChanged:function(){},changingDuration:function(t){var n=e.dataSource();return n.isLoading()?300:(null==n?void 0:n._renderTime)||0}},!0),e._rowsScrollController.positionChanged.add((function(){var t;null===(t=e._dataSource)||void 0===t||t.setViewportItemIndex(e._rowsScrollController.getViewportItemIndex())})),e.isLoaded()&&e._rowsScrollController.load()},_updateItemsCore:function(e){var t=this,n=this.getRowIndexDelta();this.callBase.apply(this,arguments);var o=this._rowsScrollController;if(o){var r=this._visibleItems,l="refresh"===e.changeType||e.isLiveUpdate;if("append"===e.changeType&&e.items&&!e.items.length)return;l||"append"===e.changeType||"prepend"===e.changeType?(e.cancel=!0,l&&o.reset(!0),o.load()):("update"===e.changeType?e.rowIndices.forEach((function(t,n){var o=e.changeTypes[n],l=e.items[n];"update"===o?r[t]=l:"insert"===o?r.splice(t,0,l):"remove"===o&&r.splice(t,1)})):(r.forEach((function(e,o){r[o]=t._items[o+n]||r[o]})),e.items=r),r.forEach((function(e,t){e.rowIndex=t})))}},_applyChange:function(e){var t=this,n=e.items,o=e.changeType,r=e.removeCount;if(r){var l="prepend"===o;r=M(t._items,r,l,(function(e,n){return"data"===e.rowType&&!e.isNewRow||"group"===e.rowType&&(t._dataSource.isGroupItemCountable(e.data)||n)})),e.removeCount=r}switch(o){case"prepend":t._items.unshift.apply(t._items,n),r&&t._items.splice(-r);break;case"append":t._items.push.apply(t._items,n),r&&t._items.splice(0,r);break;default:t.callBase(e)}},items:function(e){return e?this._items:this._visibleItems||this._items},getRowIndexDelta:function(){var e=this._visibleItems,t=0;return e&&e[0]&&(t=this._items.indexOf(e[0])),t<0?0:t},getRowIndexOffset:function(e){var t=0,n=this.dataSource(),o=this._rowsScrollController;return o&&!e?t=o.beginPageIndex()*o._dataSource.pageSize():"virtual"===this.option("scrolling.mode")&&n&&(t=n.beginPageIndex()*n.pageSize()),t},viewportSize:function(){var e=this._rowsScrollController;e&&e.viewportSize.apply(e,arguments);var t=this._dataSource;return t&&t.viewportSize.apply(t,arguments)},viewportItemSize:function(){var e=this._rowsScrollController;e&&e.viewportItemSize.apply(e,arguments);var t=this._dataSource;return t&&t.viewportItemSize.apply(t,arguments)},setViewportPosition:function(){var e=this._rowsScrollController,t=this._dataSource;e?e.setViewportPosition.apply(e,arguments):null==t||t.setViewportPosition.apply(t,arguments)},setContentSize:function(e){var t=this._rowsScrollController;t&&t.setContentSize(e);var n=this._dataSource;return n&&n.setContentSize(e)},loadIfNeed:function(){var e=this._rowsScrollController;e&&e.loadIfNeed();var t=this._dataSource;return t&&t.loadIfNeed()},getItemSize:function(){var e=this._rowsScrollController;if(e)return e.getItemSize.apply(e,arguments);var t=this._dataSource;return t&&t.getItemSize.apply(t,arguments)},getItemSizes:function(){var e=this._rowsScrollController;if(e)return e.getItemSizes.apply(e,arguments);var t=this._dataSource;return t&&t.getItemSizes.apply(t,arguments)},getContentOffset:function(){var e=this._rowsScrollController;if(e)return e.getContentOffset.apply(e,arguments);var t=this._dataSource;return t&&t.getContentOffset.apply(t,arguments)},refresh:function(e){var t=this._dataSource;return t&&e&&e.load&&N(this)&&t.resetCurrentTotalCount(),this.callBase.apply(this,arguments)},dispose:function(){var e=this._rowsScrollController;e&&e.dispose(),this.callBase.apply(this,arguments)}},c.default.proxyMethod(V,"virtualItemsCount"),c.default.proxyMethod(V,"getVirtualContentSize"),c.default.proxyMethod(V,"setViewportItemIndex"),V),resizing:{resize:function(){var e,t=this,n=t.callBase;if(t.option("legacyRendering")||!k(t)&&!A(t))e=n.apply(t);else{clearTimeout(t._resizeTimeout);var o=new Date-t._lastTime,r=t.option("scrolling.updateTimeout");t._lastTime&&o<r?(e=new f.Deferred,t._resizeTimeout=setTimeout((function(){n.apply(t).done(e.resolve).fail(e.reject),t._lastTime=new Date}),r),t._lastTime=new Date):(e=n.apply(t),t._dataController.isLoaded()&&(t._lastTime=new Date))}return e},dispose:function(){this.callBase.apply(this,arguments),clearTimeout(this._resizeTimeout)}}},views:{rowsView:H}}}},1784:function(e,t,n){"use strict";var o=C(n(0)),r=n(20),l=C(n(14)),d=C(n(50)),c=n(2),h=C(n(161)),f=n(10),_=C(n(37)),v=n(19),m=C(n(74));function C(e){return e&&e.__esModule?e:{default:e}}var y=function(e){return"virtual"===e.option("scrolling.mode")||e._isVirtual},w=function(e){return"infinite"===e.option("scrolling.mode")&&!e._isVirtual};t.getPixelRatio=function(e){return e.devicePixelRatio||1},t.getContentHeightLimit=function(e){return e.msie?4e6:e.mozilla?8e6:15e6/t.getPixelRatio((0,r.getWindow)())},t.subscribeToExternalScrollers=function(e,t,n){var d,c=[],_=[],v=[];function m(t){var n=t.element?t.$element():t,o=h.default.offset(n);return o?t.scrollTop()-(o.top-e.offset().top):e.offset().top}var C={on:function(e,t,n){e.on("scroll",n)},off:function(e,t,n){e.off("scroll",n)}};function y(e){var n="#document"===e.get(0).nodeName,d=e.data("dxScrollable"),h=C;if(d||(d=n&&(0,o.default)((0,r.getWindow)())||"auto"===e.css("overflowY")&&e,h=l.default,d)){var f=function(e){return function(){var n=e.scrollTop()-m(e);t(n=n>0?n:0)}}(d);h.on(d,"scroll",f),_.push((function(e){var t=m(d),n=d.scrollTo?"scrollTo":"scrollTop";e-t>=0&&d[n](e+t)})),c.push(d),v.push((function(){h.off(d,"scroll",f)}))}}for(d=(n=n||e).parent();d.length;d=d.parent())y(d);return{scrollTo:function(e){(0,f.each)(_,(function(t,n){n(e)}))},dispose:function(){(0,f.each)(v,(function(e,t){t()}))}}},t.VirtualScrollController=_.default.inherit(function(){var e=function(e,t){var n=e.option("scrolling.preloadEnabled"),o=function(e){var t=e._dataSource.pageSize();if(e.option("scrolling.preventPreload"))return 0;var n=e._viewportSize;if(y(e)&&!e.option("legacyRendering")&&e.option("scrolling.removeInvisiblePages")){n=0;for(var o=e._viewportSize*e._viewportItemSize,r=e.getContentOffset(),l=e._position||0,d=e.virtualItemsCount(),c=e._dataSource.totalItemsCount(),h=d.begin;h<c&&!(r>=l+o);h++)(r+=e._itemSizes[h]||e._viewportItemSize)>=l&&n++}return t&&n>0?Math.ceil(n/t):1}(e);return o&&(t?o=n?1:0:(n&&o++,w(e)&&o--)),o};function n(e){return e._cache.length?e._cache[0].pageIndex:-1}function o(e){return e._cache.length?e._cache[e._cache.length-1].pageIndex:-1}var r=function(e,t,n){e._isChangedFiring=!0,t(n),e._isChangedFiring=!1},l=function(e,t,n){if(e._isDelayChanged)return e._isDelayChanged=!1,r(e,t,n),!0},h=function(e,t,n,o,l){var d=e._dataSource,h=d.items().slice(),f=(0,c.isObject)(n)?n:void 0,_="prepend"===n,v=d.viewportItems();n&&(0,c.isString)(n)&&!e._isDelayChanged&&(f={changeType:n,items:h},l&&(f.removeCount=l.itemsCount,f.removeCount&&d.correctCount&&(f.removeCount=d.correctCount(v,f.removeCount,_))));var m=l?l.itemsLength:0;m&&d.correctCount&&(m=d.correctCount(v,m,_)),"append"===n?(v.push.apply(v,h),l&&v.splice(0,m)):_?(v.unshift.apply(v,h),l&&v.splice(-m)):e._dataSource.viewportItems(h),d.updateLoading(),e._lastPageIndex=e.pageIndex(),e._isDelayChanged=o,o||r(e,t,f)};return{ctor:function(component,e,t){var n=this;n._dataSource=e,n.component=component,n._pageIndex=n._lastPageIndex=e.pageIndex(),n._viewportSize=0,n._viewportItemSize=20,n._viewportItemIndex=-1,n._itemSizes={},n._sizeRatio=1,n._items=[],n._cache=[],n._isVirtual=t,n._loadingPageIndexes={},n.positionChanged=(0,m.default)()},getItemSizes:function(){return this._itemSizes},option:function(){return this.component.option.apply(this.component,arguments)},virtualItemsCount:function(){var e,t=this,o=0;if(y(t)){(e=n(t))<0&&(e=t._dataSource.pageIndex());var r=e*t._dataSource.pageSize();return o=t._cache.length*t._dataSource.pageSize(),{begin:r,end:Math.max(0,t._dataSource.totalItemsCount()-o-r)}}},setViewportPosition:function(e){var t=this,n=new v.Deferred,o=Math.min(t.option("scrolling.timeout")||0,t._dataSource.changingDuration());return o<t.option("scrolling.renderingThreshold")&&(o=t.option("scrolling.minTimeout")||0),clearTimeout(t._scrollTimeoutID),o>0?t._scrollTimeoutID=setTimeout((function(){t._setViewportPositionCore(e),n.resolve()}),o):(t._setViewportPositionCore(e),n.resolve()),n.promise()},getViewportPosition:function(){return this._position||0},getItemIndexByPosition:function(){for(var e=this,t=e._position,n=e.getItemSize(),o=0,r=0,l=Object.keys(e._itemSizes).concat(-1),i=0;i<l.length&&o<t;i++){var d=parseInt(l[i]),c=(t-o)/n;if(d<0||r+c<d){r+=c;break}o+=(c=d-r)*n,r+=c;var h=e._itemSizes[d];r+=(o+=h)<t?1:(t-o+h)/h}return Math.round(50*r)/50},_setViewportPositionCore:function(e){this._position=e;var t=this.getItemIndexByPosition(),n=this.setViewportItemIndex(t);return this.positionChanged.fire(),n},setContentSize:function(e){var n=this,o=Array.isArray(e)&&e,r=n.virtualItemsCount();if(o&&(e=o.reduce((function(a,b){return a+b}),0)),n._contentSize=e,r){o&&o.forEach((function(e,t){n._itemSizes[r.begin+t]=e}));var l=(r.begin+r.end+n.itemsCount())*n._viewportItemSize,c=t.getContentHeightLimit(d.default);n._sizeRatio=l>c?c/l:1}},getItemSize:function(){return this._viewportItemSize*this._sizeRatio},getItemOffset:function(e,t){var n=this,o=n.virtualItemsCount(),r=e;if(!o)return 0;var l=0,d=n._dataSource.totalItemsCount();return Object.keys(n._itemSizes).forEach((function(o){r&&(t?o>=d-e:o<e)&&(l+=n._itemSizes[o],r--)})),Math.floor(l+r*n._viewportItemSize*n._sizeRatio)},getContentOffset:function(e){var t="end"===e,n=this.virtualItemsCount();return n?this.getItemOffset(t?n.end:n.begin,t):0},getVirtualContentSize:function(){var e=this;return e.virtualItemsCount()?e.getContentOffset("begin")+e.getContentOffset("end")+e._contentSize:0},getViewportItemIndex:function(){return this._viewportItemIndex},setViewportItemIndex:function(e){var t,n=this,o=n._dataSource.pageSize(),r=n._dataSource.pageCount(),l=y(n),d=w(n),c=n._dataSource.totalItemsCount();if(n._viewportItemIndex=e,o&&(l||d)&&c>=0){if(n._viewportSize&&e+n._viewportSize>=c&&!n._isVirtual)if(n._dataSource.hasKnownLastPage()){var h=c%o;(t=r-1)>0&&h>0&&h<n._viewportSize&&t--}else t=r;else{t=Math.floor(e/o);var f=r-1;t=Math.max(t,0),t=Math.min(t,f)}return n.pageIndex(t),n.load()}},viewportItemSize:function(e){return void 0!==e&&(this._viewportItemSize=e),this._viewportItemSize},viewportSize:function(e){return void 0!==e&&(this._viewportSize=e),this._viewportSize},pageIndex:function(e){return y(this)||w(this)?(void 0!==e&&(this._pageIndex=e),this._pageIndex):this._dataSource.pageIndex(e)},beginPageIndex:function(e){var t=n(this);return t<0&&(t=void 0!==e?e:this.pageIndex()),t},endPageIndex:function(){var e=o(this);return e>0?e:this._lastPageIndex},pageSize:function(){return this._dataSource.pageSize()},load:function(){var t,r=this,l=r._dataSource;if(y(r)||w(r)){var d=function(t){var r=-1,l=n(t),d=t._dataSource;l<0?r=t._pageIndex:t._cache[t._pageIndex-l]?l>=0&&t._viewportSize>=0&&(l>0&&(o(t)+1===d.pageCount()&&t._cache.length<e(t)+1||t._pageIndex===l&&e(t,!0))&&(r=l-1),r<0&&l+t._cache.length<=t._pageIndex+e(t)&&(r=l+t._cache.length)):r=t._pageIndex;return t._loadingPageIndexes[r]&&(r=-1),r}(r);if(d>=0){var c=function(e,t){var n=e._dataSource;if(t===e.pageIndex()||!n.isLoading()&&t<n.pageCount()||!n.hasKnownLastPage()&&t===n.pageCount())return n.pageIndex(t),e._loadingPageIndexes[t]=!0,(0,v.when)(n.load()).always((function(){e._loadingPageIndexes[t]=!1}))}(r,d);c&&(t=new v.Deferred,c.done((function(){var e=r._delayDeferred;e?e.done(t.resolve).fail(t.reject):t.resolve()})).fail(t.reject),l.updateLoading())}}else t=l.load();return t||r._lastPageIndex===r.pageIndex()||r._dataSource.onChanged({changeType:"pageIndex"}),t||(new v.Deferred).resolve()},loadIfNeed:function(){var e=this;if((y(e)||w(e))&&!e._dataSource.isLoading()&&(!e._isChangedFiring||e._isVirtual)){var t=e.getViewportPosition();t>0?e._setViewportPositionCore(t):e.load()}},handleDataChanged:function(t,d){var c,f,_=this,v=_._dataSource,m=_._cache.length;if(d&&d.changes)r(_,t,d);else if(y(_)||w(_)){var C=n(_);if(C>=0&&(y(_)&&C+_._cache.length!==v.pageIndex()&&C-1!==v.pageIndex()&&(m=0,_._cache=[]),w(_)))if(0===v.pageIndex())_._cache=[];else if(v.pageIndex()<o(_))return void r(_,t,{changeType:"append",items:[]});var x,I={pageIndex:v.pageIndex(),itemsLength:v.items(!0).length,itemsCount:_.itemsCount(!0)};!_.option("legacyRendering")&&_.option("scrolling.removeInvisiblePages")&&y(_)?f=_._cache.length>Math.max(e(this)+(_.option("scrolling.preloadEnabled")?1:0),2):l(_,t,{isDelayed:!0}),C===v.pageIndex()+1?(f&&(x=_._cache.pop()),c="prepend",_._cache.unshift(I)):(f&&(x=_._cache.shift()),c="append",_._cache.push(I));var S=y(_)&&0===m;h(_,t,_._cache.length>1?c:void 0,S,x),_._delayDeferred=_.load().done((function(){l(_,t)&&_.load()}))}else h(_,t,d)},itemsCount:function(e){var t=0;return!e&&y(this)?(0,f.each)(this._cache,(function(){t+=this.itemsCount})):t=this._dataSource.itemsCount(),t},reset:function(e){this._loadingPageIndexes={},this._cache=[],e||(this._itemSizes={})},subscribeToWindowScrollEvents:function(e){var n=this;n._windowScroll=n._windowScroll||t.subscribeToExternalScrollers(e,(function(e){n.viewportItemSize()&&n.setViewportPosition(e)}))},dispose:function(){clearTimeout(this._scrollTimeoutID),this._windowScroll&&this._windowScroll.dispose(),this._windowScroll=null},scrollTo:function(e){this._windowScroll&&this._windowScroll.scrollTo(e)}}}())},1819:function(e,t,n){"use strict";var o,r=n(20),l=n(1820),d={_renderCore:function(){var e=this,t=e._scrollLeft;e.callBase.apply(e,arguments),e._columnsController.isVirtualMode()&&t>=0&&(e._scrollLeft=0,e.scrollTo({left:t}))}},c=(o=function(e){return e.map((function(e){return e.visibleWidth||parseFloat(e.width)||50}))},{init:function(){var e=this;e.callBase(),e._beginPageIndex=0,e._endPageIndex=0,e._position=0,e._virtualVisibleColumns={}},resetColumnsCache:function(){this.callBase(),this._virtualVisibleColumns={}},getBeginPageIndex:function(e){for(var t=this.getVisibleColumns(void 0,!0),n=o(t),r=0,l=0;l<n.length;l++){if(r>=e)return Math.floor(l/this.getColumnPageSize());r+=n[l]}return 0},getTotalWidth:function(){var e=this.option("width");return"number"==typeof e?e:this.getController("resizing")._lastWidth||this.component.$element().outerWidth()},getEndPageIndex:function(e){var t=this.getVisibleColumns(void 0,!0),n=o(t),r=0;e+=this.getTotalWidth();for(var l=0;l<n.length;l++){if(r>=e)return Math.ceil(l/this.getColumnPageSize());r+=n[l]}return Math.ceil(n.length/this.getColumnPageSize())},getColumnPageSize:function(){return this.option("scrolling.columnPageSize")},_fireColumnsChanged:function(){var e=new Date;this.columnsChanged.fire({optionNames:{all:!0,length:1},changeTypes:{columns:!0,length:1}}),this._renderTime=new Date-e},setScrollPosition:function(e){var t=this,n=t.option("scrolling.columnRenderingThreshold");t._renderTime>n?(clearTimeout(t._changedTimeout),t._changedTimeout=setTimeout((function(){t._setScrollPositionCore(e)}),t.option("scrolling.timeout"))):t._setScrollPositionCore(e)},isVirtualMode:function(){return(0,r.hasWindow)()&&"virtual"===this.option("scrolling.columnRenderingMode")},resize:function(){this._setScrollPositionCore(this._position)},_setScrollPositionCore:function(e){var t=this;if(t.isVirtualMode()){var n=t.getBeginPageIndex(e),o=t.getEndPageIndex(e),r=e<t._position?t._beginPageIndex>n:t._endPageIndex<o;t._position=e,r&&(t._beginPageIndex=n,t._endPageIndex=o,t._fireColumnsChanged())}},getFixedColumns:function(e,t){var n=this.callBase(e);if(this.isVirtualMode()&&!t&&n.length){var o=n.map((function(e){return e.command})).indexOf("transparent");return n[o].colspan=this.getVisibleColumns().length-this.callBase().length+1,n}return n},getVisibleColumns:function(e,t){if(t||!this.isVirtualMode())return this.callBase(e);this._beginPageIndex||this._endPageIndex||(this._beginPageIndex=this.getBeginPageIndex(this._position),this._endPageIndex=this.getEndPageIndex(this._position));var n=this._beginPageIndex,r=this._endPageIndex,d=e+"-"+n+"-"+r;if(this._virtualVisibleColumns[d])return this._virtualVisibleColumns[d];var c=this.callBase(),h=this.getRowCount(),f=this.getColumnPageSize(),_=n*f,v=r*f,m=this.getFixedColumns(void 0,!0),C=m.map((function(e){return e.command})).indexOf("transparent"),y=m.length?C:0,w=c.slice(0,y),x=c.slice(y,_),I=o(x).reduce((function(a,b){return a+b}),0);I||(_=0);var S=m.length?m.length-C-1:0,V=c.slice(c.length-S),P=c.slice(v,c.length-S),R=o(P).reduce((function(a,b){return a+b}),0);if(R||(v=c.length),h>1&&"number"==typeof e){for(var B=[],i=0;i<h;i++)B.push(this.callBase(i));w=(0,l.createColumnsInfo)(B,0,w.length)[e]||[],V=(0,l.createColumnsInfo)(B,c.length-V.length,c.length)[e]||[],c=(0,l.createColumnsInfo)(B,_,v)[e]||[]}else c=c.slice(_,v);return I&&(c.unshift({command:"virtual",width:I}),c=w.concat(c)),R&&(c.push({command:"virtual",width:R}),c=c.concat(V)),this._virtualVisibleColumns[d]=c,c},dispose:function(){clearTimeout(this._changedTimeout),this.callBase.apply(this,arguments)}});e.exports={defaultOptions:function(){return{scrolling:{columnRenderingMode:"standard",columnPageSize:5,columnRenderingThreshold:300}}},extenders:{controllers:{columns:c},views:{columnHeadersView:d,footerView:d,rowsView:{_resizeCore:function(){this.callBase.apply(this,arguments),this._columnsController.resize()},_handleScroll:function(e){var t=this,n=this.getScrollable(),o=e.scrollOffset.left;t.callBase.apply(t,arguments),t.option("rtlEnabled")&&n&&(o=n.$content().width()-n.$element().width()-o),t._columnsController.setScrollPosition(o)}}}}}},1820:function(e,t,n){"use strict";var o=n(1);function r(e,t,n,o,l,d){d=d||[],(o=o||[])[n=n||0]=o[n]||0;var c,h=e[n],f=d[n]+1||0,_=0;if(h){for(c=f;c<h.length;c++){var v=h[c],m=c+o[n],C=v.colspan||1;if(r(e,t,n+(v.rowspan||1),o,C,d),o[n]+=C-1,_+=C,v.rowspan)for(var i=n+1;i<n+v.rowspan;i++)o[i]=o[i]||0,o[i]+=v.colspan||1;if(!1===t(v,m,n,c))break;if(void 0!==l&&_>=l)break}d[n]=c}}t.foreachColumnInfo=r,t.createColumnsInfo=function(e,t,n){var l=[];r(e,(function(e,r,d){var c,h=e,f=h.colspan||1,_=r+f-1>=t&&r<n;if(l[d]=l[d]||[],_)r<t?(c=f-(t-r),r=t):c=f,r+c>n&&(c=n-r),c!==f&&(h=(0,o.extend)({},h,{colspan:c})),l[d].push(h);else if(r>n)return!1}));for(var i=0;i<l.length;i++)l[i]=l[i]||[];return l}}}]);