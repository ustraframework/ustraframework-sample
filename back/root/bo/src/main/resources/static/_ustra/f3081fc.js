(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{108:function(e,t,r){"use strict";var n=r(2),o=y(n),c=y(r(26)),d=r(136),h=r(19),l=r(6),f=r(17),_=r(5);function y(e){return e&&e.__esModule?e:{default:e}}function v(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var S,E,w,x,O="DEVEXTREME_XHR_ERROR_UNLOAD",L=(E={timeout:"Network connection timeout",error:"Unspecified network error",parsererror:"Unexpected server response"},(0,d.add)((function(){var e=(0,h.getWindow)();c.default.listen(e,"beforeunload",(function(){S=!0}))})),function(e,t){return S?O:e.status<400?function(e){return E[e]||e}(t):e.statusText}),D=(x=0,{obtain:function(){0===x&&(w=new f.Deferred),x++},release:function(){--x<1&&w.resolve()},promise:function(){return(0===x?(new f.Deferred).resolve():w).promise()},reset:function(){x=0,w&&w.resolve()}});var C={XHR_ERROR_UNLOAD:O,normalizeBinaryCriterion:function(e){return[e[0],e.length<3?"=":String(e[1]).toLowerCase(),e.length<2||e[e.length-1]]},normalizeSortingInfo:function(e){return Array.isArray(e)||(e=[e]),(0,l.map)(e,(function(i){var e={selector:(0,n.isFunction)(i)||"string"==typeof i?i:i.getter||i.field||i.selector,desc:!(!i.desc&&"d"!==String(i.dir).charAt(0).toLowerCase())};return i.compare&&(e.compare=i.compare),e}))},errorMessageFromXhr:L,aggregators:{count:{seed:0,step:function(e){return 1+e}},sum:{seed:0,step:function(e,t){return e+t}},min:{step:function(e,t){return t<e?t:e}},max:{step:function(e,t){return t>e?t:e}},avg:{seed:[0,0],step:function(e,t){return[e[0]+t,e[1]+1]},finalize:function(e){return e[1]?e[0]/e[1]:NaN}}},keysEqual:function(e,t,r){if(Array.isArray(e)){for(var n,o=(0,l.map)(t,(function(e,t){return t})),i=0;i<o.length;i++)if(n=o[i],!(0,_.equalByValue)(t[n],r[n],0,!1))return!1;return!0}return(0,_.equalByValue)(t,r,0,!1)},throttleChanges:function(e,t){var r=[],o=function(e,t){var r,o;return function(){var c=this;return o=arguments,r||(r=setTimeout((function(){r=void 0,o&&e.call(c,o)}),(0,n.isFunction)(t)?t():t)),r}}((function(){e.call(this,r),r=[]}),t);return function(e){var t;Array.isArray(e)&&(t=r).push.apply(t,v(e));return o.call(this,r)}},trivialPromise:function(){var e=new f.Deferred;return e.resolve.apply(e,arguments).promise()},rejectedPromise:function(){var e=new f.Deferred;return e.reject.apply(e,arguments).promise()},isDisjunctiveOperator:function(e){return/^(or|\|\||\|)$/i.test(e)},isConjunctiveOperator:function(e){return/^(and|&&|&)$/i.test(e)},processRequestResultLock:D,isUnaryOperation:function(e){return"!"===e[0]&&Array.isArray(e[1])},isGroupCriterion:function(e){var t,r=e[0],n=e[1];return!!Array.isArray(r)||!(!o.default.isFunction(r)||!Array.isArray(n)&&!o.default.isFunction(n)&&"and"!==(t=n)&&"or"!==t)},base64_encode:function(input){Array.isArray(input)||(input=function(e){var code,i,t=[];for(i=0;i<e.length;i++)(code=e.charCodeAt(i))<128?t.push(code):code<2048?t.push(192+(code>>6),128+(63&code)):code<65536?t.push(224+(code>>12),128+(code>>6&63),128+(63&code)):code<2097152&&t.push(240+(code>>18),128+(code>>12&63),128+(code>>6&63),128+(63&code));return t}(String(input)));var e="";function t(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)}for(var i=0;i<input.length;i+=3){var r=input[i],n=input[i+1],o=input[i+2];e+=(0,l.map)([r>>2,(3&r)<<4|n>>4,isNaN(n)?64:(15&n)<<2|o>>6,isNaN(o)?64:63&o],t).join("")}return e}};e.exports=C},1170:function(e,t,r){"use strict";e.exports=r(206).DataSource,e.exports.default=e.exports},150:function(e,t,r){"use strict";var n=r(530),o=r(72),c={},d=n(o.ERROR_MESSAGES,{E4000:"[DevExpress.data]: {0}",E4001:"Unknown aggregating function is detected: '{0}'",E4002:"Unsupported OData protocol version is used",E4003:"Unknown filter operation is used: {0}",E4004:"The thenby() method is called before the sortby() method",E4005:"Store requires a key expression for this operation",E4006:"ArrayStore 'data' option must be an array",E4007:"Compound keys cannot be auto-generated",E4008:"Attempt to insert an item with the a duplicated key",E4009:"Data item cannot be found",E4010:"CustomStore does not support creating queries",E4011:"Custom Store method is not implemented or is not a function: {0}",E4012:"Custom Store method returns an invalid value: {0}",E4013:"Local Store requires the 'name' configuration option is specified",E4014:"Unknown data type is specified for ODataStore: {0}",E4015:"Unknown entity name or alias is used: {0}",E4016:"The compileSetter(expr) method is called with 'self' passed as a parameter",E4017:"Keys cannot be modified",E4018:"The server has returned a non-numeric value in a response to an item count request",E4019:"Mixing of group operators inside a single group of filter expression is not allowed",E4020:"Unknown store type is detected: {0}",E4021:"The server response does not provide the totalCount value",E4022:"The server response does not provide the groupCount value",E4023:"Could not parse the following XML: {0}",E4024:"String function {0} cannot be used with the data field {1} of type {2}.",W4000:"Data returned from the server has an incorrect structure",W4001:'The {0} field is listed in both "keyType" and "fieldTypes". The value of "fieldTypes" is used.',W4002:"Data loading has failed for some cells due to the following error: {0}"});c={errors:d,errorHandler:null,_errorHandler:function(e){c.errorHandler&&c.errorHandler(e)}},e.exports=c},151:function(e,t,r){"use strict";var n={array:r(414),remote:r(1562)};e.exports=function(){var e=Array.isArray(arguments[0])?"array":"remote";return n[e].apply(this,arguments)},e.exports.queryImpl=n,e.exports.default=e.exports},1560:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(179);function o(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._counter=-1,this._deferreds={}}var t,r,c;return t=e,(r=[{key:"add",value:function(e){return this._counter++,this._deferreds[this._counter]=e,this._counter}},{key:"remove",value:function(e){return delete this._deferreds[e]}},{key:"cancel",value:function(e){return e in this._deferreds&&(this._deferreds[e].reject(n.CANCELED_TOKEN),!0)}},{key:"cancelAll",value:function(){for(;this._counter>-1;)this.cancel(this._counter),this._counter--}}])&&o(t.prototype,r),c&&o(t,c),e}();t.default=c},1562:function(e,t,r){"use strict";var n=r(1563),o=r(150),c=r(6).each,d=r(2).isFunction,h=r(17).Deferred,l=r(414);e.exports=function e(t,r,f){f=f||[],r=r||{};var _=function(e,t){return{name:e,args:t}},y=function(e){var y,v,m,S,E,head,w,x=new h,O=function(e){var t=r.errorHandler;t&&t(e),o._errorHandler(e),x.reject(e)};function L(e){switch(e.name){case"sortBy":return E=[e.args],!0;case"thenBy":if(!E)throw o.errors.Error("E4004");return E.push(e.args),!0}return!1}try{y=r.adapter,d(y)||(y=n[y]),v=y(r),m=[].concat(f).concat(e);var D=v.optimize;for(D&&D(m);m.length;){if(!L(S=m[0])){if(E){m.unshift(_("multiSort",[E])),E=null;continue}if("enumerate"!==String(S.name)&&(!v[S.name]||!1===v[S.name].apply(v,S.args)))break}m.shift()}head=m[0],w=[],head&&"multiSort"===head.name&&(m.shift(),c(head.args[0],(function(){w.push(_(w.length?"thenBy":"sortBy",this))}))),m=w.concat(m),v.exec(t).done((function(e,t){if(m.length){var n=l(e,{errorHandler:r.errorHandler});c(m,(function(){n=n[this.name].apply(n,this.args)})),n.done(x.resolve).fail(x.reject)}else x.resolve(e,t)})).fail(O)}catch(e){O(e)}return x.promise()},v={};return c(["sortBy","thenBy","filter","slice","select","groupBy"],(function(){var n=String(this);v[n]=function(){return e(t,r,f.concat(_(n,arguments)))}})),c(["count","min","max","sum","avg","aggregate","enumerate"],(function(){var e=String(this);v[e]=function(){return y.call(this,_(e,arguments))}})),v}},1563:function(e,t,r){"use strict";e.exports={}},179:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeDataSourceOptions=t.normalizeLoadResult=t.mapDataRespectingGrouping=t.normalizeStoreLoadOptionAccessorArguments=t.isPending=t.CANCELED_TOKEN=void 0;var n=r(603),o=y(r(413)),c=y(r(350)),d=r(6),h=y(r(347)),l=r(1),f=r(2),_=r(108);function y(e){return e&&e.__esModule?e:{default:e}}function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){S(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(source,e){if(null==source)return{};var t,i,r=function(source,e){if(null==source)return{};var t,i,r={},n=Object.keys(source);for(i=0;i<n.length;i++)t=n[i],e.indexOf(t)>=0||(r[t]=source[t]);return r}(source,e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(source);for(i=0;i<n.length;i++)t=n[i],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(source,t)&&(r[t]=source[t])}return r}t.CANCELED_TOKEN="canceled",t.isPending=function(e){return"pending"===e.state()},t.normalizeStoreLoadOptionAccessorArguments=function(e){switch(e.length){case 0:return;case 1:return e[0]}return[].slice.call(e)};var w=function(e,t,r){return Array.isArray(e)?t?function(e,t,r){return(0,d.map)(e,(function(e){var n=e.items;return m(m({},E(e,["items"])),{},{items:w(n,t-1,r)})}))}(e,t,r):(0,d.map)(e,r):e},x=(t.mapDataRespectingGrouping=function(e,t,r){var n=r?(0,_.normalizeSortingInfo)(r).length:0;return w(e,n,t)},t.normalizeLoadResult=function(data,e){var t;return null!==(t=data)&&void 0!==t&&t.data&&(e=data,data=data.data),Array.isArray(data)||(data=[data]),{data:data,extra:e}},function(e,t){return new h.default({load:function(){return(0,n.sendRequest)({url:e,dataType:"json"})},loadMode:null==t?void 0:t.fromUrlLoadMode})});t.normalizeDataSourceOptions=function(e,t){var r,n,_;return"string"==typeof e&&(e={paginate:!1,store:x(e,t)}),void 0===e&&(e=[]),void 0===(e=Array.isArray(e)||e instanceof o.default?{store:e}:(0,l.extend)({},e)).store&&(e.store=[]),r=e.store,"load"in e?r=function(e){var t={};return(0,d.each)(["useDefaultSearch","key","load","loadMode","cacheRawData","byKey","lookup","totalCount","insert","update","remove"],(function(){t[this]=e[this],delete e[this]})),new h.default(t)}(e):Array.isArray(r)?r=new c.default(r):(0,f.isPlainObject)(r)&&(n=(0,l.extend)({},r),_=n.type,delete n.type,r=o.default.create(_,n)),e.store=r,e}},1966:function(e,t,r){var content=r(1967);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(99).default)("20392db0",content,!0,{sourceMap:!1})},1968:function(e,t,r){var content=r(1969);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(99).default)("67dbdb68",content,!0,{sourceMap:!1})},1970:function(e,t,r){e.exports=r.p+"fonts/dxicons.6a2ec19.woff2"},1971:function(e,t,r){e.exports=r.p+"fonts/dxicons.cdb1ec4.woff"},1972:function(e,t,r){e.exports=r.p+"fonts/dxicons.448a073.ttf"},206:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataSource=void 0;var n=O(r(37)),o=r(1),c=O(r(5)),d=r(6),h=r(2),l=r(108),f=O(r(336)),_=O(r(347)),y=r(332),v=r(150),m=O(r(35)),S=O(r(1559)),E=r(17),w=O(r(1560)),x=r(179);function O(e){return e&&e.__esModule?e:{default:e}}t.DataSource=n.default.inherit({ctor:function(e){var t,r=this;e=(0,x.normalizeDataSourceOptions)(e),this._eventsStrategy=new y.EventsStrategy(this);var n=0!==e.pushAggregationTimeout?(0,l.throttleChanges)(this._onPush,(function(){return void 0===e.pushAggregationTimeout?5*r._changedTime:e.pushAggregationTimeout})):this._onPush;this._changedTime=0,this._onPushHandler=function(e){r._aggregationTimeoutId=n.call(r,e)},this._store=e.store,this._store.on("push",this._onPushHandler),this._storeLoadOptions=this._extractLoadOptions(e),this._mapFunc=e.map,this._postProcessFunc=e.postProcess,this._pageIndex=void 0!==e.pageIndex?e.pageIndex:0,this._pageSize=void 0!==e.pageSize?e.pageSize:20,this._loadingCount=0,this._loadQueue=this._createLoadQueue(),this._searchValue="searchValue"in e?e.searchValue:null,this._searchOperation=e.searchOperation||"contains",this._searchExpr=e.searchExpr,this._paginate=e.paginate,this._reshapeOnPush=null!==(t=e.reshapeOnPush)&&void 0!==t&&t,(0,d.each)(["onChanged","onLoadError","onLoadingChanged","onCustomizeLoadResult","onCustomizeStoreLoadOptions"],(function(t,n){n in e&&r.on(n.substr(2,1).toLowerCase()+n.substr(3),e[n])})),this._operationManager=new w.default,this._init()},_init:function(){this._items=[],this._userData={},this._totalCount=-1,this._isLoaded=!1,(0,h.isDefined)(this._paginate)||(this._paginate=!this.group()),this._isLastPage=!this._paginate},dispose:function(){var e;this._store.off("push",this._onPushHandler),this._eventsStrategy.dispose(),clearTimeout(this._aggregationTimeoutId),delete this._store,null===(e=this._delayedLoadTask)||void 0===e||e.abort(),this._operationManager.cancelAll(),this._disposed=!0},_extractLoadOptions:function(e){var t={},r=["sort","filter","select","group","requireTotalCount"],n=this._store._customLoadOptions();return n&&(r=r.concat(n)),(0,d.each)(r,(function(){t[this]=e[this]})),t},loadOptions:function(){return this._storeLoadOptions},items:function(){return this._items},pageIndex:function(e){if(!(0,h.isNumeric)(e))return this._pageIndex;this._pageIndex=e,this._isLastPage=!this._paginate},paginate:function(e){if(!(0,h.isBoolean)(e))return this._paginate;this._paginate!==e&&(this._paginate=e,this.pageIndex(0))},pageSize:function(e){if(!(0,h.isNumeric)(e))return this._pageSize;this._pageSize=e},isLastPage:function(){return this._isLastPage},generateStoreLoadOptionAccessor:function(e){var t=this;return function(r){var n=(0,x.normalizeStoreLoadOptionAccessorArguments)(r);if(void 0===n)return t._storeLoadOptions[e];t._storeLoadOptions[e]=n}},sort:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.generateStoreLoadOptionAccessor("sort")(t)},filter:function(){var e=(0,x.normalizeStoreLoadOptionAccessorArguments)(arguments);if(void 0===e)return this._storeLoadOptions.filter;this._storeLoadOptions.filter=e,this.pageIndex(0)},group:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.generateStoreLoadOptionAccessor("group")(t)},select:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.generateStoreLoadOptionAccessor("select")(t)},requireTotalCount:function(e){if(!(0,h.isBoolean)(e))return this._storeLoadOptions.requireTotalCount;this._storeLoadOptions.requireTotalCount=e},searchValue:function(e){if(arguments.length<1)return this._searchValue;this._searchValue=e,this.pageIndex(0)},searchOperation:function(e){if(!(0,h.isString)(e))return this._searchOperation;this._searchOperation=e,this.pageIndex(0)},searchExpr:function(e){var t=arguments.length;if(0===t)return this._searchExpr;t>1&&(e=[].slice.call(arguments)),this._searchExpr=e,this.pageIndex(0)},store:function(){return this._store},key:function(){var e;return null===(e=this._store)||void 0===e?void 0:e.key()},totalCount:function(){return this._totalCount},isLoaded:function(){return this._isLoaded},isLoading:function(){return this._loadingCount>0},beginLoading:function(){this._changeLoadingCount(1)},endLoading:function(){this._changeLoadingCount(-1)},_createLoadQueue:function(){return S.default.create()},_changeLoadingCount:function(e){var t=this.isLoading();this._loadingCount+=e;var r=this.isLoading();t^r&&this._eventsStrategy.fireEvent("loadingChanged",[r])},_scheduleLoadCallbacks:function(e){var t=this;this.beginLoading(),e.always((function(){t.endLoading()}))},_scheduleFailCallbacks:function(e){var t=this;e.fail((function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];r[0]!==x.CANCELED_TOKEN&&t._eventsStrategy.fireEvent("loadError",r)}))},_fireChanged:function(e){var t=new Date;this._eventsStrategy.fireEvent("changed",e),this._changedTime=new Date-t},_scheduleChangedCallbacks:function(e){var t=this;e.done((function(){return t._fireChanged()}))},loadSingle:function(e,t){var r=this,n=new E.Deferred,o=this.key(),c=this._store,d=this._createStoreLoadOptions(),l=function(data){!(0,h.isDefined)(data)||m.default.isEmpty(data)?n.reject(new v.errors.Error("E4009")):(Array.isArray(data)||(data=[data]),n.resolve(r._applyMapFunction(data)[0]))};this._scheduleFailCallbacks(n),arguments.length<2&&(t=e,e=o),delete d.skip,delete d.group,delete d.refresh,delete d.pageIndex,delete d.searchString;var f=function(){return c instanceof _.default&&!c._byKeyViaLoad()};return(e===o||f()?c.byKey(t,d):(d.take=1,d.filter=d.filter?[d.filter,[e,t]]:[e,t],c.load(d))).fail(n.reject).done(l),n.promise()},load:function(){var e=this,t=new E.Deferred,r=function(){if(!e._disposed&&(0,x.isPending)(t))return e._loadFromStore(n,t)};this._scheduleLoadCallbacks(t),this._scheduleFailCallbacks(t),this._scheduleChangedCallbacks(t);var n=this._createLoadOperation(t);return this._eventsStrategy.fireEvent("customizeStoreLoadOptions",[n]),this._loadQueue.add((function(){return"number"==typeof n.delay?e._delayedLoadTask=c.default.executeAsync(r,n.delay):r(),t.promise()})),t.promise({operationId:n.operationId})},_onPush:function(e){var t=this;if(this._reshapeOnPush)this.load();else{this._eventsStrategy.fireEvent("changing",[{changes:e}]);var r=this.group(),n=this.items(),o=0,c=this.paginate()||r?e.filter((function(e){return"update"===e.type})):e;r&&(o=Array.isArray(r)?r.length:1),this._mapFunc&&c.forEach((function(e){"insert"===e.type&&(e.data=t._mapFunc(e.data))})),f.default.applyBatch(this.store(),n,c,o,!0),this._fireChanged([{changes:e}])}},_createLoadOperation:function(e){var t=this,r=this._operationManager.add(e),n=this._createStoreLoadOptions();return e.always((function(){return t._operationManager.remove(r)})),{operationId:r,storeLoadOptions:n}},reload:function(){var e=this.store();return e instanceof _.default&&e.clearRawDataCache(),this._init(),this.load()},cancel:function(e){return this._operationManager.cancel(e)},cancelAll:function(){return this._operationManager.cancelAll()},_addSearchOptions:function(e){this._disposed||(this.store()._useDefaultSearch?this._addSearchFilter(e):(e.searchOperation=this._searchOperation,e.searchValue=this._searchValue,e.searchExpr=this._searchExpr))},_createStoreLoadOptions:function(){var e=(0,o.extend)({},this._storeLoadOptions);return this._addSearchOptions(e),this._paginate&&this._pageSize&&(e.skip=this._pageIndex*this._pageSize,e.take=this._pageSize),e.userData=this._userData,e},_addSearchFilter:function(e){var t=this._searchValue,r=this._searchOperation,n=this._searchExpr,o=[];t&&(n||(n="this"),Array.isArray(n)||(n=[n]),(0,d.each)(n,(function(i,e){o.length&&o.push("or"),o.push([e,r,t])})),e.filter?e.filter=[o,e.filter]:e.filter=o)},_loadFromStore:function(e,t){var r=this,n=function(data,n){if(!r._disposed&&(0,x.isPending)(t)){var c=(0,o.extend)((0,x.normalizeLoadResult)(data,n),e);r._eventsStrategy.fireEvent("customizeLoadResult",[c]),(0,E.when)(c.data).done((function(data){c.data=data,r._processStoreLoadResult(c,t)})).fail(t.reject)}};return e.data?(new E.Deferred).resolve(e.data).done(n):this.store().load(e.storeLoadOptions).done(n).fail(t.reject)},_processStoreLoadResult:function(e,t){var r=this,data=e.data,n=e.extra,o=e.storeLoadOptions,c=function(){return r._isLoaded=!0,r._totalCount=isFinite(n.totalCount)?n.totalCount:-1,t.resolve(data,n)};this._disposed||(data=this._applyPostProcessFunction(this._applyMapFunction(data)),(0,h.isPlainObject)(n)||(n={}),this._items=data,(!data.length||!this._paginate||this._pageSize&&data.length<this._pageSize)&&(this._isLastPage=!0),o.requireTotalCount&&!isFinite(n.totalCount)?r.store().totalCount(o).done((function(e){n.totalCount=e,c()})).fail(t.reject):c())},_applyMapFunction:function(data){return this._mapFunc?(0,x.mapDataRespectingGrouping)(data,this._mapFunc,this.group()):data},_applyPostProcessFunction:function(data){return this._postProcessFunc?this._postProcessFunc(data):data},on:function(e,t){return this._eventsStrategy.on(e,t),this},off:function(e,t){return this._eventsStrategy.off(e,t),this}})},282:function(e,t,r){"use strict";var n=r(5).grep,o=r(1).extend,c=r(6).each,d=r(414),h=r(108).normalizeSortingInfo;function l(e,t){return e=e.groupBy(t[0].selector),t.length>1&&(e=e.select((function(g){return o({},g,{items:l(d(g.items),t.slice(1)).toArray()})}))),e}function f(e,t){var r=[];return c(e,(function(e,o){n(t,(function(e){return o.selector===e.selector})).length<1&&r.push(o)})),r.concat(t)}e.exports={multiLevelGroup:l,arrangeSortingInfo:f,queryByOptions:function(e,t,r){var filter=(t=t||{}).filter;if(filter&&(e=e.filter(filter)),r)return e;var n=t.sort,select=t.select,o=t.group,d=t.skip,_=t.take;return o&&((o=h(o)).keepInitialKeyOrder=!!t.group.keepInitialKeyOrder),(n||o)&&(n=h(n||[]),o&&!o.keepInitialKeyOrder&&(n=f(o,n)),c(n,(function(t){e=e[t?"thenBy":"sortBy"](this.selector,this.desc,this.compare)}))),select&&(e=e.select(select)),o&&(e=l(e,o)),(_||d)&&(e=e.slice(d||0,_)),e}}},336:function(e,t,r){"use strict";var n=r(2),o=_(r(95)),c=_(r(103)),d=r(1),h=r(150),l=_(r(218)),f=r(108);function _(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,r,n){var o;if(n){for(var i=0;i<t.length;i++)if(o=v(e,t[i].items||t[i].collapsedItems||[]||[],r,n-1))return o}else if(O(e,t,r)>=0)return t}function m(e,t,r,n){return n?v(e,t,r,n)||[]:t}function S(e,t,data){e._dataByKeyMap&&(e._dataByKeyMap[JSON.stringify(t)]=data,e._dataByKeyMapLength+=data?1:-1)}function E(e,t,r,data,n){var c,d=e.key();if(d){if(function(e,t){for(var r="string"==typeof t?t.split():t.slice();r.length;)if(r.shift()in e)return!0;return!1}(data,d)&&!(0,f.keysEqual)(d,r,e.keyOf(data)))return!n&&(0,f.rejectedPromise)(h.errors.Error("E4017"));if(!(c=function(e,t){if(e._dataByKeyMap)return e._dataByKeyMap[JSON.stringify(t)]}(t,r))){var _=O(e,t,r);if(_<0)return!n&&(0,f.rejectedPromise)(h.errors.Error("E4009"));c=t[_]}}else c=r;if(l.default.deepExtendArraySafe(c,data,!0),!n)return(0,o.default)().useLegacyStoreResult?(0,f.trivialPromise)(r,data):(0,f.trivialPromise)(c,r)}function w(e,t,data,r,l){var _,v=e.key(),m=(0,n.isPlainObject)(data)?(0,d.extend)({},data):data;if(v){if(void 0===(_=e.keyOf(m))||"object"===y(_)&&(0,n.isEmptyObject)(_)){if(Array.isArray(v))throw h.errors.Error("E4007");_=m[v]=String(new c.default)}else if(void 0!==t[O(e,t,_)])return!l&&(0,f.rejectedPromise)(h.errors.Error("E4008"))}else _=m;if(r>=0?t.splice(r,0,m):t.push(m),S(t,_,m),!l)return(0,f.trivialPromise)((0,o.default)().useLegacyStoreResult?data:m,_)}function x(e,t,r,n){var o=O(e,t,r);if(o>-1&&(t.splice(o,1),S(t,r,null)),!n)return(0,f.trivialPromise)(r)}function O(e,t,r){var n=e.key();if(!function(e,t){return!e._dataByKeyMap||e._dataByKeyMap[JSON.stringify(t)]}(t,r))return-1;for(var i=0,o=t.length;i<o;i++)if((0,f.keysEqual)(n,e.keyOf(t[i]),r))return i;return-1}e.exports.applyBatch=function(e,t,r,o,c){r.forEach((function(r){var d="insert"===r.type?t:m(e,t,r.key,o);switch(function(e,t){if(e.key()&&(!t._dataByKeyMap||t._dataByKeyMapLength!==t.length)){for(var r={},n=t.length,i=0;i<n;i++)r[JSON.stringify(e.keyOf(t[i]))]=t[i];t._dataByKeyMap=r,t._dataByKeyMapLength=n}}(e,d),r.type){case"update":E(e,d,r.key,r.data,!0);break;case"insert":w(e,d,r.data,c&&(0,n.isDefined)(r.index)?r.index:-1,!0);break;case"remove":x(e,d,r.key,!0)}}))},e.exports.update=E,e.exports.insert=w,e.exports.remove=x,e.exports.indexByKey=O},347:function(e,t,r){"use strict";var n=r(0),o=r(108),c=r(336),d=r(2).isFunction,h=r(95),l=r(150).errors,f=r(413),_=r(414),y=r(282).queryByOptions,v=r(17),m=v.Deferred,S=v.when,E=v.fromPromise,w="totalCount",x="load",O="byKey",L="insert",D="update",C="remove";function A(e){return e&&d(e.then)}function k(e){return(new m).resolve(e).promise()}function I(e,t){if(!d(t))throw l.Error("E4011",e)}function H(e){throw l.Error("E4012",e)}function P(e){function t(e){var t=e[0],r=e[1];return t&&t.getResponseHeader?o.errorMessageFromXhr(t,r):null}return function(r){var n;(n=r instanceof Error?r:new Error(t(arguments)||r&&String(r)||"Unknown error")).message!==o.XHR_ERROR_UNLOAD&&e.reject(n)}}function F(e,t){var r,n=e._loadFunc;return I(x,n),r=n.apply(e,[t]),Array.isArray(r)?r=k(r):null==r?r=k([]):A(r)||H(x),E(r)}function M(e,t,r,n){if(t.__rawData)n(t.__rawData);else{var o=t.__rawDataPromise||F(t,r);t._cacheRawData&&(t.__rawDataPromise=o),o.always((function(){delete t.__rawDataPromise})).done((function(e){t._cacheRawData&&(t.__rawData=e),n(e)})).fail(P(e))}}function j(e,t,r,o){var c={};"userData"in(r=r||{})&&(c.userData=r.userData),M(e,t,c,(function(c){var d,h,l,f,v=_(c,{errorHandler:t._errorHandler}),m=[];o||((d=y(v,r))===v?l=c.slice(0):m.push(d.enumerate().done((function(e){l=e})))),(r.requireTotalCount||o)&&((h=y(v,r,!0))===v?f=c.length:m.push(h.count().done((function(e){f=e})))),S.apply(n,m).done((function(){o?e.resolve(f):r.requireTotalCount?e.resolve(l,{totalCount:f}):e.resolve(l)})).fail((function(t){e.reject(t)}))}))}var B=f.inherit({ctor:function(e){e=e||{},this.callBase(e),this._useDefaultSearch=!!e.useDefaultSearch||"raw"===e.loadMode,this._loadMode=e.loadMode,this._cacheRawData=!1!==e.cacheRawData,this._loadFunc=e.load,this._totalCountFunc=e.totalCount,this._byKeyFunc=e.byKey,this._insertFunc=e.insert,this._updateFunc=e.update,this._removeFunc=e.remove},createQuery:function(){throw l.Error("E4010")},clearRawDataCache:function(){delete this.__rawData},_totalCountImpl:function(e){var t=new m;return"raw"!==this._loadMode||this._totalCountFunc?(function(e,t){var r,n=e._totalCountFunc;if(!d(n))throw l.Error("E4021");return A(r=n.apply(e,[t]))||(r=Number(r),isFinite(r)||H(w),r=k(r)),E(r)}(this,e).done((function(e){t.resolve(Number(e))})).fail(P(t)),t=this._addFailHandlers(t)):j(t,this,e,!0),t.promise()},_pushImpl:function(e){this.__rawData&&c.applyBatch(this,this.__rawData,e)},_loadImpl:function(e){var t=new m;return"raw"===this._loadMode?j(t,this,e,!1):(F(this,e).done((function(data,e){t.resolve(data,e)})).fail(P(t)),t=this._addFailHandlers(t)),t.promise()},_byKeyImpl:function(e,t){var r=new m;return this._byKeyViaLoad()?(this._requireKey(),function(e,t,r){M(e,t,{},(function(n){for(var c,d=t.key(),i=0,h=n.length;i<h;i++)if(c=n[i],o.keysEqual(d,t.keyOf(n[i]),r))return void e.resolve(c);e.reject(l.Error("E4009"))}))}(r,this,e)):function(e,t,r){var n,o=e._byKeyFunc;return I(O,o),A(n=o.apply(e,[t,r]))||(n=k(n)),E(n)}(this,e,t).done((function(e){r.resolve(e)})).fail(P(r)),r.promise()},_byKeyViaLoad:function(){return"raw"===this._loadMode&&!this._byKeyFunc},_insertImpl:function(e){var t,r=this,n=r._insertFunc,o=new m;return I(L,n),A(t=n.apply(r,[e]))||(t=k(t)),E(t).done((function(t){h().useLegacyStoreResult?o.resolve(e,t):o.resolve(t||e,r.keyOf(t))})).fail(P(o)),o.promise()},_updateImpl:function(e,t){var r,n=this._updateFunc,o=new m;return I(D,n),A(r=n.apply(this,[e,t]))||(r=k(r)),E(r).done((function(r){h().useLegacyStoreResult?o.resolve(e,t):o.resolve(r||t,e)})).fail(P(o)),o.promise()},_removeImpl:function(e){var t,r=this._removeFunc,n=new m;return I(C,r),A(t=r.apply(this,[e]))||(t=k()),E(t).done((function(){n.resolve(e)})).fail(P(n)),n.promise()}});e.exports=B,e.exports.default=e.exports},350:function(e,t,r){"use strict";var n=r(108),o=l(r(151)),c=r(150),d=l(r(413)),h=l(r(336));function l(e){return e&&e.__esModule?e:{default:e}}var f=d.default.inherit({ctor:function(e){e=Array.isArray(e)?{data:e}:e||{},this.callBase(e);var t=e.data;if(t&&!Array.isArray(t))throw c.errors.Error("E4006");this._array=t||[]},createQuery:function(){return(0,o.default)(this._array,{errorHandler:this._errorHandler})},_byKeyImpl:function(e){var t=h.default.indexByKey(this,this._array,e);return-1===t?(0,n.rejectedPromise)(c.errors.Error("E4009")):(0,n.trivialPromise)(this._array[t])},_insertImpl:function(e){return h.default.insert(this,this._array,e)},_pushImpl:function(e){h.default.applyBatch(this,this._array,e)},_updateImpl:function(e,t){return h.default.update(this,this._array,e,t)},_removeImpl:function(e){return h.default.remove(this,this._array,e)},clear:function(){this._eventsStrategy.fireEvent("modifying"),this._array=[],this._eventsStrategy.fireEvent("modified")}},"array");e.exports=f,e.exports.default=e.exports},357:function(e,t,r){"use strict";var n=r(206).DataSource,o=r(1).extend,c=r(179).normalizeDataSourceOptions,d="_dataSourceOptions",h="_dataSourceChangedHandler",l="_dataSourceLoadErrorHandler",f="_dataSourceLoadingChangedHandler",_="_dataSourceFromUrlLoadMode",y="_getSpecificDataSourceOption",v="_normalizeDataSource",m={postCtor:function(){this.on("disposing",function(){this._disposeDataSource()}.bind(this))},_refreshDataSource:function(){this._initDataSource(),this._loadDataSource()},_initDataSource:function(){var e,t,r=y in this?this._getSpecificDataSourceOption():this.option("dataSource");this._disposeDataSource(),r&&(r instanceof n?(this._isSharedDataSource=!0,this._dataSource=r):(e=d in this?this._dataSourceOptions():{},t=this._dataSourceType?this._dataSourceType():n,r=c(r,{fromUrlLoadMode:_ in this&&this._dataSourceFromUrlLoadMode()}),this._dataSource=new t(o(!0,{},e,r))),v in this&&(this._dataSource=this._normalizeDataSource(this._dataSource)),this._addDataSourceHandlers())},_addDataSourceHandlers:function(){h in this&&this._addDataSourceChangeHandler(),l in this&&this._addDataSourceLoadErrorHandler(),f in this&&this._addDataSourceLoadingChangedHandler(),this._addReadyWatcher()},_addReadyWatcher:function(){this._dataSource.on("loadingChanged",function(e){this._ready&&this._ready(!e)}.bind(this))},_addDataSourceChangeHandler:function(){var e=this._dataSource;this._proxiedDataSourceChangedHandler=function(t){this._dataSourceChangedHandler(e.items(),t)}.bind(this),e.on("changed",this._proxiedDataSourceChangedHandler)},_addDataSourceLoadErrorHandler:function(){this._proxiedDataSourceLoadErrorHandler=this._dataSourceLoadErrorHandler.bind(this),this._dataSource.on("loadError",this._proxiedDataSourceLoadErrorHandler)},_addDataSourceLoadingChangedHandler:function(){this._proxiedDataSourceLoadingChangedHandler=this._dataSourceLoadingChangedHandler.bind(this),this._dataSource.on("loadingChanged",this._proxiedDataSourceLoadingChangedHandler)},_loadDataSource:function(){if(this._dataSource){var e=this._dataSource;e.isLoaded()?this._proxiedDataSourceChangedHandler&&this._proxiedDataSourceChangedHandler():e.load()}},_loadSingle:function(e,t){return e="this"===e?this._dataSource.key()||"this":e,this._dataSource.loadSingle(e,t)},_isLastPage:function(){return!this._dataSource||this._dataSource.isLastPage()||!this._dataSource._pageSize},_isDataSourceLoading:function(){return this._dataSource&&this._dataSource.isLoading()},_disposeDataSource:function(){this._dataSource&&(this._isSharedDataSource?(delete this._isSharedDataSource,this._proxiedDataSourceChangedHandler&&this._dataSource.off("changed",this._proxiedDataSourceChangedHandler),this._proxiedDataSourceLoadErrorHandler&&this._dataSource.off("loadError",this._proxiedDataSourceLoadErrorHandler),this._proxiedDataSourceLoadingChangedHandler&&this._dataSource.off("loadingChanged",this._proxiedDataSourceLoadingChangedHandler)):this._dataSource.dispose(),delete this._dataSource,delete this._proxiedDataSourceChangedHandler,delete this._proxiedDataSourceLoadErrorHandler,delete this._proxiedDataSourceLoadingChangedHandler)},getDataSource:function(){return this._dataSource||null}};e.exports=m},413:function(e,t,r){"use strict";var n,o=r(37),c=o.abstract,d=r(332).EventsStrategy,h=r(6).each,l=r(150),f=r(108),_=r(69).compileGetter,y=r(282).queryByOptions,v=r(17).Deferred,m=r(5).noop,S={},E=o.inherit({ctor:function(e){var t=this;e=e||{},this._eventsStrategy=new d(this),h(["onLoaded","onLoading","onInserted","onInserting","onUpdated","onUpdating","onPush","onRemoved","onRemoving","onModified","onModifying"],(function(r,n){n in e&&t.on(n.slice(2).toLowerCase(),e[n])})),this._key=e.key,this._errorHandler=e.errorHandler,this._useDefaultSearch=!0},_customLoadOptions:function(){return null},key:function(){return this._key},keyOf:function(e){return this._keyGetter||(this._keyGetter=_(this.key())),this._keyGetter(e)},_requireKey:function(){if(!this.key())throw l.errors.Error("E4005")},load:function(e){var t=this;return e=e||{},this._eventsStrategy.fireEvent("loading",[e]),this._withLock(this._loadImpl(e)).done((function(r){t._eventsStrategy.fireEvent("loaded",[r,e])}))},_loadImpl:function(e){return y(this.createQuery(e),e).enumerate()},_withLock:function(e){var t=new v;return e.done((function(){var e=this,r=arguments;f.processRequestResultLock.promise().done((function(){t.resolveWith(e,r)}))})).fail((function(){t.rejectWith(this,arguments)})),t},createQuery:c,totalCount:function(e){return this._totalCountImpl(e)},_totalCountImpl:function(e){return y(this.createQuery(e),e,!0).count()},byKey:function(e,t){return this._addFailHandlers(this._withLock(this._byKeyImpl(e,t)))},_byKeyImpl:c,insert:function(e){var t=this;return t._eventsStrategy.fireEvent("modifying"),t._eventsStrategy.fireEvent("inserting",[e]),t._addFailHandlers(t._insertImpl(e).done((function(e,r){t._eventsStrategy.fireEvent("inserted",[e,r]),t._eventsStrategy.fireEvent("modified")})))},_insertImpl:c,update:function(e,t){var r=this;return r._eventsStrategy.fireEvent("modifying"),r._eventsStrategy.fireEvent("updating",[e,t]),r._addFailHandlers(r._updateImpl(e,t).done((function(){r._eventsStrategy.fireEvent("updated",[e,t]),r._eventsStrategy.fireEvent("modified")})))},_updateImpl:c,push:function(e){this._pushImpl(e),this._eventsStrategy.fireEvent("push",[e])},_pushImpl:m,remove:function(e){var t=this;return t._eventsStrategy.fireEvent("modifying"),t._eventsStrategy.fireEvent("removing",[e]),t._addFailHandlers(t._removeImpl(e).done((function(e){t._eventsStrategy.fireEvent("removed",[e]),t._eventsStrategy.fireEvent("modified")})))},_removeImpl:c,_addFailHandlers:function(e){return e.fail(this._errorHandler).fail(l._errorHandler)},on:function(e,t){return this._eventsStrategy.on(e,t),this},off:function(e,t){return this._eventsStrategy.off(e,t),this}});E.create=function(e,t){if(!(e in S))throw l.errors.Error("E4020",e);return new S[e](t)},E.registerClass=function(e,t){return t&&(S[t]=e),e},E.inherit=(n=E.inherit,function(e,t){var r=n.apply(this,[e]);return E.registerClass(r,t),r}),e.exports=E},414:function(e,t,r){"use strict";var n=r(37),o=r(2),c=r(6),d=r(69).compileGetter,h=r(69).toComparable,l=r(17).Deferred,f=r(150),_=r(108),y=n.inherit({toArray:function(){var e=[];for(this.reset();this.next();)e.push(this.current());return e},countable:function(){return!1}}),v=y.inherit({ctor:function(e){this.array=e,this.index=-1},next:function(){return this.index+1<this.array.length&&(this.index++,!0)},current:function(){return this.array[this.index]},reset:function(){this.index=-1},toArray:function(){return this.array.slice(0)},countable:function(){return!0},count:function(){return this.array.length}}),m=y.inherit({ctor:function(e){this.iter=e},next:function(){return this.iter.next()},current:function(){return this.iter.current()},reset:function(){return this.iter.reset()}}),S=m.inherit({ctor:function(e,t){this.callBase(e),this.index=-1,this.mapper=t},current:function(){return this.mapper(this.callBase(),this.index)},next:function(){var e=this.callBase();return e&&this.index++,e}}),E=function(e,t){return e=h(e),t=h(t),null===e&&null!==t?-1:null!==e&&null===t||void 0===e&&void 0!==t?1:void 0!==e&&void 0===t||e<t?-1:e>t?1:0},w=y.inherit({ctor:function(e,t,desc,r){e instanceof S||(e=new S(e,this._wrap)),this.iter=e,this.rules=[{getter:t,desc:desc,compare:r}]},thenBy:function(e,desc,t){var r=new w(this.sortedIter||this.iter,e,desc,t);return this.sortedIter||(r.rules=this.rules.concat(r.rules)),r},next:function(){return this._ensureSorted(),this.sortedIter.next()},current:function(){return this._ensureSorted(),this.sortedIter.current()},reset:function(){delete this.sortedIter},countable:function(){return this.sortedIter||this.iter.countable()},count:function(){return this.sortedIter?this.sortedIter.count():this.iter.count()},_ensureSorted:function(){var e=this;e.sortedIter||(c.each(e.rules,(function(){this.getter=d(this.getter)})),e.sortedIter=new S(new v(this.iter.toArray().sort((function(t,r){return e._compare(t,r)}))),e._unwrap))},_wrap:function(e,t){return{index:t,value:e}},_unwrap:function(e){return e.value},_compare:function(e,t){var r=e.index,n=t.index;if((e=e.value)===(t=t.value))return r-n;for(var i=0,o=this.rules.length;i<o;i++){var c=this.rules[i],d=c.getter(e),h=c.getter(t),l=(c.compare||E)(d,h);if(l)return c.desc?-l:l}return r-n}}),x=function(){var e=function(e){return o.isDefined(e)?e.toString():""};function t(e,t,r){return function(n){n=h(e(n));var o=function(e){return""===e||0===e||!1===e}(t)?n===t:n==t;return r&&(o=!o),o}}return function(r){return o.isFunction(r)?r:_.isGroupCriterion(r)?function(e){var t=[],r=!1,n=!1;return c.each(e,(function(){if(Array.isArray(this)||o.isFunction(this)){if(t.length>1&&r!==n)throw new f.errors.Error("E4019");t.push(x(this)),r=n,n=!0}else n=_.isConjunctiveOperator(this)})),function(e){for(var n=r,i=0;i<t.length;i++)if(t[i](e)!==r){n=!r;break}return n}}(r):_.isUnaryOperation(r)?function(e){var t=e[0],r=x(e[1]);if("!"===t)return function(e){return!r(e)};throw f.errors.Error("E4003",t)}(r):function(r){r=_.normalizeBinaryCriterion(r);var n=d(r[0]),o=r[1],c=r[2];switch(c=h(c),o.toLowerCase()){case"=":return t(n,c);case"<>":return t(n,c,!0);case">":return function(e){return h(n(e))>c};case"<":return function(e){return h(n(e))<c};case">=":return function(e){return h(n(e))>=c};case"<=":return function(e){return h(n(e))<=c};case"startswith":return function(t){return 0===h(e(n(t))).indexOf(c)};case"endswith":return function(t){var r=h(e(n(t))),o=e(c);if(r.length<o.length)return!1;var d=r.lastIndexOf(c);return-1!==d&&d===r.length-c.length};case"contains":return function(t){return h(e(n(t))).indexOf(c)>-1};case"notcontains":return function(t){return-1===h(e(n(t))).indexOf(c)}}throw f.errors.Error("E4003",o)}(r)}}(),O=m.inherit({ctor:function(e,t){this.callBase(e),this.criteria=x(t)},next:function(){for(;this.iter.next();)if(this.criteria(this.current()))return!0;return!1}}),L=y.inherit({ctor:function(e,t){this.iter=e,this.getter=t},next:function(){return this._ensureGrouped(),this.groupedIter.next()},current:function(){return this._ensureGrouped(),this.groupedIter.current()},reset:function(){delete this.groupedIter},countable:function(){return!!this.groupedIter},count:function(){return this.groupedIter.count()},_ensureGrouped:function(){if(!this.groupedIter){var e={},t=[],r=this.iter,n=d(this.getter);for(r.reset();r.next();){var o=r.current(),h=n(o);h in e?e[h].push(o):(e[h]=[o],t.push(h))}this.groupedIter=new v(c.map(t,(function(t){return{key:t,items:e[t]}})))}}}),D=m.inherit({ctor:function(e,t){this.callBase(e),this.getter=d(t)},current:function(){return this.getter(this.callBase())},countable:function(){return this.iter.countable()},count:function(){return this.iter.count()}}),C=m.inherit({ctor:function(e,t,r){this.callBase(e),this.skip=Math.max(0,t),this.take=Math.max(0,r),this.pos=0},next:function(){if(this.pos>=this.skip+this.take)return!1;for(;this.pos<this.skip&&this.iter.next();)this.pos++;return this.pos++,this.iter.next()},reset:function(){this.callBase(),this.pos=0},countable:function(){return this.iter.countable()},count:function(){return Math.min(this.iter.count()-this.skip,this.take)}});e.exports=function e(t,r){r=r||{},t instanceof y||(t=new v(t));var n=function(e){var t=r.errorHandler;t&&t(e),f._errorHandler(e)},c=function(e){var r=(new l).fail(n),o=e.step,c=e.finalize;try{t.reset();for(var d=("seed"in e?e.seed:t.next()?t.current():NaN);t.next();)d=o(d,t.current());r.resolve(c?c(d):d)}catch(e){r.reject(e)}return r.promise()},h=function(e){return c(_.aggregators[e])},select=function(e){return o.isFunction(e)||Array.isArray(e)||(e=[].slice.call(arguments)),S(new D(t,e))},m=function(e){return select(d(e))};function S(t){return e(t,r)}return{toArray:function(){return t.toArray()},enumerate:function(){var e=(new l).fail(n);try{e.resolve(t.toArray())}catch(t){e.reject(t)}return e.promise()},sortBy:function(e,desc,r){return S(new w(t,e,desc,r))},thenBy:function(e,desc,r){if(t instanceof w)return S(t.thenBy(e,desc,r));throw f.errors.Error("E4004")},filter:function(e){return Array.isArray(e)||(e=[].slice.call(arguments)),S(new O(t,e))},slice:function(e,r){return void 0===r&&(r=Number.MAX_VALUE),S(new C(t,e,r))},select:select,groupBy:function(e){return S(new L(t,e))},aggregate:function(e,t,r){return c(arguments.length<2?{step:arguments[0]}:{seed:e,step:t,finalize:r})},count:function(){if(t.countable()){var e=(new l).fail(n);try{e.resolve(t.count())}catch(t){e.reject(t)}return e.promise()}return h("count")},sum:function(e){return e?m(e).sum():h("sum")},min:function(e){return e?m(e).min():h("min")},max:function(e){return e?m(e).max():h("max")},avg:function(e){return e?m(e).avg():h("avg")}}}}}]);