(function(){try{var c={pluginName:"autogrow"};G_DEPlugin.autogrow=c;c.onInit=function(){var a="../plugin/autogrow/js"+(DEXTTOP.DEXT5.isRelease?"":"_dev")+"/config.js",a="1"==DEXTTOP.DEXT5.config.UseConfigTimeStamp?a+("?t="+DEXTTOP.DEXT5.util.getTimeStamp()):a+("?ver="+DEXTTOP.DEXT5.ReleaseVer),b=document.getElementsByTagName("head")[0],c=document.createElement("script");c.type="text/javascript";c.src=a;b.appendChild(c)};c.onLoaded=function(){"0"!=DEXTTOP.G_CURREDITOR._config.autoGrowMode&&(G_DEPlugin.autogrow.autoGrowMode=
DEXTTOP.G_CURREDITOR._config.autoGrowMode);-1<DEXTTOP.G_CURREDITOR._config.style.height.indexOf("%")&&(DEXTTOP.G_CURREDITOR._config.autoGrowMode="0",G_DEPlugin.autogrow.autoGrowMode="0");"2"==DEXTTOP.G_CURREDITOR._config.ruler.mode&&(DEXTTOP.G_CURREDITOR._config.autoGrowMode="0",G_DEPlugin.autogrow.autoGrowMode="0");DEXTTOP.DEXT5.browser.ie&&9>DEXTTOP.DEXT5.browser.ieVersion&&(DEXTTOP.G_CURREDITOR._config.autoGrowMode="0",G_DEPlugin.autogrow.autoGrowMode="0");DEXTTOP.DEXTWIN!=top&&"1"==DEXTTOP.G_CURREDITOR._config.autoGrowMode&&
(DEXTTOP.G_CURREDITOR._config.autoGrowMode="0",G_DEPlugin.autogrow.autoGrowMode="0");"0"!=G_DEPlugin.autogrow.autoGrowMode&&"0"!=DEXTTOP.G_CURREDITOR._config.autoGrowMode&&(DEXTTOP.G_CURREDITOR._config.useLineBreak="1",DEXTTOP.G_CURREDITOR._config.wordWrapType="1",DEXTTOP.G_CURREDITOR._config.resize_bar="0")};c.onChange=function(){c.autogrow(DEXTTOP.G_CURREDITOR)};c.autogrow=function(a){if("0"!=G_DEPlugin.autogrow.autoGrowMode&&void 0!=G_DEPlugin.autogrow.autoGrowMode)if("full_size"==a.FrameStatus||
"design"!=a._currentMode)a._DOC.documentElement.style.overflow="auto";else{var b=a._DOC.documentElement,c=a._BODY,e=DEXTTOP.DEXTDOC.documentElement,h=DEXTTOP.DEXTDOC.body;if(void 0==G_DEPlugin.autogrow.configHeight||null==G_DEPlugin.autogrow.configHeight||""==G_DEPlugin.autogrow.configHeight)G_DEPlugin.autogrow.configHeight=0>a._defaultHeight?parseInt(a._config.style.height,10)-a._defaultHeight:parseInt(a._config.style.height,10),G_DEPlugin.autogrow.initHeight=0<=a._defaultHeight?a._defaultHeight:
0,b.style.overflowY="hidden",G_DEPlugin.autogrow.initParentHeight=e.scrollHeight;else{b.style.overflowY="hidden";G_DEPlugin.autogrow.previousParentTop=Math.max(e.scrollTop,h.scrollTop);setHeight(G_DEPlugin.autogrow.configHeight,a);var f=Math.max(b.scrollHeight,c.scrollHeight),d;if(G_DEPlugin.autogrow.initHeight!=f){d=0==G_DEPlugin.autogrow.initHeight?G_DEPlugin.autogrow.configHeight+(f-a._defaultHeight):G_DEPlugin.autogrow.configHeight+(f-G_DEPlugin.autogrow.initHeight);setHeight(d,a);try{b.scrollHeight>
b.clientHeight?(d+=b.scrollHeight-b.clientHeight+1,setHeight(d,a)):c.scrollHeight>c.clientHeight&&(d+=c.scrollHeight-c.clientHeight+1,setHeight(d,a))}catch(l){}}else d=G_DEPlugin.autogrow.configHeight,setHeight(d,a);G_DEPlugin.autogrow.currHeight=f-G_DEPlugin.autogrow.initHeight;G_DEPlugin.autogrow.diffHeight=G_DEPlugin.autogrow.currHeight-G_DEPlugin.autogrow.preHeight;G_DEPlugin.autogrow.preHeight=f-G_DEPlugin.autogrow.initHeight;2!=G_DEPlugin.autogrow.autoGrowMode&&(e.scrollTop=G_DEPlugin.autogrow.previousParentTop+
(e.scrollHeight-G_DEPlugin.autogrow.initParentHeight),h.scrollTop=G_DEPlugin.autogrow.previousParentTop+(e.scrollHeight-G_DEPlugin.autogrow.initParentHeight),G_DEPlugin.autogrow.previousParentTop=Math.max(e.scrollTop,h.scrollTop),G_DEPlugin.autogrow.initParentHeight=e.scrollHeight);if(2==G_DEPlugin.autogrow.autoGrowMode)try{"function"===typeof DEXTTOP.DEXTWIN.dext_editor_autogrow_event&&DEXTTOP.DEXTWIN.dext_editor_autogrow_event(a,{diffHeight:G_DEPlugin.autogrow.diffHeight})}catch(m){}}}};c.onInit()}catch(b){}})();
function setHeight(c,b){var a=b.ID;b=DEXTTOP.DEXT5.util._setDEXT5editor(a);if(1==b._config.ruler.use&&1==b._config.ruler.mode){var g=parseInt(document.getElementById("dext_tab_tool3_"+b.ID).style.height,10);c+=g;DEXTTOP.DEXT5.browser.ie&&7>=DEXTTOP.DEXT5.browser.ieVersion&&(c+=1)}if(void 0==a||""==a)a=b.ID;var g=DEXTTOP.DEXTDOC.getElementById("dext_frame_holder"+a),a=DEXTTOP.DEXTDOC.getElementById("dext_frame_"+a).contentWindow.document.getElementById("ue_editor_holder_"+a),k=0,k=b.baseMenuToolbarHeight;
isViewMode(b)?b._defaultHeight=parseInt(c,10)-4:b._defaultHeight=parseInt(c,10)-k;-1<c.toString().indexOf("%")||-1<c.toString().indexOf("px")?g.style.height=c:g.style.height=c+"px";a.style.height=b._defaultHeight+"px";1==G_DEPlugin.autogrow.autoGrowMode&&(b._config.style.height=c+"px","1"==b._config.ruler.view&&"design"==b._currentMode&&b._FRAMEWIN.showRuler(b),"1"==b._config.autoBodyFit&&(b._BODY.style.minHeight=(b._defaultHeight-parseIntOr0(b._config.defaultBodySpace.value))/b._defaultHeight*100+
"%"))};
