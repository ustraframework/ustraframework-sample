(function(){try{var b={pluginName:"lazyload",cssUrl:DEXTTOP.G_CURREDITOR._config.webPath.plugin+"lazyload/css/lazyload.css"+("1"==DEXTTOP.DEXT5.config.UseConfigTimeStamp?"?t="+DEXTTOP.DEXT5.util.getTimeStamp():"?ver="+DEXTTOP.DEXT5.ReleaseVer),cssId:"dextLazyCss",isSupported:"function"==typeof document.getElementsByClassName?!0:!1,isLoadError:!1,isLoadedComplete:!1,canUseLazyLoad:function(){return 1==b.isSupported&&0==b.isLoadError&&1==b.isLoadedComplete}};G_DEPlugin.lazyload=b;var c=null;if(0!=b.isSupported){var n=
function(a,b){var c=document.getElementsByTagName("head")[0],d=document.createElement("script");d.type="text/javascript";d.onload=function(){b(!0)};d.onerror=function(){b(!1)};d.src=a;c.appendChild(d)};b.onInit=function(){var a="../plugin/lazyload/js"+(DEXTTOP.DEXT5.isRelease?"":"_dev")+"/config.js",a="1"==DEXTTOP.DEXT5.config.UseConfigTimeStamp?a+("?t="+DEXTTOP.DEXT5.util.getTimeStamp()):a+("?ver="+DEXTTOP.DEXT5.ReleaseVer);n(a,function(a){if(0==a)b.isLoadError=!0,b.isLoadedComplete=!0;else if(G_DEPlugin.lazyload.options){window.lazySizesConfig=
{lazyClass:"dext_lazyload",loadedClass:"dext_lazyloaded",loadingClass:"dext_lazyloading",preloadClass:"dext_lazypreload",errorClass:"dext_lazyerror",autosizesClass:"dext_lazyautosizes",fastLoadedClass:"dext_ls-is-cached",srcAttr:"dext-src",srcsetAttr:"dext-srcset",sizesAttr:"dext-sizes"};for(var e in G_DEPlugin.lazyload.options)window.lazySizesConfig[e]=G_DEPlugin.lazyload.options[e];a="../plugin/lazyload/js"+(DEXTTOP.DEXT5.isRelease?"":"_dev")+"/lazysizes.js";a="1"==DEXTTOP.DEXT5.config.UseConfigTimeStamp?
a+("?t="+DEXTTOP.DEXT5.util.getTimeStamp()):a+("?ver="+DEXTTOP.DEXT5.ReleaseVer);n(a,function(a){b.isLoadedComplete=!0;1==a?"undefined"!=typeof lazySizes&&(c=lazySizes):b.isLoadError=!0})}})};b.onInit();b.onLoaded=function(){};b.onBeforeGetApi=function(a){if(b.canUseLazyLoad()){var c=a.targetDoc.getElementById(b.cssId);c&&c.parentNode.removeChild(c);p(a)}};b.onBeforeEditorChangeMode=function(a){b.canUseLazyLoad()&&("source"==a.newMode?p({targetDoc:_iframeDoc}):"preview"==a.currMode&&"design"==a.newMode&&
m(_iframeWin))};b.onAfterEditorChangeMode=function(a){b.canUseLazyLoad()&&"preview"==a.newMode&&m(DEXTTOP.G_CURREDITOR._EDITOR.preview.contentWindow)};b.isRequiredCheck=function(a){return b.isLoadedComplete};b.onBeforeDocumentWrite=function(a){var k={html:null};if(b.canUseLazyLoad()){a=a.html;var e=new RegExp(/(<img[^>]+)(src=)([^>]+>)/gi);if(e.test(a))try{a=a.replace(e,"$1"+c.cfg.srcAttr+"=$3")}catch(d){}k.html=a}return k};b.onAfterDocumentWrite=function(a){if(b.canUseLazyLoad()){a=_iframeDoc.getElementsByTagName("img");
for(var k=a.length,e=0;e<k;e++)for(var d=a[e],l=d.attributes.length,h=0;h<l;h++){var f=d.attributes[h];f.name==c.cfg.srcAttr&&""!=f.value?0==c.hC(d,c.cfg.lazyClass)&&c.aC(d,c.cfg.lazyClass):-1<f.name.indexOf(c.cfg.srcAttr)&&(d.setAttribute(f.name.replace(c.cfg.srcAttr,"src"),f.value),d.removeAttribute(f.name))}m(_iframeWin)}};var m=function(a){null==a.document.getElementById(b.cssId)&&q(a.document);_iframeDoc.addEventListener("lazyloaded",r);c.setWindow(a);setTimeout(function(){c.init(!0)},0)},r=
function(a){},p=function(a){for(var b=[c.cfg.lazyClass,c.cfg.loadedClass,c.cfg.loadingClass,c.cfg.preloadClass,c.cfg.errorClass,c.cfg.autosizesClass,c.cfg.fastLoadedClass],e=b.length,d=0;d<e;d++)for(var l=a.targetDoc.getElementsByClassName(b[d]),h=b[d],f=l.length-1;0<=f;f--){var g=l[f];g.getAttribute(c.cfg.srcAttr)&&(g.src=g.getAttribute(c.cfg.srcAttr),g.removeAttribute(c.cfg.srcAttr));c.rC(g,h);""!=g.className&&""!=g.className.replace(/ /g,"")||g.removeAttribute("class")}},q=function(a){var c=a.createElement("link");
c.href=b.cssUrl;c.id=b.cssId;c.rel="stylesheet";c.type="text/css";a.getElementsByTagName("head")[0].appendChild(c)}}}catch(t){}})();
